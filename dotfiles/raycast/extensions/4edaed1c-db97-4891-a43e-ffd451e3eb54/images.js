"use strict";var zu=Object.create;var Br=Object.defineProperty;var Mu=Object.getOwnPropertyDescriptor;var Uu=Object.getOwnPropertyNames;var ju=Object.getPrototypeOf,Nu=Object.prototype.hasOwnProperty;var Mt=(r,t)=>()=>(r&&(t=r(r=0)),t);var A=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Oi=(r,t)=>{for(var o in t)Br(r,o,{get:t[o],enumerable:!0})},Bi=(r,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Uu(t))!Nu.call(r,s)&&s!==o&&Br(r,s,{get:()=>t[s],enumerable:!(i=Mu(t,s))||i.enumerable});return r};var me=(r,t,o)=>(o=r!=null?zu(ju(r)):{},Bi(t||!r||!r.__esModule?Br(o,"default",{value:r,enumerable:!0}):o,r)),Hu=r=>Bi(Br({},"__esModule",{value:!0}),r);var Li=A((qr,Di)=>{(function(r,t){typeof qr=="object"&&typeof Di<"u"?t(qr):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(qr,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function i(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=i();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let c=o,h=Promise,p=Promise.prototype.then,b=Promise.resolve.bind(h),w=Promise.reject.bind(h);function R(e){return new h(e)}function S(e){return b(e)}function g(e){return w(e)}function y(e,n,a){return p.call(e,n,a)}function C(e,n,a){y(y(e,n,a),void 0,c)}function P(e,n){C(e,n)}function v(e,n){C(e,void 0,n)}function L(e,n,a){return y(e,n,a)}function H(e){y(e,void 0,c)}let I=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let n=S(void 0);return a=>y(n,a)})();function M(e,n,a){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,a)}function B(e,n,a){try{return S(M(e,n,a))}catch(l){return g(l)}}let le=16384;class X{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let a=this._back,l=a;a._elements.length===le-1&&(l={_elements:[],_next:void 0}),a._elements.push(n),l!==a&&(this._back=l,a._next=l),++this._size}shift(){let n=this._front,a=n,l=this._cursor,f=l+1,d=n._elements,m=d[l];return f===le&&(a=n._next,f=0),--this._size,this._cursor=f,n!==a&&(this._front=a),d[l]=void 0,m}forEach(n){let a=this._cursor,l=this._front,f=l._elements;for(;(a!==f.length||l._next!==void 0)&&!(a===f.length&&(l=l._next,f=l._elements,a=0,f.length===0));)n(f[a]),++a}peek(){let n=this._front,a=this._cursor;return n._elements[a]}}function yo(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?un(e):n._state==="closed"?ml(e):go(e,n._storedError)}function ln(e,n){let a=e._ownerReadableStream;return fe(a,n)}function we(e){e._ownerReadableStream._state==="readable"?cn(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):bl(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function et(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function un(e){e._closedPromise=R((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a})}function go(e,n){un(e),cn(e,n)}function ml(e){un(e),So(e)}function cn(e,n){e._closedPromise_reject!==void 0&&(H(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function bl(e,n){go(e,n)}function So(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let _o=t("[[AbortSteps]]"),wo=t("[[ErrorSteps]]"),fn=t("[[CancelSteps]]"),dn=t("[[PullSteps]]"),Ro=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},yl=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function gl(e){return typeof e=="object"||typeof e=="function"}function Re(e,n){if(e!==void 0&&!gl(e))throw new TypeError(`${n} is not an object.`)}function ue(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function Sl(e){return typeof e=="object"&&e!==null||typeof e=="function"}function To(e,n){if(!Sl(e))throw new TypeError(`${n} is not an object.`)}function Te(e,n,a){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${a}'.`)}function hn(e,n,a){if(e===void 0)throw new TypeError(`${n} is required in '${a}'.`)}function pn(e){return Number(e)}function Eo(e){return e===0?0:e}function _l(e){return Eo(yl(e))}function Co(e,n){let l=Number.MAX_SAFE_INTEGER,f=Number(e);if(f=Eo(f),!Ro(f))throw new TypeError(`${n} is not a finite number`);if(f=_l(f),f<0||f>l)throw new TypeError(`${n} is outside the accepted range of 0 to ${l}, inclusive`);return!Ro(f)||f===0?0:f}function mn(e,n){if(!Be(e))throw new TypeError(`${n} is not a ReadableStream.`)}function tt(e){return new Pt(e)}function Po(e,n){e._reader._readRequests.push(n)}function bn(e,n,a){let f=e._reader._readRequests.shift();a?f._closeSteps():f._chunkSteps(n)}function tr(e){return e._reader._readRequests.length}function Ao(e){let n=e._reader;return!(n===void 0||!ke(n))}class Pt{constructor(n){if(Te(n,1,"ReadableStreamDefaultReader"),mn(n,"First parameter"),qe(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");yo(this,n),this._readRequests=new X}get closed(){return ke(this)?this._closedPromise:g(rr("closed"))}cancel(n=void 0){return ke(this)?this._ownerReadableStream===void 0?g(et("cancel")):ln(this,n):g(rr("cancel"))}read(){if(!ke(this))return g(rr("read"));if(this._ownerReadableStream===void 0)return g(et("read from"));let n,a,l=R((d,m)=>{n=d,a=m});return At(this,{_chunkSteps:d=>n({value:d,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:d=>a(d)}),l}releaseLock(){if(!ke(this))throw rr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");we(this)}}}Object.defineProperties(Pt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Pt.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function ke(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Pt}function At(e,n){let a=e._ownerReadableStream;a._disturbed=!0,a._state==="closed"?n._closeSteps():a._state==="errored"?n._errorSteps(a._storedError):a._readableStreamController[dn](n)}function rr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let vo=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class ko{constructor(n,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=a}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?L(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let a=()=>this._returnSteps(n);return this._ongoingPromise?L(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return g(et("iterate"));let a,l,f=R((m,_)=>{a=m,l=_});return At(n,{_chunkSteps:m=>{this._ongoingPromise=void 0,I(()=>a({value:m,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,we(n),a({value:void 0,done:!0})},_errorSteps:m=>{this._ongoingPromise=void 0,this._isFinished=!0,we(n),l(m)}}),f}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return g(et("finish iterating"));if(!this._preventCancel){let l=ln(a,n);return we(a),L(l,()=>({value:n,done:!0}))}return we(a),S({value:n,done:!0})}}let Io={next(){return xo(this)?this._asyncIteratorImpl.next():g(Oo("next"))},return(e){return xo(this)?this._asyncIteratorImpl.return(e):g(Oo("return"))}};vo!==void 0&&Object.setPrototypeOf(Io,vo);function wl(e,n){let a=tt(e),l=new ko(a,n),f=Object.create(Io);return f._asyncIteratorImpl=l,f}function xo(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof ko}catch{return!1}}function Oo(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Bo=Number.isNaN||function(e){return e!==e};function vt(e){return e.slice()}function qo(e,n,a,l,f){new Uint8Array(e).set(new Uint8Array(a,l,f),n)}function Sd(e){return e}function nr(e){return!1}function Do(e,n,a){if(e.slice)return e.slice(n,a);let l=a-n,f=new ArrayBuffer(l);return qo(f,0,e,n,l),f}function Rl(e){return!(typeof e!="number"||Bo(e)||e<0)}function Lo(e){let n=Do(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function yn(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function gn(e,n,a){if(!Rl(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:a}),e._queueTotalSize+=a}function Tl(e){return e._queue.peek().value}function Ie(e){e._queue=new X,e._queueTotalSize=0}class kt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Sn(this))throw Tn("view");return this._view}respond(n){if(!Sn(this))throw Tn("respond");if(Te(n,1,"respond"),n=Co(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");nr(this._view.buffer),lr(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!Sn(this))throw Tn("respondWithNewView");if(Te(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");nr(n.buffer),ur(this._associatedReadableByteStreamController,n)}}Object.defineProperties(kt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(kt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class rt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!ze(this))throw xt("byobRequest");return Rn(this)}get desiredSize(){if(!ze(this))throw xt("desiredSize");return No(this)}close(){if(!ze(this))throw xt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);It(this)}enqueue(n){if(!ze(this))throw xt("enqueue");if(Te(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);sr(this,n)}error(n=void 0){if(!ze(this))throw xt("error");ce(this,n)}[fn](n){Wo(this),Ie(this);let a=this._cancelAlgorithm(n);return ar(this),a}[dn](n){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let f=this._queue.shift();this._queueTotalSize-=f.byteLength,Mo(this);let d=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);n._chunkSteps(d);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let f;try{f=new ArrayBuffer(l)}catch(m){n._errorSteps(m);return}let d={buffer:f,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(d)}Po(a,n),Me(this)}}Object.defineProperties(rt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(rt.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function ze(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof rt}function Sn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof kt}function Me(e){if(!Al(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();C(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Me(e))},l=>{ce(e,l)})}function Wo(e){wn(e),e._pendingPullIntos=new X}function _n(e,n){let a=!1;e._state==="closed"&&(a=!0);let l=Fo(n);n.readerType==="default"?bn(e,l,a):Il(e,l,a)}function Fo(e){let n=e.bytesFilled,a=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/a)}function or(e,n,a,l){e._queue.push({buffer:n,byteOffset:a,byteLength:l}),e._queueTotalSize+=l}function $o(e,n){let a=n.elementSize,l=n.bytesFilled-n.bytesFilled%a,f=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),d=n.bytesFilled+f,m=d-d%a,_=f,E=!1;m>l&&(_=m-n.bytesFilled,E=!0);let x=e._queue;for(;_>0;){let q=x.peek(),D=Math.min(_,q.byteLength),U=n.byteOffset+n.bytesFilled;qo(n.buffer,U,q.buffer,q.byteOffset,D),q.byteLength===D?x.shift():(q.byteOffset+=D,q.byteLength-=D),e._queueTotalSize-=D,zo(e,D,n),_-=D}return E}function zo(e,n,a){a.bytesFilled+=n}function Mo(e){e._queueTotalSize===0&&e._closeRequested?(ar(e),$t(e._controlledReadableByteStream)):Me(e)}function wn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Uo(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();$o(e,n)&&(ir(e),_n(e._controlledReadableByteStream,n))}}function El(e,n,a){let l=e._controlledReadableByteStream,f=1;n.constructor!==DataView&&(f=n.constructor.BYTES_PER_ELEMENT);let d=n.constructor,m=n.buffer,_={buffer:m,bufferByteLength:m.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:f,viewConstructor:d,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(_),Vo(l,a);return}if(l._state==="closed"){let E=new d(_.buffer,_.byteOffset,0);a._closeSteps(E);return}if(e._queueTotalSize>0){if($o(e,_)){let E=Fo(_);Mo(e),a._chunkSteps(E);return}if(e._closeRequested){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");ce(e,E),a._errorSteps(E);return}}e._pendingPullIntos.push(_),Vo(l,a),Me(e)}function Cl(e,n){let a=e._controlledReadableByteStream;if(En(a))for(;Yo(a)>0;){let l=ir(e);_n(a,l)}}function Pl(e,n,a){if(zo(e,n,a),a.bytesFilled<a.elementSize)return;ir(e);let l=a.bytesFilled%a.elementSize;if(l>0){let f=a.byteOffset+a.bytesFilled,d=Do(a.buffer,f-l,f);or(e,d,0,d.byteLength)}a.bytesFilled-=l,_n(e._controlledReadableByteStream,a),Uo(e)}function jo(e,n){let a=e._pendingPullIntos.peek();wn(e),e._controlledReadableByteStream._state==="closed"?Cl(e):Pl(e,n,a),Me(e)}function ir(e){return e._pendingPullIntos.shift()}function Al(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(Ao(n)&&tr(n)>0||En(n)&&Yo(n)>0||No(e)>0)}function ar(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function It(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ce(e,l),l}ar(e),$t(n)}}function sr(e,n){let a=e._controlledReadableByteStream;if(e._closeRequested||a._state!=="readable")return;let l=n.buffer,f=n.byteOffset,d=n.byteLength,m=l;if(e._pendingPullIntos.length>0){let _=e._pendingPullIntos.peek();nr(_.buffer),_.buffer=_.buffer}if(wn(e),Ao(a))if(tr(a)===0)or(e,m,f,d);else{e._pendingPullIntos.length>0&&ir(e);let _=new Uint8Array(m,f,d);bn(a,_,!1)}else En(a)?(or(e,m,f,d),Uo(e)):or(e,m,f,d);Me(e)}function ce(e,n){let a=e._controlledReadableByteStream;a._state==="readable"&&(Wo(e),Ie(e),ar(e),gi(a,n))}function Rn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),a=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),l=Object.create(kt.prototype);kl(l,e,a),e._byobRequest=l}return e._byobRequest}function No(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function lr(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+n>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,jo(e,n)}function ur(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+n.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let f=n.byteLength;a.buffer=n.buffer,jo(e,f)}function Ho(e,n,a,l,f,d,m){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,Ie(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=d,n._pullAlgorithm=l,n._cancelAlgorithm=f,n._autoAllocateChunkSize=m,n._pendingPullIntos=new X,e._readableStreamController=n;let _=a();C(S(_),()=>{n._started=!0,Me(n)},E=>{ce(n,E)})}function vl(e,n,a){let l=Object.create(rt.prototype),f=()=>{},d=()=>S(void 0),m=()=>S(void 0);n.start!==void 0&&(f=()=>n.start(l)),n.pull!==void 0&&(d=()=>n.pull(l)),n.cancel!==void 0&&(m=E=>n.cancel(E));let _=n.autoAllocateChunkSize;if(_===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Ho(e,l,f,d,m,a,_)}function kl(e,n,a){e._associatedReadableByteStreamController=n,e._view=a}function Tn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function xt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Go(e){return new Ot(e)}function Vo(e,n){e._reader._readIntoRequests.push(n)}function Il(e,n,a){let f=e._reader._readIntoRequests.shift();a?f._closeSteps(n):f._chunkSteps(n)}function Yo(e){return e._reader._readIntoRequests.length}function En(e){let n=e._reader;return!(n===void 0||!Ue(n))}class Ot{constructor(n){if(Te(n,1,"ReadableStreamBYOBReader"),mn(n,"First parameter"),qe(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!ze(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");yo(this,n),this._readIntoRequests=new X}get closed(){return Ue(this)?this._closedPromise:g(cr("closed"))}cancel(n=void 0){return Ue(this)?this._ownerReadableStream===void 0?g(et("cancel")):ln(this,n):g(cr("cancel"))}read(n){if(!Ue(this))return g(cr("read"));if(!ArrayBuffer.isView(n))return g(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return g(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return g(new TypeError("view's buffer must have non-zero byteLength"));if(nr(n.buffer),this._ownerReadableStream===void 0)return g(et("read from"));let a,l,f=R((m,_)=>{a=m,l=_});return Qo(this,n,{_chunkSteps:m=>a({value:m,done:!1}),_closeSteps:m=>a({value:m,done:!0}),_errorSteps:m=>l(m)}),f}releaseLock(){if(!Ue(this))throw cr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");we(this)}}}Object.defineProperties(Ot.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ot.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Ue(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Ot}function Qo(e,n,a){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?a._errorSteps(l._storedError):El(l._readableStreamController,n,a)}function cr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Bt(e,n){let{highWaterMark:a}=e;if(a===void 0)return n;if(Bo(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function fr(e){let{size:n}=e;return n||(()=>1)}function dr(e,n){Re(e,n);let a=e?.highWaterMark,l=e?.size;return{highWaterMark:a===void 0?void 0:pn(a),size:l===void 0?void 0:xl(l,`${n} has member 'size' that`)}}function xl(e,n){return ue(e,n),a=>pn(e(a))}function Ol(e,n){Re(e,n);let a=e?.abort,l=e?.close,f=e?.start,d=e?.type,m=e?.write;return{abort:a===void 0?void 0:Bl(a,e,`${n} has member 'abort' that`),close:l===void 0?void 0:ql(l,e,`${n} has member 'close' that`),start:f===void 0?void 0:Dl(f,e,`${n} has member 'start' that`),write:m===void 0?void 0:Ll(m,e,`${n} has member 'write' that`),type:d}}function Bl(e,n,a){return ue(e,a),l=>B(e,n,[l])}function ql(e,n,a){return ue(e,a),()=>B(e,n,[])}function Dl(e,n,a){return ue(e,a),l=>M(e,n,[l])}function Ll(e,n,a){return ue(e,a),(l,f)=>B(e,n,[l,f])}function Xo(e,n){if(!nt(e))throw new TypeError(`${n} is not a WritableStream.`)}function Wl(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Fl=typeof AbortController=="function";function $l(){if(Fl)return new AbortController}class qt{constructor(n={},a={}){n===void 0?n=null:To(n,"First parameter");let l=dr(a,"Second parameter"),f=Ol(n,"First parameter");if(Zo(this),f.type!==void 0)throw new RangeError("Invalid type is specified");let m=fr(l),_=Bt(l,1);Jl(this,f,_,m)}get locked(){if(!nt(this))throw yr("locked");return ot(this)}abort(n=void 0){return nt(this)?ot(this)?g(new TypeError("Cannot abort a stream that already has a writer")):hr(this,n):g(yr("abort"))}close(){return nt(this)?ot(this)?g(new TypeError("Cannot close a stream that already has a writer")):pe(this)?g(new TypeError("Cannot close an already-closing stream")):Jo(this):g(yr("close"))}getWriter(){if(!nt(this))throw yr("getWriter");return Ko(this)}}Object.defineProperties(qt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(qt.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function Ko(e){return new Dt(e)}function zl(e,n,a,l,f=1,d=()=>1){let m=Object.create(qt.prototype);Zo(m);let _=Object.create(it.prototype);return ii(m,_,e,n,a,l,f,d),m}function Zo(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new X,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function nt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof qt}function ot(e){return e._writer!==void 0}function hr(e,n){var a;if(e._state==="closed"||e._state==="errored")return S(void 0);e._writableStreamController._abortReason=n,(a=e._writableStreamController._abortController)===null||a===void 0||a.abort();let l=e._state;if(l==="closed"||l==="errored")return S(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let f=!1;l==="erroring"&&(f=!0,n=void 0);let d=R((m,_)=>{e._pendingAbortRequest={_promise:void 0,_resolve:m,_reject:_,_reason:n,_wasAlreadyErroring:f}});return e._pendingAbortRequest._promise=d,f||Pn(e,n),d}function Jo(e){let n=e._state;if(n==="closed"||n==="errored")return g(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let a=R((f,d)=>{let m={_resolve:f,_reject:d};e._closeRequest=m}),l=e._writer;return l!==void 0&&e._backpressure&&n==="writable"&&Dn(l),eu(e._writableStreamController),a}function Ml(e){return R((a,l)=>{let f={_resolve:a,_reject:l};e._writeRequests.push(f)})}function Cn(e,n){if(e._state==="writable"){Pn(e,n);return}An(e)}function Pn(e,n){let a=e._writableStreamController;e._state="erroring",e._storedError=n;let l=e._writer;l!==void 0&&ti(l,n),!Gl(e)&&a._started&&An(e)}function An(e){e._state="errored",e._writableStreamController[wo]();let n=e._storedError;if(e._writeRequests.forEach(f=>{f._reject(n)}),e._writeRequests=new X,e._pendingAbortRequest===void 0){pr(e);return}let a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(n),pr(e);return}let l=e._writableStreamController[_o](a._reason);C(l,()=>{a._resolve(),pr(e)},f=>{a._reject(f),pr(e)})}function Ul(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function jl(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,Cn(e,n)}function Nl(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let a=e._writer;a!==void 0&&ui(a)}function Hl(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),Cn(e,n)}function pe(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Gl(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Vl(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Yl(e){e._inFlightWriteRequest=e._writeRequests.shift()}function pr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&Bn(n,e._storedError)}function vn(e,n){let a=e._writer;a!==void 0&&n!==e._backpressure&&(n?su(a):Dn(a)),e._backpressure=n}class Dt{constructor(n){if(Te(n,1,"WritableStreamDefaultWriter"),Xo(n,"First parameter"),ot(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let a=n._state;if(a==="writable")!pe(n)&&n._backpressure?Sr(this):ci(this),gr(this);else if(a==="erroring")qn(this,n._storedError),gr(this);else if(a==="closed")ci(this),iu(this);else{let l=n._storedError;qn(this,l),li(this,l)}}get closed(){return je(this)?this._closedPromise:g(Ne("closed"))}get desiredSize(){if(!je(this))throw Ne("desiredSize");if(this._ownerWritableStream===void 0)throw Lt("desiredSize");return Zl(this)}get ready(){return je(this)?this._readyPromise:g(Ne("ready"))}abort(n=void 0){return je(this)?this._ownerWritableStream===void 0?g(Lt("abort")):Ql(this,n):g(Ne("abort"))}close(){if(!je(this))return g(Ne("close"));let n=this._ownerWritableStream;return n===void 0?g(Lt("close")):pe(n)?g(new TypeError("Cannot close an already-closing stream")):ei(this)}releaseLock(){if(!je(this))throw Ne("releaseLock");this._ownerWritableStream!==void 0&&ri(this)}write(n=void 0){return je(this)?this._ownerWritableStream===void 0?g(Lt("write to")):ni(this,n):g(Ne("write"))}}Object.defineProperties(Dt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Dt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function je(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Dt}function Ql(e,n){let a=e._ownerWritableStream;return hr(a,n)}function ei(e){let n=e._ownerWritableStream;return Jo(n)}function Xl(e){let n=e._ownerWritableStream,a=n._state;return pe(n)||a==="closed"?S(void 0):a==="errored"?g(n._storedError):ei(e)}function Kl(e,n){e._closedPromiseState==="pending"?Bn(e,n):au(e,n)}function ti(e,n){e._readyPromiseState==="pending"?fi(e,n):lu(e,n)}function Zl(e){let n=e._ownerWritableStream,a=n._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:ai(n._writableStreamController)}function ri(e){let n=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ti(e,a),Kl(e,a),n._writer=void 0,e._ownerWritableStream=void 0}function ni(e,n){let a=e._ownerWritableStream,l=a._writableStreamController,f=tu(l,n);if(a!==e._ownerWritableStream)return g(Lt("write to"));let d=a._state;if(d==="errored")return g(a._storedError);if(pe(a)||d==="closed")return g(new TypeError("The stream is closing or closed and cannot be written to"));if(d==="erroring")return g(a._storedError);let m=Ml(a);return ru(l,n,f),m}let oi={};class it{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!kn(this))throw On("abortReason");return this._abortReason}get signal(){if(!kn(this))throw On("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!kn(this))throw On("error");this._controlledWritableStream._state==="writable"&&si(this,n)}[_o](n){let a=this._abortAlgorithm(n);return mr(this),a}[wo](){Ie(this)}}Object.defineProperties(it.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(it.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function kn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof it}function ii(e,n,a,l,f,d,m,_){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,Ie(n),n._abortReason=void 0,n._abortController=$l(),n._started=!1,n._strategySizeAlgorithm=_,n._strategyHWM=m,n._writeAlgorithm=l,n._closeAlgorithm=f,n._abortAlgorithm=d;let E=xn(n);vn(e,E);let x=a(),q=S(x);C(q,()=>{n._started=!0,br(n)},D=>{n._started=!0,Cn(e,D)})}function Jl(e,n,a,l){let f=Object.create(it.prototype),d=()=>{},m=()=>S(void 0),_=()=>S(void 0),E=()=>S(void 0);n.start!==void 0&&(d=()=>n.start(f)),n.write!==void 0&&(m=x=>n.write(x,f)),n.close!==void 0&&(_=()=>n.close()),n.abort!==void 0&&(E=x=>n.abort(x)),ii(e,f,d,m,_,E,a,l)}function mr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function eu(e){gn(e,oi,0),br(e)}function tu(e,n){try{return e._strategySizeAlgorithm(n)}catch(a){return In(e,a),1}}function ai(e){return e._strategyHWM-e._queueTotalSize}function ru(e,n,a){try{gn(e,n,a)}catch(f){In(e,f);return}let l=e._controlledWritableStream;if(!pe(l)&&l._state==="writable"){let f=xn(e);vn(l,f)}br(e)}function br(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){An(n);return}if(e._queue.length===0)return;let l=Tl(e);l===oi?nu(e):ou(e,l)}function In(e,n){e._controlledWritableStream._state==="writable"&&si(e,n)}function nu(e){let n=e._controlledWritableStream;Vl(n),yn(e);let a=e._closeAlgorithm();mr(e),C(a,()=>{Nl(n)},l=>{Hl(n,l)})}function ou(e,n){let a=e._controlledWritableStream;Yl(a);let l=e._writeAlgorithm(n);C(l,()=>{Ul(a);let f=a._state;if(yn(e),!pe(a)&&f==="writable"){let d=xn(e);vn(a,d)}br(e)},f=>{a._state==="writable"&&mr(e),jl(a,f)})}function xn(e){return ai(e)<=0}function si(e,n){let a=e._controlledWritableStream;mr(e),Pn(a,n)}function yr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function On(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Ne(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Lt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function gr(e){e._closedPromise=R((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a,e._closedPromiseState="pending"})}function li(e,n){gr(e),Bn(e,n)}function iu(e){gr(e),ui(e)}function Bn(e,n){e._closedPromise_reject!==void 0&&(H(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function au(e,n){li(e,n)}function ui(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Sr(e){e._readyPromise=R((n,a)=>{e._readyPromise_resolve=n,e._readyPromise_reject=a}),e._readyPromiseState="pending"}function qn(e,n){Sr(e),fi(e,n)}function ci(e){Sr(e),Dn(e)}function fi(e,n){e._readyPromise_reject!==void 0&&(H(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function su(e){Sr(e)}function lu(e,n){qn(e,n)}function Dn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let di=typeof DOMException<"u"?DOMException:void 0;function uu(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function cu(){let e=function(a,l){this.message=a||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let fu=uu(di)?di:cu();function hi(e,n,a,l,f,d){let m=tt(e),_=Ko(n);e._disturbed=!0;let E=!1,x=S(void 0);return R((q,D)=>{let U;if(d!==void 0){if(U=()=>{let T=new fu("Aborted","AbortError"),k=[];l||k.push(()=>n._state==="writable"?hr(n,T):S(void 0)),f||k.push(()=>e._state==="readable"?fe(e,T):S(void 0)),V(()=>Promise.all(k.map(W=>W())),!0,T)},d.aborted){U();return}d.addEventListener("abort",U)}function de(){return R((T,k)=>{function W(K){K?T():y(lt(),W,k)}W(!1)})}function lt(){return E?S(!0):y(_._readyPromise,()=>R((T,k)=>{At(m,{_chunkSteps:W=>{x=y(ni(_,W),void 0,o),T(!1)},_closeSteps:()=>T(!0),_errorSteps:k})}))}if(Ee(e,m._closedPromise,T=>{l?re(!0,T):V(()=>hr(n,T),!0,T)}),Ee(n,_._closedPromise,T=>{f?re(!0,T):V(()=>fe(e,T),!0,T)}),G(e,m._closedPromise,()=>{a?re():V(()=>Xl(_))}),pe(n)||n._state==="closed"){let T=new TypeError("the destination writable stream closed before all data could be piped to it");f?re(!0,T):V(()=>fe(e,T),!0,T)}H(de());function De(){let T=x;return y(x,()=>T!==x?De():void 0)}function Ee(T,k,W){T._state==="errored"?W(T._storedError):v(k,W)}function G(T,k,W){T._state==="closed"?W():P(k,W)}function V(T,k,W){if(E)return;E=!0,n._state==="writable"&&!pe(n)?P(De(),K):K();function K(){C(T(),()=>Ce(k,W),ut=>Ce(!0,ut))}}function re(T,k){E||(E=!0,n._state==="writable"&&!pe(n)?P(De(),()=>Ce(T,k)):Ce(T,k))}function Ce(T,k){ri(_),we(m),d!==void 0&&d.removeEventListener("abort",U),T?D(k):q(void 0)}})}class at{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!_r(this))throw Tr("desiredSize");return Ln(this)}close(){if(!_r(this))throw Tr("close");if(!st(this))throw new TypeError("The stream is not in a state that permits close");Ft(this)}enqueue(n=void 0){if(!_r(this))throw Tr("enqueue");if(!st(this))throw new TypeError("The stream is not in a state that permits enqueue");return Rr(this,n)}error(n=void 0){if(!_r(this))throw Tr("error");xe(this,n)}[fn](n){Ie(this);let a=this._cancelAlgorithm(n);return wr(this),a}[dn](n){let a=this._controlledReadableStream;if(this._queue.length>0){let l=yn(this);this._closeRequested&&this._queue.length===0?(wr(this),$t(a)):Wt(this),n._chunkSteps(l)}else Po(a,n),Wt(this)}}Object.defineProperties(at.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(at.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function _r(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof at}function Wt(e){if(!pi(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();C(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Wt(e))},l=>{xe(e,l)})}function pi(e){let n=e._controlledReadableStream;return!st(e)||!e._started?!1:!!(qe(n)&&tr(n)>0||Ln(e)>0)}function wr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ft(e){if(!st(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(wr(e),$t(n))}function Rr(e,n){if(!st(e))return;let a=e._controlledReadableStream;if(qe(a)&&tr(a)>0)bn(a,n,!1);else{let l;try{l=e._strategySizeAlgorithm(n)}catch(f){throw xe(e,f),f}try{gn(e,n,l)}catch(f){throw xe(e,f),f}}Wt(e)}function xe(e,n){let a=e._controlledReadableStream;a._state==="readable"&&(Ie(e),wr(e),gi(a,n))}function Ln(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function du(e){return!pi(e)}function st(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function mi(e,n,a,l,f,d,m){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,Ie(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=m,n._strategyHWM=d,n._pullAlgorithm=l,n._cancelAlgorithm=f,e._readableStreamController=n;let _=a();C(S(_),()=>{n._started=!0,Wt(n)},E=>{xe(n,E)})}function hu(e,n,a,l){let f=Object.create(at.prototype),d=()=>{},m=()=>S(void 0),_=()=>S(void 0);n.start!==void 0&&(d=()=>n.start(f)),n.pull!==void 0&&(m=()=>n.pull(f)),n.cancel!==void 0&&(_=E=>n.cancel(E)),mi(e,f,d,m,_,a,l)}function Tr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function pu(e,n){return ze(e._readableStreamController)?bu(e):mu(e)}function mu(e,n){let a=tt(e),l=!1,f=!1,d=!1,m=!1,_,E,x,q,D,U=R(G=>{D=G});function de(){return l?(f=!0,S(void 0)):(l=!0,At(a,{_chunkSteps:V=>{I(()=>{f=!1;let re=V,Ce=V;d||Rr(x._readableStreamController,re),m||Rr(q._readableStreamController,Ce),l=!1,f&&de()})},_closeSteps:()=>{l=!1,d||Ft(x._readableStreamController),m||Ft(q._readableStreamController),(!d||!m)&&D(void 0)},_errorSteps:()=>{l=!1}}),S(void 0))}function lt(G){if(d=!0,_=G,m){let V=vt([_,E]),re=fe(e,V);D(re)}return U}function De(G){if(m=!0,E=G,d){let V=vt([_,E]),re=fe(e,V);D(re)}return U}function Ee(){}return x=Wn(Ee,de,lt),q=Wn(Ee,de,De),v(a._closedPromise,G=>{xe(x._readableStreamController,G),xe(q._readableStreamController,G),(!d||!m)&&D(void 0)}),[x,q]}function bu(e){let n=tt(e),a=!1,l=!1,f=!1,d=!1,m=!1,_,E,x,q,D,U=R(T=>{D=T});function de(T){v(T._closedPromise,k=>{T===n&&(ce(x._readableStreamController,k),ce(q._readableStreamController,k),(!d||!m)&&D(void 0))})}function lt(){Ue(n)&&(we(n),n=tt(e),de(n)),At(n,{_chunkSteps:k=>{I(()=>{l=!1,f=!1;let W=k,K=k;if(!d&&!m)try{K=Lo(k)}catch(ut){ce(x._readableStreamController,ut),ce(q._readableStreamController,ut),D(fe(e,ut));return}d||sr(x._readableStreamController,W),m||sr(q._readableStreamController,K),a=!1,l?Ee():f&&G()})},_closeSteps:()=>{a=!1,d||It(x._readableStreamController),m||It(q._readableStreamController),x._readableStreamController._pendingPullIntos.length>0&&lr(x._readableStreamController,0),q._readableStreamController._pendingPullIntos.length>0&&lr(q._readableStreamController,0),(!d||!m)&&D(void 0)},_errorSteps:()=>{a=!1}})}function De(T,k){ke(n)&&(we(n),n=Go(e),de(n));let W=k?q:x,K=k?x:q;Qo(n,T,{_chunkSteps:ct=>{I(()=>{l=!1,f=!1;let ft=k?m:d;if(k?d:m)ft||ur(W._readableStreamController,ct);else{let xi;try{xi=Lo(ct)}catch($n){ce(W._readableStreamController,$n),ce(K._readableStreamController,$n),D(fe(e,$n));return}ft||ur(W._readableStreamController,ct),sr(K._readableStreamController,xi)}a=!1,l?Ee():f&&G()})},_closeSteps:ct=>{a=!1;let ft=k?m:d,Or=k?d:m;ft||It(W._readableStreamController),Or||It(K._readableStreamController),ct!==void 0&&(ft||ur(W._readableStreamController,ct),!Or&&K._readableStreamController._pendingPullIntos.length>0&&lr(K._readableStreamController,0)),(!ft||!Or)&&D(void 0)},_errorSteps:()=>{a=!1}})}function Ee(){if(a)return l=!0,S(void 0);a=!0;let T=Rn(x._readableStreamController);return T===null?lt():De(T._view,!1),S(void 0)}function G(){if(a)return f=!0,S(void 0);a=!0;let T=Rn(q._readableStreamController);return T===null?lt():De(T._view,!0),S(void 0)}function V(T){if(d=!0,_=T,m){let k=vt([_,E]),W=fe(e,k);D(W)}return U}function re(T){if(m=!0,E=T,d){let k=vt([_,E]),W=fe(e,k);D(W)}return U}function Ce(){}return x=yi(Ce,Ee,V),q=yi(Ce,G,re),de(n),[x,q]}function yu(e,n){Re(e,n);let a=e,l=a?.autoAllocateChunkSize,f=a?.cancel,d=a?.pull,m=a?.start,_=a?.type;return{autoAllocateChunkSize:l===void 0?void 0:Co(l,`${n} has member 'autoAllocateChunkSize' that`),cancel:f===void 0?void 0:gu(f,a,`${n} has member 'cancel' that`),pull:d===void 0?void 0:Su(d,a,`${n} has member 'pull' that`),start:m===void 0?void 0:_u(m,a,`${n} has member 'start' that`),type:_===void 0?void 0:wu(_,`${n} has member 'type' that`)}}function gu(e,n,a){return ue(e,a),l=>B(e,n,[l])}function Su(e,n,a){return ue(e,a),l=>B(e,n,[l])}function _u(e,n,a){return ue(e,a),l=>M(e,n,[l])}function wu(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Ru(e,n){Re(e,n);let a=e?.mode;return{mode:a===void 0?void 0:Tu(a,`${n} has member 'mode' that`)}}function Tu(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Eu(e,n){return Re(e,n),{preventCancel:!!e?.preventCancel}}function bi(e,n){Re(e,n);let a=e?.preventAbort,l=e?.preventCancel,f=e?.preventClose,d=e?.signal;return d!==void 0&&Cu(d,`${n} has member 'signal' that`),{preventAbort:!!a,preventCancel:!!l,preventClose:!!f,signal:d}}function Cu(e,n){if(!Wl(e))throw new TypeError(`${n} is not an AbortSignal.`)}function Pu(e,n){Re(e,n);let a=e?.readable;hn(a,"readable","ReadableWritablePair"),mn(a,`${n} has member 'readable' that`);let l=e?.writable;return hn(l,"writable","ReadableWritablePair"),Xo(l,`${n} has member 'writable' that`),{readable:a,writable:l}}class Oe{constructor(n={},a={}){n===void 0?n=null:To(n,"First parameter");let l=dr(a,"Second parameter"),f=yu(n,"First parameter");if(Fn(this),f.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let d=Bt(l,0);vl(this,f,d)}else{let d=fr(l),m=Bt(l,1);hu(this,f,m,d)}}get locked(){if(!Be(this))throw He("locked");return qe(this)}cancel(n=void 0){return Be(this)?qe(this)?g(new TypeError("Cannot cancel a stream that already has a reader")):fe(this,n):g(He("cancel"))}getReader(n=void 0){if(!Be(this))throw He("getReader");return Ru(n,"First parameter").mode===void 0?tt(this):Go(this)}pipeThrough(n,a={}){if(!Be(this))throw He("pipeThrough");Te(n,1,"pipeThrough");let l=Pu(n,"First parameter"),f=bi(a,"Second parameter");if(qe(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(ot(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let d=hi(this,l.writable,f.preventClose,f.preventAbort,f.preventCancel,f.signal);return H(d),l.readable}pipeTo(n,a={}){if(!Be(this))return g(He("pipeTo"));if(n===void 0)return g("Parameter 1 is required in 'pipeTo'.");if(!nt(n))return g(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=bi(a,"Second parameter")}catch(f){return g(f)}return qe(this)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):ot(n)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):hi(this,n,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!Be(this))throw He("tee");let n=pu(this);return vt(n)}values(n=void 0){if(!Be(this))throw He("values");let a=Eu(n,"First parameter");return wl(this,a.preventCancel)}}Object.defineProperties(Oe.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Oe.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(Oe.prototype,t.asyncIterator,{value:Oe.prototype.values,writable:!0,configurable:!0});function Wn(e,n,a,l=1,f=()=>1){let d=Object.create(Oe.prototype);Fn(d);let m=Object.create(at.prototype);return mi(d,m,e,n,a,l,f),d}function yi(e,n,a){let l=Object.create(Oe.prototype);Fn(l);let f=Object.create(rt.prototype);return Ho(l,f,e,n,a,0,void 0),l}function Fn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Be(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Oe}function qe(e){return e._reader!==void 0}function fe(e,n){if(e._disturbed=!0,e._state==="closed")return S(void 0);if(e._state==="errored")return g(e._storedError);$t(e);let a=e._reader;a!==void 0&&Ue(a)&&(a._readIntoRequests.forEach(f=>{f._closeSteps(void 0)}),a._readIntoRequests=new X);let l=e._readableStreamController[fn](n);return L(l,o)}function $t(e){e._state="closed";let n=e._reader;n!==void 0&&(So(n),ke(n)&&(n._readRequests.forEach(a=>{a._closeSteps()}),n._readRequests=new X))}function gi(e,n){e._state="errored",e._storedError=n;let a=e._reader;a!==void 0&&(cn(a,n),ke(a)?(a._readRequests.forEach(l=>{l._errorSteps(n)}),a._readRequests=new X):(a._readIntoRequests.forEach(l=>{l._errorSteps(n)}),a._readIntoRequests=new X))}function He(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Si(e,n){Re(e,n);let a=e?.highWaterMark;return hn(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:pn(a)}}let _i=e=>e.byteLength;Object.defineProperty(_i,"name",{value:"size",configurable:!0});class Er{constructor(n){Te(n,1,"ByteLengthQueuingStrategy"),n=Si(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Ri(this))throw wi("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Ri(this))throw wi("size");return _i}}Object.defineProperties(Er.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Er.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function wi(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Ri(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Er}let Ti=()=>1;Object.defineProperty(Ti,"name",{value:"size",configurable:!0});class Cr{constructor(n){Te(n,1,"CountQueuingStrategy"),n=Si(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Ci(this))throw Ei("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Ci(this))throw Ei("size");return Ti}}Object.defineProperties(Cr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Cr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Ei(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Ci(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Cr}function Au(e,n){Re(e,n);let a=e?.flush,l=e?.readableType,f=e?.start,d=e?.transform,m=e?.writableType;return{flush:a===void 0?void 0:vu(a,e,`${n} has member 'flush' that`),readableType:l,start:f===void 0?void 0:ku(f,e,`${n} has member 'start' that`),transform:d===void 0?void 0:Iu(d,e,`${n} has member 'transform' that`),writableType:m}}function vu(e,n,a){return ue(e,a),l=>B(e,n,[l])}function ku(e,n,a){return ue(e,a),l=>M(e,n,[l])}function Iu(e,n,a){return ue(e,a),(l,f)=>B(e,n,[l,f])}class Pr{constructor(n={},a={},l={}){n===void 0&&(n=null);let f=dr(a,"Second parameter"),d=dr(l,"Third parameter"),m=Au(n,"First parameter");if(m.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(m.writableType!==void 0)throw new RangeError("Invalid writableType specified");let _=Bt(d,0),E=fr(d),x=Bt(f,1),q=fr(f),D,U=R(de=>{D=de});xu(this,U,x,q,_,E),Bu(this,m),m.start!==void 0?D(m.start(this._transformStreamController)):D(void 0)}get readable(){if(!Pi(this))throw Ii("readable");return this._readable}get writable(){if(!Pi(this))throw Ii("writable");return this._writable}}Object.defineProperties(Pr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Pr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function xu(e,n,a,l,f,d){function m(){return n}function _(U){return Lu(e,U)}function E(U){return Wu(e,U)}function x(){return Fu(e)}e._writable=zl(m,_,x,E,a,l);function q(){return $u(e)}function D(U){return vr(e,U),S(void 0)}e._readable=Wn(m,q,D,f,d),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,kr(e,!0),e._transformStreamController=void 0}function Pi(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Pr}function Ar(e,n){xe(e._readable._readableStreamController,n),vr(e,n)}function vr(e,n){Ai(e._transformStreamController),In(e._writable._writableStreamController,n),e._backpressure&&kr(e,!1)}function kr(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=R(a=>{e._backpressureChangePromise_resolve=a}),e._backpressure=n}class zt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Ir(this))throw xr("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return Ln(n)}enqueue(n=void 0){if(!Ir(this))throw xr("enqueue");vi(this,n)}error(n=void 0){if(!Ir(this))throw xr("error");qu(this,n)}terminate(){if(!Ir(this))throw xr("terminate");Du(this)}}Object.defineProperties(zt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(zt.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Ir(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof zt}function Ou(e,n,a,l){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=a,n._flushAlgorithm=l}function Bu(e,n){let a=Object.create(zt.prototype),l=d=>{try{return vi(a,d),S(void 0)}catch(m){return g(m)}},f=()=>S(void 0);n.transform!==void 0&&(l=d=>n.transform(d,a)),n.flush!==void 0&&(f=()=>n.flush(a)),Ou(e,a,l,f)}function Ai(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function vi(e,n){let a=e._controlledTransformStream,l=a._readable._readableStreamController;if(!st(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{Rr(l,n)}catch(d){throw vr(a,d),a._readable._storedError}du(l)!==a._backpressure&&kr(a,!0)}function qu(e,n){Ar(e._controlledTransformStream,n)}function ki(e,n){let a=e._transformAlgorithm(n);return L(a,void 0,l=>{throw Ar(e._controlledTransformStream,l),l})}function Du(e){let n=e._controlledTransformStream,a=n._readable._readableStreamController;Ft(a);let l=new TypeError("TransformStream terminated");vr(n,l)}function Lu(e,n){let a=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return L(l,()=>{let f=e._writable;if(f._state==="erroring")throw f._storedError;return ki(a,n)})}return ki(a,n)}function Wu(e,n){return Ar(e,n),S(void 0)}function Fu(e){let n=e._readable,a=e._transformStreamController,l=a._flushAlgorithm();return Ai(a),L(l,()=>{if(n._state==="errored")throw n._storedError;Ft(n._readableStreamController)},f=>{throw Ar(e,f),n._storedError})}function $u(e){return kr(e,!1),e._backpressureChangePromise}function xr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function Ii(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=Er,r.CountQueuingStrategy=Cr,r.ReadableByteStreamController=rt,r.ReadableStream=Oe,r.ReadableStreamBYOBReader=Ot,r.ReadableStreamBYOBRequest=kt,r.ReadableStreamDefaultController=at,r.ReadableStreamDefaultReader=Pt,r.TransformStream=Pr,r.TransformStreamDefaultController=zt,r.WritableStream=qt,r.WritableStreamDefaultController=it,r.WritableStreamDefaultWriter=Dt,Object.defineProperty(r,"__esModule",{value:!0})})});var Wi=A(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(o){throw r.emitWarning=t,o}}catch{Object.assign(globalThis,Li())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(o){let i=0,s=this;return new ReadableStream({type:"bytes",async pull(u){let h=await s.slice(i,Math.min(s.size,i+65536)).arrayBuffer();i+=h.byteLength,u.enqueue(new Uint8Array(h)),i===s.size&&u.close()}})})}catch{}});async function*zn(r,t=!0){for(let o of r)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(t){let i=o.byteOffset,s=o.byteOffset+o.byteLength;for(;i!==s;){let u=Math.min(s-i,Fi),c=o.buffer.slice(i,i+u);i+=c.byteLength,yield new Uint8Array(c)}}else yield o;else{let i=0,s=o;for(;i!==s.size;){let c=await s.slice(i,Math.min(s.size,i+Fi)).arrayBuffer();i+=c.byteLength,yield new Uint8Array(c)}}}var Ed,Fi,$i,Vu,Pe,Ut=Mt(()=>{Ed=me(Wi(),1);Fi=65536;$i=class Mn{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],o={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let i=new TextEncoder;for(let u of t){let c;ArrayBuffer.isView(u)?c=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?c=new Uint8Array(u.slice(0)):u instanceof Mn?c=u:c=i.encode(`${u}`),this.#r+=ArrayBuffer.isView(c)?c.byteLength:c.size,this.#e.push(c)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let s=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,o="";for await(let i of zn(this.#e,!1))o+=t.decode(i,{stream:!0});return o+=t.decode(),o}async arrayBuffer(){let t=new Uint8Array(this.size),o=0;for await(let i of zn(this.#e,!1))t.set(i,o),o+=i.length;return t.buffer}stream(){let t=zn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let i=await t.next();i.done?o.close():o.enqueue(i.value)},async cancel(){await t.return()}})}slice(t=0,o=this.size,i=""){let{size:s}=this,u=t<0?Math.max(s+t,0):Math.min(t,s),c=o<0?Math.max(s+o,0):Math.min(o,s),h=Math.max(c-u,0),p=this.#e,b=[],w=0;for(let S of p){if(w>=h)break;let g=ArrayBuffer.isView(S)?S.byteLength:S.size;if(u&&g<=u)u-=g,c-=g;else{let y;ArrayBuffer.isView(S)?(y=S.subarray(u,Math.min(g,c)),w+=y.byteLength):(y=S.slice(u,Math.min(g,c)),w+=y.size),c-=g,b.push(y),u=0}}let R=new Mn([],{type:String(i).toLowerCase()});return R.#r=h,R.#e=b,R}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties($i.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Vu=$i,Pe=Vu});var Yu,Qu,dt,Un=Mt(()=>{Ut();Yu=class extends Pe{#e=0;#t="";constructor(t,o,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,i),i===null&&(i={});let s=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof Pe&&/^(File)$/.test(t[Symbol.toStringTag])}},Qu=Yu,dt=Qu});function Ui(r,t=Pe){var o=`${zi()}${zi()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],s=`--${o}\r
Content-Disposition: form-data; name="`;return r.forEach((u,c)=>typeof u=="string"?i.push(s+jn(c)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(s+jn(c)+`"; filename="${jn(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),i.push(`--${o}--`),new t(i,{type:"multipart/form-data; boundary="+o})}var jt,Xu,Ku,zi,Zu,Mi,jn,Ge,Ve,Dr=Mt(()=>{Ut();Un();({toStringTag:jt,iterator:Xu,hasInstance:Ku}=Symbol),zi=Math.random,Zu="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Mi=(r,t,o)=>(r+="",/^(Blob|File)$/.test(t&&t[jt])?[(o=o!==void 0?o+"":t[jt]=="File"?t.name:"blob",r),t.name!==o||t[jt]=="blob"?new dt([t],o,t):t]:[r,t+""]),jn=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Ge=(r,t,o)=>{if(t.length<o)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${o} arguments required, but only ${t.length} present.`)},Ve=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[jt](){return"FormData"}[Xu](){return this.entries()}static[Ku](t){return t&&typeof t=="object"&&t[jt]==="FormData"&&!Zu.some(o=>typeof t[o]!="function")}append(...t){Ge("append",arguments,2),this.#e.push(Mi(...t))}delete(t){Ge("delete",arguments,1),t+="",this.#e=this.#e.filter(([o])=>o!==t)}get(t){Ge("get",arguments,1),t+="";for(var o=this.#e,i=o.length,s=0;s<i;s++)if(o[s][0]===t)return o[s][1];return null}getAll(t,o){return Ge("getAll",arguments,1),o=[],t+="",this.#e.forEach(i=>i[0]===t&&o.push(i[1])),o}has(t){return Ge("has",arguments,1),t+="",this.#e.some(o=>o[0]===t)}forEach(t,o){Ge("forEach",arguments,1);for(var[i,s]of this)t.call(o,s,i,this)}set(...t){Ge("set",arguments,2);var o=[],i=!0;t=Mi(...t),this.#e.forEach(s=>{s[0]===t[0]?i&&(i=!o.push(t)):o.push(s)}),i&&o.push(t),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var Gi=A((Wd,Hi)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}Hi.exports=globalThis.DOMException});var Wr,Ju,zd,Hn=Mt(()=>{Wr=require("node:fs"),Ju=me(Gi(),1);Un();Ut();({stat:zd}=Wr.promises)});var Yi={};Oi(Yi,{toFormData:()=>ac});function ic(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let o=t[2]||t[3]||"",i=o.slice(o.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(s,u)=>String.fromCharCode(u)),i}async function ac(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let o=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new Gn(o[1]||o[2]),s,u,c,h,p,b,w=[],R=new Ve,S=v=>{c+=P.decode(v,{stream:!0})},g=v=>{w.push(v)},y=()=>{let v=new dt(w,b,{type:p});R.append(h,v)},C=()=>{R.append(h,c)},P=new TextDecoder("utf-8");P.decode(),i.onPartBegin=function(){i.onPartData=S,i.onPartEnd=C,s="",u="",c="",h="",p="",b=null,w.length=0},i.onHeaderField=function(v){s+=P.decode(v,{stream:!0})},i.onHeaderValue=function(v){u+=P.decode(v,{stream:!0})},i.onHeaderEnd=function(){if(u+=P.decode(),s=s.toLowerCase(),s==="content-disposition"){let v=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);v&&(h=v[2]||v[3]||""),b=ic(u),b&&(i.onPartData=g,i.onPartEnd=y)}else s==="content-type"&&(p=u);u="",s=""};for await(let v of r)i.write(v);return i.end(),R}var be,F,Vi,Le,Fr,$r,ec,Ht,tc,rc,nc,oc,Ye,Gn,Qi=Mt(()=>{Hn();Dr();be=0,F={START_BOUNDARY:be++,HEADER_FIELD_START:be++,HEADER_FIELD:be++,HEADER_VALUE_START:be++,HEADER_VALUE:be++,HEADER_VALUE_ALMOST_DONE:be++,HEADERS_ALMOST_DONE:be++,PART_DATA_START:be++,PART_DATA:be++,END:be++},Vi=1,Le={PART_BOUNDARY:Vi,LAST_BOUNDARY:Vi*=2},Fr=10,$r=13,ec=32,Ht=45,tc=58,rc=97,nc=122,oc=r=>r|32,Ye=()=>{},Gn=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=Ye,this.onHeaderField=Ye,this.onHeadersEnd=Ye,this.onHeaderValue=Ye,this.onPartBegin=Ye,this.onPartData=Ye,this.onPartEnd=Ye,this.boundaryChars={},t=`\r
--`+t;let o=new Uint8Array(t.length);for(let i=0;i<t.length;i++)o[i]=t.charCodeAt(i),this.boundaryChars[o[i]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=F.START_BOUNDARY}write(t){let o=0,i=t.length,s=this.index,{lookbehind:u,boundary:c,boundaryChars:h,index:p,state:b,flags:w}=this,R=this.boundary.length,S=R-1,g=t.length,y,C,P=I=>{this[I+"Mark"]=o},v=I=>{delete this[I+"Mark"]},L=(I,M,B,le)=>{(M===void 0||M!==B)&&this[I](le&&le.subarray(M,B))},H=(I,M)=>{let B=I+"Mark";B in this&&(M?(L(I,this[B],o,t),delete this[B]):(L(I,this[B],t.length,t),this[B]=0))};for(o=0;o<i;o++)switch(y=t[o],b){case F.START_BOUNDARY:if(p===c.length-2){if(y===Ht)w|=Le.LAST_BOUNDARY;else if(y!==$r)return;p++;break}else if(p-1===c.length-2){if(w&Le.LAST_BOUNDARY&&y===Ht)b=F.END,w=0;else if(!(w&Le.LAST_BOUNDARY)&&y===Fr)p=0,L("onPartBegin"),b=F.HEADER_FIELD_START;else return;break}y!==c[p+2]&&(p=-2),y===c[p+2]&&p++;break;case F.HEADER_FIELD_START:b=F.HEADER_FIELD,P("onHeaderField"),p=0;case F.HEADER_FIELD:if(y===$r){v("onHeaderField"),b=F.HEADERS_ALMOST_DONE;break}if(p++,y===Ht)break;if(y===tc){if(p===1)return;H("onHeaderField",!0),b=F.HEADER_VALUE_START;break}if(C=oc(y),C<rc||C>nc)return;break;case F.HEADER_VALUE_START:if(y===ec)break;P("onHeaderValue"),b=F.HEADER_VALUE;case F.HEADER_VALUE:y===$r&&(H("onHeaderValue",!0),L("onHeaderEnd"),b=F.HEADER_VALUE_ALMOST_DONE);break;case F.HEADER_VALUE_ALMOST_DONE:if(y!==Fr)return;b=F.HEADER_FIELD_START;break;case F.HEADERS_ALMOST_DONE:if(y!==Fr)return;L("onHeadersEnd"),b=F.PART_DATA_START;break;case F.PART_DATA_START:b=F.PART_DATA,P("onPartData");case F.PART_DATA:if(s=p,p===0){for(o+=S;o<g&&!(t[o]in h);)o+=R;o-=S,y=t[o]}if(p<c.length)c[p]===y?(p===0&&H("onPartData",!0),p++):p=0;else if(p===c.length)p++,y===$r?w|=Le.PART_BOUNDARY:y===Ht?w|=Le.LAST_BOUNDARY:p=0;else if(p-1===c.length)if(w&Le.PART_BOUNDARY){if(p=0,y===Fr){w&=~Le.PART_BOUNDARY,L("onPartEnd"),L("onPartBegin"),b=F.HEADER_FIELD_START;break}}else w&Le.LAST_BOUNDARY&&y===Ht?(L("onPartEnd"),b=F.END,w=0):p=0;if(p>0)u[p-1]=y;else if(s>0){let I=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);L("onPartData",0,s,I),s=0,P("onPartData"),o--}break;case F.END:break;default:throw new Error(`Unexpected state entered: ${b}`)}H("onHeaderField"),H("onHeaderValue"),H("onPartData"),this.index=p,this.state=b,this.flags=w}end(){if(this.state===F.HEADER_FIELD_START&&this.index===0||this.state===F.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==F.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Aa=A((zh,Pa)=>{Pa.exports=Ca;Ca.sync=Sc;var Ta=require("fs");function gc(r,t){var o=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var i=0;i<o.length;i++){var s=o[i].toLowerCase();if(s&&r.substr(-s.length).toLowerCase()===s)return!0}return!1}function Ea(r,t,o){return!r.isSymbolicLink()&&!r.isFile()?!1:gc(t,o)}function Ca(r,t,o){Ta.stat(r,function(i,s){o(i,i?!1:Ea(s,r,t))})}function Sc(r,t){return Ea(Ta.statSync(r),r,t)}});var Oa=A((Mh,xa)=>{xa.exports=ka;ka.sync=_c;var va=require("fs");function ka(r,t,o){va.stat(r,function(i,s){o(i,i?!1:Ia(s,t))})}function _c(r,t){return Ia(va.statSync(r),t)}function Ia(r,t){return r.isFile()&&wc(r,t)}function wc(r,t){var o=r.mode,i=r.uid,s=r.gid,u=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),c=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),h=parseInt("100",8),p=parseInt("010",8),b=parseInt("001",8),w=h|p,R=o&b||o&p&&s===c||o&h&&i===u||o&w&&u===0;return R}});var qa=A((jh,Ba)=>{var Uh=require("fs"),Vr;process.platform==="win32"||global.TESTING_WINDOWS?Vr=Aa():Vr=Oa();Ba.exports=Qn;Qn.sync=Rc;function Qn(r,t,o){if(typeof t=="function"&&(o=t,t={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,s){Qn(r,t||{},function(u,c){u?s(u):i(c)})})}Vr(r,t||{},function(i,s){i&&(i.code==="EACCES"||t&&t.ignoreErrors)&&(i=null,s=!1),o(i,s)})}function Rc(r,t){try{return Vr.sync(r,t||{})}catch(o){if(t&&t.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var Ma=A((Nh,za)=>{var yt=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Da=require("path"),Tc=yt?";":":",La=qa(),Wa=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),Fa=(r,t)=>{let o=t.colon||Tc,i=r.match(/\//)||yt&&r.match(/\\/)?[""]:[...yt?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(o)],s=yt?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",u=yt?s.split(o):[""];return yt&&r.indexOf(".")!==-1&&u[0]!==""&&u.unshift(""),{pathEnv:i,pathExt:u,pathExtExe:s}},$a=(r,t,o)=>{typeof t=="function"&&(o=t,t={}),t||(t={});let{pathEnv:i,pathExt:s,pathExtExe:u}=Fa(r,t),c=[],h=b=>new Promise((w,R)=>{if(b===i.length)return t.all&&c.length?w(c):R(Wa(r));let S=i[b],g=/^".*"$/.test(S)?S.slice(1,-1):S,y=Da.join(g,r),C=!g&&/^\.[\\\/]/.test(r)?r.slice(0,2)+y:y;w(p(C,b,0))}),p=(b,w,R)=>new Promise((S,g)=>{if(R===s.length)return S(h(w+1));let y=s[R];La(b+y,{pathExt:u},(C,P)=>{if(!C&&P)if(t.all)c.push(b+y);else return S(b+y);return S(p(b,w,R+1))})});return o?h(0).then(b=>o(null,b),o):h(0)},Ec=(r,t)=>{t=t||{};let{pathEnv:o,pathExt:i,pathExtExe:s}=Fa(r,t),u=[];for(let c=0;c<o.length;c++){let h=o[c],p=/^".*"$/.test(h)?h.slice(1,-1):h,b=Da.join(p,r),w=!p&&/^\.[\\\/]/.test(r)?r.slice(0,2)+b:b;for(let R=0;R<i.length;R++){let S=w+i[R];try{if(La.sync(S,{pathExt:s}))if(t.all)u.push(S);else return S}catch{}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw Wa(r)};za.exports=$a;$a.sync=Ec});var Kn=A((Hh,Xn)=>{"use strict";var Ua=(r={})=>{let t=r.env||process.env;return(r.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(i=>i.toUpperCase()==="PATH")||"Path"};Xn.exports=Ua;Xn.exports.default=Ua});var Ga=A((Gh,Ha)=>{"use strict";var ja=require("path"),Cc=Ma(),Pc=Kn();function Na(r,t){let o=r.options.env||process.env,i=process.cwd(),s=r.options.cwd!=null,u=s&&process.chdir!==void 0&&!process.chdir.disabled;if(u)try{process.chdir(r.options.cwd)}catch{}let c;try{c=Cc.sync(r.command,{path:o[Pc({env:o})],pathExt:t?ja.delimiter:void 0})}catch{}finally{u&&process.chdir(i)}return c&&(c=ja.resolve(s?r.options.cwd:"",c)),c}function Ac(r){return Na(r)||Na(r,!0)}Ha.exports=Ac});var Va=A((Vh,Jn)=>{"use strict";var Zn=/([()\][%!^"`<>&|;, *?])/g;function vc(r){return r=r.replace(Zn,"^$1"),r}function kc(r,t){return r=`${r}`,r=r.replace(/(\\*)"/g,'$1$1\\"'),r=r.replace(/(\\*)$/,"$1$1"),r=`"${r}"`,r=r.replace(Zn,"^$1"),t&&(r=r.replace(Zn,"^$1")),r}Jn.exports.command=vc;Jn.exports.argument=kc});var Qa=A((Yh,Ya)=>{"use strict";Ya.exports=/^#!(.*)/});var Ka=A((Qh,Xa)=>{"use strict";var Ic=Qa();Xa.exports=(r="")=>{let t=r.match(Ic);if(!t)return null;let[o,i]=t[0].replace(/#! ?/,"").split(" "),s=o.split("/").pop();return s==="env"?i:i?`${s} ${i}`:s}});var Ja=A((Xh,Za)=>{"use strict";var eo=require("fs"),xc=Ka();function Oc(r){let o=Buffer.alloc(150),i;try{i=eo.openSync(r,"r"),eo.readSync(i,o,0,150,0),eo.closeSync(i)}catch{}return xc(o.toString())}Za.exports=Oc});var ns=A((Kh,rs)=>{"use strict";var Bc=require("path"),es=Ga(),ts=Va(),qc=Ja(),Dc=process.platform==="win32",Lc=/\.(?:com|exe)$/i,Wc=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Fc(r){r.file=es(r);let t=r.file&&qc(r.file);return t?(r.args.unshift(r.file),r.command=t,es(r)):r.file}function $c(r){if(!Dc)return r;let t=Fc(r),o=!Lc.test(t);if(r.options.forceShell||o){let i=Wc.test(t);r.command=Bc.normalize(r.command),r.command=ts.command(r.command),r.args=r.args.map(u=>ts.argument(u,i));let s=[r.command].concat(r.args).join(" ");r.args=["/d","/s","/c",`"${s}"`],r.command=process.env.comspec||"cmd.exe",r.options.windowsVerbatimArguments=!0}return r}function zc(r,t,o){t&&!Array.isArray(t)&&(o=t,t=null),t=t?t.slice(0):[],o=Object.assign({},o);let i={command:r,args:t,options:o,file:void 0,original:{command:r,args:t}};return o.shell?i:$c(i)}rs.exports=zc});var as=A((Zh,is)=>{"use strict";var to=process.platform==="win32";function ro(r,t){return Object.assign(new Error(`${t} ${r.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${r.command}`,path:r.command,spawnargs:r.args})}function Mc(r,t){if(!to)return;let o=r.emit;r.emit=function(i,s){if(i==="exit"){let u=os(s,t,"spawn");if(u)return o.call(r,"error",u)}return o.apply(r,arguments)}}function os(r,t){return to&&r===1&&!t.file?ro(t.original,"spawn"):null}function Uc(r,t){return to&&r===1&&!t.file?ro(t.original,"spawnSync"):null}is.exports={hookChildProcess:Mc,verifyENOENT:os,verifyENOENTSync:Uc,notFoundError:ro}});var us=A((Jh,gt)=>{"use strict";var ss=require("child_process"),no=ns(),oo=as();function ls(r,t,o){let i=no(r,t,o),s=ss.spawn(i.command,i.args,i.options);return oo.hookChildProcess(s,i),s}function jc(r,t,o){let i=no(r,t,o),s=ss.spawnSync(i.command,i.args,i.options);return s.error=s.error||oo.verifyENOENTSync(s.status,i),s}gt.exports=ls;gt.exports.spawn=ls;gt.exports.sync=jc;gt.exports._parse=no;gt.exports._enoent=oo});var fs=A((ep,cs)=>{"use strict";cs.exports=r=>{let t=typeof r=="string"?`
`:10,o=typeof r=="string"?"\r":13;return r[r.length-1]===t&&(r=r.slice(0,r.length-1)),r[r.length-1]===o&&(r=r.slice(0,r.length-1)),r}});var ps=A((tp,Xt)=>{"use strict";var Qt=require("path"),ds=Kn(),hs=r=>{r={cwd:process.cwd(),path:process.env[ds()],execPath:process.execPath,...r};let t,o=Qt.resolve(r.cwd),i=[];for(;t!==o;)i.push(Qt.join(o,"node_modules/.bin")),t=o,o=Qt.resolve(o,"..");let s=Qt.resolve(r.cwd,r.execPath,"..");return i.push(s),i.concat(r.path).join(Qt.delimiter)};Xt.exports=hs;Xt.exports.default=hs;Xt.exports.env=r=>{r={env:process.env,...r};let t={...r.env},o=ds({env:t});return r.path=t[o],t[o]=Xt.exports(r),t}});var bs=A((rp,io)=>{"use strict";var ms=(r,t)=>{for(let o of Reflect.ownKeys(t))Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o));return r};io.exports=ms;io.exports.default=ms});var gs=A((np,Qr)=>{"use strict";var Nc=bs(),Yr=new WeakMap,ys=(r,t={})=>{if(typeof r!="function")throw new TypeError("Expected a function");let o,i=0,s=r.displayName||r.name||"<anonymous>",u=function(...c){if(Yr.set(u,++i),i===1)o=r.apply(this,c),r=null;else if(t.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return o};return Nc(u,r),Yr.set(u,i),u};Qr.exports=ys;Qr.exports.default=ys;Qr.exports.callCount=r=>{if(!Yr.has(r))throw new Error(`The given function \`${r.name}\` is not wrapped by the \`onetime\` package`);return Yr.get(r)}});var Ss=A(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.SIGNALS=void 0;var Hc=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];Xr.SIGNALS=Hc});var ao=A(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.SIGRTMAX=St.getRealtimeSignals=void 0;var Gc=function(){let r=ws-_s+1;return Array.from({length:r},Vc)};St.getRealtimeSignals=Gc;var Vc=function(r,t){return{name:`SIGRT${t+1}`,number:_s+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},_s=34,ws=64;St.SIGRTMAX=ws});var Rs=A(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.getSignals=void 0;var Yc=require("os"),Qc=Ss(),Xc=ao(),Kc=function(){let r=(0,Xc.getRealtimeSignals)();return[...Qc.SIGNALS,...r].map(Zc)};Kr.getSignals=Kc;var Zc=function({name:r,number:t,description:o,action:i,forced:s=!1,standard:u}){let{signals:{[r]:c}}=Yc.constants,h=c!==void 0;return{name:r,number:h?c:t,description:o,supported:h,action:i,forced:s,standard:u}}});var Es=A(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.signalsByNumber=_t.signalsByName=void 0;var Jc=require("os"),Ts=Rs(),ef=ao(),tf=function(){return(0,Ts.getSignals)().reduce(rf,{})},rf=function(r,{name:t,number:o,description:i,supported:s,action:u,forced:c,standard:h}){return{...r,[t]:{name:t,number:o,description:i,supported:s,action:u,forced:c,standard:h}}},nf=tf();_t.signalsByName=nf;var of=function(){let r=(0,Ts.getSignals)(),t=ef.SIGRTMAX+1,o=Array.from({length:t},(i,s)=>af(s,r));return Object.assign({},...o)},af=function(r,t){let o=sf(r,t);if(o===void 0)return{};let{name:i,description:s,supported:u,action:c,forced:h,standard:p}=o;return{[r]:{name:i,number:r,description:s,supported:u,action:c,forced:h,standard:p}}},sf=function(r,t){let o=t.find(({name:i})=>Jc.constants.signals[i]===r);return o!==void 0?o:t.find(i=>i.number===r)},lf=of();_t.signalsByNumber=lf});var Ps=A((lp,Cs)=>{"use strict";var{signalsByName:uf}=Es(),cf=({timedOut:r,timeout:t,errorCode:o,signal:i,signalDescription:s,exitCode:u,isCanceled:c})=>r?`timed out after ${t} milliseconds`:c?"was canceled":o!==void 0?`failed with ${o}`:i!==void 0?`was killed with ${i} (${s})`:u!==void 0?`failed with exit code ${u}`:"failed",ff=({stdout:r,stderr:t,all:o,error:i,signal:s,exitCode:u,command:c,escapedCommand:h,timedOut:p,isCanceled:b,killed:w,parsed:{options:{timeout:R}}})=>{u=u===null?void 0:u,s=s===null?void 0:s;let S=s===void 0?void 0:uf[s].description,g=i&&i.code,C=`Command ${cf({timedOut:p,timeout:R,errorCode:g,signal:s,signalDescription:S,exitCode:u,isCanceled:b})}: ${c}`,P=Object.prototype.toString.call(i)==="[object Error]",v=P?`${C}
${i.message}`:C,L=[v,t,r].filter(Boolean).join(`
`);return P?(i.originalMessage=i.message,i.message=L):i=new Error(L),i.shortMessage=v,i.command=c,i.escapedCommand=h,i.exitCode=u,i.signal=s,i.signalDescription=S,i.stdout=r,i.stderr=t,o!==void 0&&(i.all=o),"bufferedData"in i&&delete i.bufferedData,i.failed=!0,i.timedOut=!!p,i.isCanceled=b,i.killed=w&&!p,i};Cs.exports=ff});var vs=A((up,so)=>{"use strict";var Zr=["stdin","stdout","stderr"],df=r=>Zr.some(t=>r[t]!==void 0),As=r=>{if(!r)return;let{stdio:t}=r;if(t===void 0)return Zr.map(i=>r[i]);if(df(r))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Zr.map(i=>`\`${i}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let o=Math.max(t.length,Zr.length);return Array.from({length:o},(i,s)=>t[s])};so.exports=As;so.exports.node=r=>{let t=As(r);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var ks=A((cp,Jr)=>{Jr.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Jr.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Jr.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var qs=A((fp,Tt)=>{var z=global.process,Ze=function(r){return r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function"};Ze(z)?(Is=require("assert"),wt=ks(),xs=/^win/i.test(z.platform),Kt=require("events"),typeof Kt!="function"&&(Kt=Kt.EventEmitter),z.__signal_exit_emitter__?N=z.__signal_exit_emitter__:(N=z.__signal_exit_emitter__=new Kt,N.count=0,N.emitted={}),N.infinite||(N.setMaxListeners(1/0),N.infinite=!0),Tt.exports=function(r,t){if(Ze(global.process)){Is.equal(typeof r,"function","a callback must be provided for exit handler"),Rt===!1&&lo();var o="exit";t&&t.alwaysLast&&(o="afterexit");var i=function(){N.removeListener(o,r),N.listeners("exit").length===0&&N.listeners("afterexit").length===0&&en()};return N.on(o,r),i}},en=function(){!Rt||!Ze(global.process)||(Rt=!1,wt.forEach(function(t){try{z.removeListener(t,tn[t])}catch{}}),z.emit=rn,z.reallyExit=uo,N.count-=1)},Tt.exports.unload=en,Je=function(t,o,i){N.emitted[t]||(N.emitted[t]=!0,N.emit(t,o,i))},tn={},wt.forEach(function(r){tn[r]=function(){if(Ze(global.process)){var o=z.listeners(r);o.length===N.count&&(en(),Je("exit",null,r),Je("afterexit",null,r),xs&&r==="SIGHUP"&&(r="SIGINT"),z.kill(z.pid,r))}}}),Tt.exports.signals=function(){return wt},Rt=!1,lo=function(){Rt||!Ze(global.process)||(Rt=!0,N.count+=1,wt=wt.filter(function(t){try{return z.on(t,tn[t]),!0}catch{return!1}}),z.emit=Bs,z.reallyExit=Os)},Tt.exports.load=lo,uo=z.reallyExit,Os=function(t){Ze(global.process)&&(z.exitCode=t||0,Je("exit",z.exitCode,null),Je("afterexit",z.exitCode,null),uo.call(z,z.exitCode))},rn=z.emit,Bs=function(t,o){if(t==="exit"&&Ze(global.process)){o!==void 0&&(z.exitCode=o);var i=rn.apply(this,arguments);return Je("exit",z.exitCode,null),Je("afterexit",z.exitCode,null),i}else return rn.apply(this,arguments)}):Tt.exports=function(){};var Is,wt,xs,Kt,N,en,Je,tn,Rt,lo,uo,Os,rn,Bs});var Ls=A((dp,Ds)=>{"use strict";var hf=require("os"),pf=qs(),mf=1e3*5,bf=(r,t="SIGTERM",o={})=>{let i=r(t);return yf(r,t,o,i),i},yf=(r,t,o,i)=>{if(!gf(t,o,i))return;let s=_f(o),u=setTimeout(()=>{r("SIGKILL")},s);u.unref&&u.unref()},gf=(r,{forceKillAfterTimeout:t},o)=>Sf(r)&&t!==!1&&o,Sf=r=>r===hf.constants.signals.SIGTERM||typeof r=="string"&&r.toUpperCase()==="SIGTERM",_f=({forceKillAfterTimeout:r=!0})=>{if(r===!0)return mf;if(!Number.isFinite(r)||r<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`);return r},wf=(r,t)=>{r.kill()&&(t.isCanceled=!0)},Rf=(r,t,o)=>{r.kill(t),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},Tf=(r,{timeout:t,killSignal:o="SIGTERM"},i)=>{if(t===0||t===void 0)return i;let s,u=new Promise((h,p)=>{s=setTimeout(()=>{Rf(r,o,p)},t)}),c=i.finally(()=>{clearTimeout(s)});return Promise.race([u,c])},Ef=({timeout:r})=>{if(r!==void 0&&(!Number.isFinite(r)||r<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`)},Cf=async(r,{cleanup:t,detached:o},i)=>{if(!t||o)return i;let s=pf(()=>{r.kill()});return i.finally(()=>{s()})};Ds.exports={spawnedKill:bf,spawnedCancel:wf,setupTimeout:Tf,validateTimeout:Ef,setExitHandler:Cf}});var Fs=A((hp,Ws)=>{"use strict";var ge=r=>r!==null&&typeof r=="object"&&typeof r.pipe=="function";ge.writable=r=>ge(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object";ge.readable=r=>ge(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object";ge.duplex=r=>ge.writable(r)&&ge.readable(r);ge.transform=r=>ge.duplex(r)&&typeof r._transform=="function";Ws.exports=ge});var zs=A((pp,$s)=>{"use strict";var{PassThrough:Pf}=require("stream");$s.exports=r=>{r={...r};let{array:t}=r,{encoding:o}=r,i=o==="buffer",s=!1;t?s=!(o||i):o=o||"utf8",i&&(o=null);let u=new Pf({objectMode:s});o&&u.setEncoding(o);let c=0,h=[];return u.on("data",p=>{h.push(p),s?c=h.length:c+=p.length}),u.getBufferedValue=()=>t?h:i?Buffer.concat(h,c):h.join(""),u.getBufferedLength=()=>c,u}});var Ms=A((mp,Zt)=>{"use strict";var{constants:Af}=require("buffer"),vf=require("stream"),{promisify:kf}=require("util"),If=zs(),xf=kf(vf.pipeline),nn=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function co(r,t){if(!r)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:o}=t,i=If(t);return await new Promise((s,u)=>{let c=h=>{h&&i.getBufferedLength()<=Af.MAX_LENGTH&&(h.bufferedData=i.getBufferedValue()),u(h)};(async()=>{try{await xf(r,i),s()}catch(h){c(h)}})(),i.on("data",()=>{i.getBufferedLength()>o&&c(new nn)})}),i.getBufferedValue()}Zt.exports=co;Zt.exports.buffer=(r,t)=>co(r,{...t,encoding:"buffer"});Zt.exports.array=(r,t)=>co(r,{...t,array:!0});Zt.exports.MaxBufferError=nn});var js=A((bp,Us)=>{"use strict";var{PassThrough:Of}=require("stream");Us.exports=function(){var r=[],t=new Of({objectMode:!0});return t.setMaxListeners(0),t.add=o,t.isEmpty=i,t.on("unpipe",s),Array.prototype.slice.call(arguments).forEach(o),t;function o(u){return Array.isArray(u)?(u.forEach(o),this):(r.push(u),u.once("end",s.bind(null,u)),u.once("error",t.emit.bind(t,"error")),u.pipe(t,{end:!1}),this)}function i(){return r.length==0}function s(u){r=r.filter(function(c){return c!==u}),!r.length&&t.readable&&t.end()}}});var Vs=A((yp,Gs)=>{"use strict";var Hs=Fs(),Ns=Ms(),Bf=js(),qf=(r,t)=>{t===void 0||r.stdin===void 0||(Hs(t)?t.pipe(r.stdin):r.stdin.end(t))},Df=(r,{all:t})=>{if(!t||!r.stdout&&!r.stderr)return;let o=Bf();return r.stdout&&o.add(r.stdout),r.stderr&&o.add(r.stderr),o},fo=async(r,t)=>{if(r){r.destroy();try{return await t}catch(o){return o.bufferedData}}},ho=(r,{encoding:t,buffer:o,maxBuffer:i})=>{if(!(!r||!o))return t?Ns(r,{encoding:t,maxBuffer:i}):Ns.buffer(r,{maxBuffer:i})},Lf=async({stdout:r,stderr:t,all:o},{encoding:i,buffer:s,maxBuffer:u},c)=>{let h=ho(r,{encoding:i,buffer:s,maxBuffer:u}),p=ho(t,{encoding:i,buffer:s,maxBuffer:u}),b=ho(o,{encoding:i,buffer:s,maxBuffer:u*2});try{return await Promise.all([c,h,p,b])}catch(w){return Promise.all([{error:w,signal:w.signal,timedOut:w.timedOut},fo(r,h),fo(t,p),fo(o,b)])}},Wf=({input:r})=>{if(Hs(r))throw new TypeError("The `input` option cannot be a stream in sync mode")};Gs.exports={handleInput:qf,makeAllStream:Df,getSpawnedResult:Lf,validateInputSync:Wf}});var Qs=A((gp,Ys)=>{"use strict";var Ff=(async()=>{})().constructor.prototype,$f=["then","catch","finally"].map(r=>[r,Reflect.getOwnPropertyDescriptor(Ff,r)]),zf=(r,t)=>{for(let[o,i]of $f){let s=typeof t=="function"?(...u)=>Reflect.apply(i.value,t(),u):i.value.bind(t);Reflect.defineProperty(r,o,{...i,value:s})}return r},Mf=r=>new Promise((t,o)=>{r.on("exit",(i,s)=>{t({exitCode:i,signal:s})}),r.on("error",i=>{o(i)}),r.stdin&&r.stdin.on("error",i=>{o(i)})});Ys.exports={mergePromise:zf,getSpawnedPromise:Mf}});var Zs=A((Sp,Ks)=>{"use strict";var Xs=(r,t=[])=>Array.isArray(t)?[r,...t]:[r],Uf=/^[\w.-]+$/,jf=/"/g,Nf=r=>typeof r!="string"||Uf.test(r)?r:`"${r.replace(jf,'\\"')}"`,Hf=(r,t)=>Xs(r,t).join(" "),Gf=(r,t)=>Xs(r,t).map(o=>Nf(o)).join(" "),Vf=/ +/g,Yf=r=>{let t=[];for(let o of r.trim().split(Vf)){let i=t[t.length-1];i&&i.endsWith("\\")?t[t.length-1]=`${i.slice(0,-1)} ${o}`:t.push(o)}return t};Ks.exports={joinCommand:Hf,getEscapedCommand:Gf,parseCommand:Yf}});var il=A((_p,Et)=>{"use strict";var Qf=require("path"),po=require("child_process"),Xf=us(),Kf=fs(),Zf=ps(),Jf=gs(),on=Ps(),el=vs(),{spawnedKill:ed,spawnedCancel:td,setupTimeout:rd,validateTimeout:nd,setExitHandler:od}=Ls(),{handleInput:id,getSpawnedResult:ad,makeAllStream:sd,validateInputSync:ld}=Vs(),{mergePromise:Js,getSpawnedPromise:ud}=Qs(),{joinCommand:tl,parseCommand:rl,getEscapedCommand:nl}=Zs(),cd=1e3*1e3*100,fd=({env:r,extendEnv:t,preferLocal:o,localDir:i,execPath:s})=>{let u=t?{...process.env,...r}:r;return o?Zf.env({env:u,cwd:i,execPath:s}):u},ol=(r,t,o={})=>{let i=Xf._parse(r,t,o);return r=i.command,t=i.args,o=i.options,o={maxBuffer:cd,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...o},o.env=fd(o),o.stdio=el(o),process.platform==="win32"&&Qf.basename(r,".exe")==="cmd"&&t.unshift("/q"),{file:r,args:t,options:o,parsed:i}},Jt=(r,t,o)=>typeof t!="string"&&!Buffer.isBuffer(t)?o===void 0?void 0:"":r.stripFinalNewline?Kf(t):t,an=(r,t,o)=>{let i=ol(r,t,o),s=tl(r,t),u=nl(r,t);nd(i.options);let c;try{c=po.spawn(i.file,i.args,i.options)}catch(g){let y=new po.ChildProcess,C=Promise.reject(on({error:g,stdout:"",stderr:"",all:"",command:s,escapedCommand:u,parsed:i,timedOut:!1,isCanceled:!1,killed:!1}));return Js(y,C)}let h=ud(c),p=rd(c,i.options,h),b=od(c,i.options,p),w={isCanceled:!1};c.kill=ed.bind(null,c.kill.bind(c)),c.cancel=td.bind(null,c,w);let S=Jf(async()=>{let[{error:g,exitCode:y,signal:C,timedOut:P},v,L,H]=await ad(c,i.options,b),I=Jt(i.options,v),M=Jt(i.options,L),B=Jt(i.options,H);if(g||y!==0||C!==null){let le=on({error:g,exitCode:y,signal:C,stdout:I,stderr:M,all:B,command:s,escapedCommand:u,parsed:i,timedOut:P,isCanceled:w.isCanceled,killed:c.killed});if(!i.options.reject)return le;throw le}return{command:s,escapedCommand:u,exitCode:0,stdout:I,stderr:M,all:B,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return id(c,i.options.input),c.all=sd(c,i.options),Js(c,S)};Et.exports=an;Et.exports.sync=(r,t,o)=>{let i=ol(r,t,o),s=tl(r,t),u=nl(r,t);ld(i.options);let c;try{c=po.spawnSync(i.file,i.args,i.options)}catch(b){throw on({error:b,stdout:"",stderr:"",all:"",command:s,escapedCommand:u,parsed:i,timedOut:!1,isCanceled:!1,killed:!1})}let h=Jt(i.options,c.stdout,c.error),p=Jt(i.options,c.stderr,c.error);if(c.error||c.status!==0||c.signal!==null){let b=on({stdout:h,stderr:p,error:c.error,signal:c.signal,exitCode:c.status,command:s,escapedCommand:u,parsed:i,timedOut:c.error&&c.error.code==="ETIMEDOUT",isCanceled:!1,killed:c.signal!==null});if(!i.options.reject)return b;throw b}return{command:s,escapedCommand:u,exitCode:0,stdout:h,stderr:p,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};Et.exports.command=(r,t)=>{let[o,...i]=rl(r);return an(o,i,t)};Et.exports.commandSync=(r,t)=>{let[o,...i]=rl(r);return an.sync(o,i,t)};Et.exports.node=(r,t,o={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(o=t,t=[]);let i=el.node(o),s=process.execArgv.filter(h=>!h.startsWith("--inspect")),{nodePath:u=process.execPath,nodeOptions:c=s}=o;return an(u,[...c,r,...Array.isArray(t)?t:[]],{...o,stdin:void 0,stdout:void 0,stderr:void 0,stdio:i,shell:!1})}});var gd={};Oi(gd,{default:()=>yd});module.exports=Hu(gd);var pl=require("react"),_e=require("@raycast/api");var ae=require("@raycast/api"),pa=require("path"),ma=require("os");var Hr=require("@raycast/api");var ca=me(require("node:http"),1),fa=me(require("node:https"),1),Xe=me(require("node:zlib"),1),J=me(require("node:stream"),1),Vt=require("node:buffer");function Gu(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let o=r.substring(5,t).split(";"),i="",s=!1,u=o[0]||"text/plain",c=u;for(let w=1;w<o.length;w++)o[w]==="base64"?s=!0:(c+=`;${o[w]}`,o[w].indexOf("charset=")===0&&(i=o[w].substring(8)));!o[0]&&!i.length&&(c+=";charset=US-ASCII",i="US-ASCII");let h=s?"base64":"ascii",p=unescape(r.substring(t+1)),b=Buffer.from(p,h);return b.type=u,b.typeFull=c,b.charset=i,b}var qi=Gu;var ne=me(require("node:stream"),1),ve=require("node:util"),Z=require("node:buffer");Ut();Dr();var Ae=class extends Error{constructor(t,o){super(t),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var Y=class extends Ae{constructor(t,o,i){super(t,o),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var Lr=Symbol.toStringTag,Nn=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[Lr]==="URLSearchParams",Nt=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[Lr]),ji=r=>typeof r=="object"&&(r[Lr]==="AbortSignal"||r[Lr]==="EventTarget"),Ni=(r,t)=>{let o=new URL(t).hostname,i=new URL(r).hostname;return o===i||o.endsWith(`.${i}`)};var sc=(0,ve.promisify)(ne.default.pipeline),Q=Symbol("Body internals"),ye=class{constructor(t,{size:o=0}={}){let i=null;t===null?t=null:Nn(t)?t=Z.Buffer.from(t.toString()):Nt(t)||Z.Buffer.isBuffer(t)||(ve.types.isAnyArrayBuffer(t)?t=Z.Buffer.from(t):ArrayBuffer.isView(t)?t=Z.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof ne.default||(t instanceof Ve?(t=Ui(t),i=t.type.split("=")[1]):t=Z.Buffer.from(String(t))));let s=t;Z.Buffer.isBuffer(t)?s=ne.default.Readable.from(t):Nt(t)&&(s=ne.default.Readable.from(t.stream())),this[Q]={body:t,stream:s,boundary:i,disturbed:!1,error:null},this.size=o,t instanceof ne.default&&t.on("error",u=>{let c=u instanceof Ae?u:new Y(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[Q].error=c})}get body(){return this[Q].stream}get bodyUsed(){return this[Q].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:o,byteLength:i}=await zr(this);return t.slice(o,o+i)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let i=new Ve,s=new URLSearchParams(await this.text());for(let[u,c]of s)i.append(u,c);return i}let{toFormData:o}=await Promise.resolve().then(()=>(Qi(),Yi));return o(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[Q].body&&this[Q].body.type||"",o=await this.arrayBuffer();return new Pe([o],{type:t})}async json(){let t=await zr(this);return JSON.parse(t.toString())}async text(){return(await zr(this)).toString()}buffer(){return zr(this)}};ye.prototype.buffer=(0,ve.deprecate)(ye.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(ye.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,ve.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function zr(r){if(r[Q].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[Q].disturbed=!0,r[Q].error)throw r[Q].error;let{body:t}=r;if(t===null)return Z.Buffer.alloc(0);if(!(t instanceof ne.default))return Z.Buffer.alloc(0);let o=[],i=0;try{for await(let s of t){if(r.size>0&&i+s.length>r.size){let u=new Y(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(u),u}i+=s.length,o.push(s)}}catch(s){throw s instanceof Ae?s:new Y(`Invalid response body while trying to fetch ${r.url}: ${s.message}`,"system",s)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return o.every(s=>typeof s=="string")?Z.Buffer.from(o.join("")):Z.Buffer.concat(o,i)}catch(s){throw new Y(`Could not create Buffer from response body for ${r.url}: ${s.message}`,"system",s)}else throw new Y(`Premature close of server response while trying to fetch ${r.url}`)}var ht=(r,t)=>{let o,i,{body:s}=r[Q];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof ne.default&&typeof s.getBoundary!="function"&&(o=new ne.PassThrough({highWaterMark:t}),i=new ne.PassThrough({highWaterMark:t}),s.pipe(o),s.pipe(i),r[Q].stream=o,s=i),s},lc=(0,ve.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Mr=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":Nn(r)?"application/x-www-form-urlencoded;charset=UTF-8":Nt(r)?r.type||null:Z.Buffer.isBuffer(r)||ve.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof Ve?`multipart/form-data; boundary=${t[Q].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${lc(r)}`:r instanceof ne.default?null:"text/plain;charset=UTF-8",Xi=r=>{let{body:t}=r[Q];return t===null?0:Nt(t)?t.size:Z.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},Ki=async(r,{body:t})=>{t===null?r.end():await sc(t,r)};var Vn=require("node:util"),Gt=me(require("node:http"),1),Ur=typeof Gt.default.validateHeaderName=="function"?Gt.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},Yn=typeof Gt.default.validateHeaderValue=="function"?Gt.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let o=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},oe=class r extends URLSearchParams{constructor(t){let o=[];if(t instanceof r){let i=t.raw();for(let[s,u]of Object.entries(i))o.push(...u.map(c=>[s,c]))}else if(t!=null)if(typeof t=="object"&&!Vn.types.isBoxedPrimitive(t)){let i=t[Symbol.iterator];if(i==null)o.push(...Object.entries(t));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");o=[...t].map(s=>{if(typeof s!="object"||Vn.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([i,s])=>(Ur(i),Yn(i,String(s)),[String(i).toLowerCase(),String(s)])):void 0,super(o),new Proxy(this,{get(i,s,u){switch(s){case"append":case"set":return(c,h)=>(Ur(c),Yn(c,String(h)),URLSearchParams.prototype[s].call(i,String(c).toLowerCase(),String(h)));case"delete":case"has":case"getAll":return c=>(Ur(c),URLSearchParams.prototype[s].call(i,String(c).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,s,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let o=this.getAll(t);if(o.length===0)return null;let i=o.join(", ");return/^content-encoding$/i.test(t)&&(i=i.toLowerCase()),i}forEach(t,o=void 0){for(let i of this.keys())Reflect.apply(t,o,[this.get(i),i,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,o)=>(t[o]=this.getAll(o),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,o)=>{let i=this.getAll(o);return o==="host"?t[o]=i[0]:t[o]=i.length>1?i:i[0],t},{})}};Object.defineProperties(oe.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function Zi(r=[]){return new oe(r.reduce((t,o,i,s)=>(i%2===0&&t.push(s.slice(i,i+2)),t),[]).filter(([t,o])=>{try{return Ur(t),Yn(t,String(o)),!0}catch{return!1}}))}var uc=new Set([301,302,303,307,308]),jr=r=>uc.has(r);var he=Symbol("Response internals"),ie=class r extends ye{constructor(t=null,o={}){super(t,o);let i=o.status!=null?o.status:200,s=new oe(o.headers);if(t!==null&&!s.has("Content-Type")){let u=Mr(t,this);u&&s.append("Content-Type",u)}this[he]={type:"default",url:o.url,status:i,statusText:o.statusText||"",headers:s,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[he].type}get url(){return this[he].url||""}get status(){return this[he].status}get ok(){return this[he].status>=200&&this[he].status<300}get redirected(){return this[he].counter>0}get statusText(){return this[he].statusText}get headers(){return this[he].headers}get highWaterMark(){return this[he].highWaterMark}clone(){return new r(ht(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,o=302){if(!jr(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new r(null,{headers:{location:new URL(t).toString()},status:o})}static error(){let t=new r(null,{status:0,statusText:""});return t[he].type="error",t}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(ie.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var sa=require("node:url"),la=require("node:util");var Ji=r=>{if(r.search)return r.search;let t=r.href.length-1,o=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-o.length]==="?"?"?":""};var ta=require("node:net");function ea(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var ra=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),na="strict-origin-when-cross-origin";function oa(r){if(!ra.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function cc(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),o=(0,ta.isIP)(t);return o===4&&/^127\./.test(t)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:/^(.+\.)*localhost$/.test(r.host)?!1:r.protocol==="file:"}function pt(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:cc(r)}function ia(r,{referrerURLCallback:t,referrerOriginCallback:o}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let i=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let s=r.referrer,u=ea(s),c=ea(s,!0);u.toString().length>4096&&(u=c),t&&(u=t(u)),o&&(c=o(c));let h=new URL(r.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return c;case"unsafe-url":return u;case"strict-origin":return pt(u)&&!pt(h)?"no-referrer":c.toString();case"strict-origin-when-cross-origin":return u.origin===h.origin?u:pt(u)&&!pt(h)?"no-referrer":c;case"same-origin":return u.origin===h.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===h.origin?u:c;case"no-referrer-when-downgrade":return pt(u)&&!pt(h)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function aa(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let i of t)i&&ra.has(i)&&(o=i);return o}var j=Symbol("Request internals"),Nr=r=>typeof r=="object"&&typeof r[j]=="object",fc=(0,la.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Qe=class r extends ye{constructor(t,o={}){let i;if(Nr(t)?i=new URL(t.url):(i=new URL(t),t={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentails.`);let s=o.method||t.method||"GET";if(s=s.toUpperCase(),"data"in o&&fc(),(o.body!=null||Nr(t)&&t.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=o.body?o.body:Nr(t)&&t.body!==null?ht(t):null;super(u,{size:o.size||t.size||0});let c=new oe(o.headers||t.headers||{});if(u!==null&&!c.has("Content-Type")){let b=Mr(u,this);b&&c.set("Content-Type",b)}let h=Nr(t)?t.signal:null;if("signal"in o&&(h=o.signal),h!=null&&!ji(h))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let p=o.referrer==null?t.referrer:o.referrer;if(p==="")p="no-referrer";else if(p){let b=new URL(p);p=/^about:(\/\/)?client$/.test(b)?"client":b}else p=void 0;this[j]={method:s,redirect:o.redirect||t.redirect||"follow",headers:c,parsedURL:i,signal:h,referrer:p},this.follow=o.follow===void 0?t.follow===void 0?20:t.follow:o.follow,this.compress=o.compress===void 0?t.compress===void 0?!0:t.compress:o.compress,this.counter=o.counter||t.counter||0,this.agent=o.agent||t.agent,this.highWaterMark=o.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||t.referrerPolicy||""}get method(){return this[j].method}get url(){return(0,sa.format)(this[j].parsedURL)}get headers(){return this[j].headers}get redirect(){return this[j].redirect}get signal(){return this[j].signal}get referrer(){if(this[j].referrer==="no-referrer")return"";if(this[j].referrer==="client")return"about:client";if(this[j].referrer)return this[j].referrer.toString()}get referrerPolicy(){return this[j].referrerPolicy}set referrerPolicy(t){this[j].referrerPolicy=oa(t)}clone(){return new r(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Qe.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var ua=r=>{let{parsedURL:t}=r[j],o=new oe(r[j].headers);o.has("Accept")||o.set("Accept","*/*");let i=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(i="0"),r.body!==null){let h=Xi(r);typeof h=="number"&&!Number.isNaN(h)&&(i=String(h))}i&&o.set("Content-Length",i),r.referrerPolicy===""&&(r.referrerPolicy=na),r.referrer&&r.referrer!=="no-referrer"?r[j].referrer=ia(r):r[j].referrer="no-referrer",r[j].referrer instanceof URL&&o.set("Referer",r.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),r.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip,deflate,br");let{agent:s}=r;typeof s=="function"&&(s=s(t)),!o.has("Connection")&&!s&&o.set("Connection","close");let u=Ji(t),c={path:t.pathname+u,method:r.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:s};return{parsedURL:t,options:c}};var mt=class extends Ae{constructor(t,o="aborted"){super(t,o)}};Dr();Hn();var dc=new Set(["data:","http:","https:"]);async function Ke(r,t){return new Promise((o,i)=>{let s=new Qe(r,t),{parsedURL:u,options:c}=ua(s);if(!dc.has(u.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let y=qi(s.url),C=new ie(y,{headers:{"Content-Type":y.typeFull}});o(C);return}let h=(u.protocol==="https:"?fa.default:ca.default).request,{signal:p}=s,b=null,w=()=>{let y=new mt("The operation was aborted.");i(y),s.body&&s.body instanceof J.default.Readable&&s.body.destroy(y),!(!b||!b.body)&&b.body.emit("error",y)};if(p&&p.aborted){w();return}let R=()=>{w(),g()},S=h(u.toString(),c);p&&p.addEventListener("abort",R);let g=()=>{S.abort(),p&&p.removeEventListener("abort",R)};S.on("error",y=>{i(new Y(`request to ${s.url} failed, reason: ${y.message}`,"system",y)),g()}),hc(S,y=>{b.body.destroy(y)}),process.version<"v14"&&S.on("socket",y=>{let C;y.prependListener("end",()=>{C=y._eventsCount}),y.prependListener("close",P=>{if(b&&C<y._eventsCount&&!P){let v=new Error("Premature close");v.code="ERR_STREAM_PREMATURE_CLOSE",b.body.emit("error",v)}})}),S.on("response",y=>{S.setTimeout(0);let C=Zi(y.rawHeaders);if(jr(y.statusCode)){let I=C.get("Location"),M=null;try{M=I===null?null:new URL(I,s.url)}catch{if(s.redirect!=="manual"){i(new Y(`uri requested responds with an invalid redirect URL: ${I}`,"invalid-redirect")),g();return}}switch(s.redirect){case"error":i(new Y(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),g();return;case"manual":break;case"follow":{if(M===null)break;if(s.counter>=s.follow){i(new Y(`maximum redirect reached at: ${s.url}`,"max-redirect")),g();return}let B={headers:new oe(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:ht(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!Ni(s.url,M))for(let X of["authorization","www-authenticate","cookie","cookie2"])B.headers.delete(X);if(y.statusCode!==303&&s.body&&t.body instanceof J.default.Readable){i(new Y("Cannot follow redirect with body being a readable stream","unsupported-redirect")),g();return}(y.statusCode===303||(y.statusCode===301||y.statusCode===302)&&s.method==="POST")&&(B.method="GET",B.body=void 0,B.headers.delete("content-length"));let le=aa(C);le&&(B.referrerPolicy=le),o(Ke(new Qe(M,B))),g();return}default:return i(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}p&&y.once("end",()=>{p.removeEventListener("abort",R)});let P=(0,J.pipeline)(y,new J.PassThrough,I=>{I&&i(I)});process.version<"v12.10"&&y.on("aborted",R);let v={url:s.url,status:y.statusCode,statusText:y.statusMessage,headers:C,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},L=C.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||L===null||y.statusCode===204||y.statusCode===304){b=new ie(P,v),o(b);return}let H={flush:Xe.default.Z_SYNC_FLUSH,finishFlush:Xe.default.Z_SYNC_FLUSH};if(L==="gzip"||L==="x-gzip"){P=(0,J.pipeline)(P,Xe.default.createGunzip(H),I=>{I&&i(I)}),b=new ie(P,v),o(b);return}if(L==="deflate"||L==="x-deflate"){let I=(0,J.pipeline)(y,new J.PassThrough,M=>{M&&i(M)});I.once("data",M=>{(M[0]&15)===8?P=(0,J.pipeline)(P,Xe.default.createInflate(),B=>{B&&i(B)}):P=(0,J.pipeline)(P,Xe.default.createInflateRaw(),B=>{B&&i(B)}),b=new ie(P,v),o(b)}),I.once("end",()=>{b||(b=new ie(P,v),o(b))});return}if(L==="br"){P=(0,J.pipeline)(P,Xe.default.createBrotliDecompress(),I=>{I&&i(I)}),b=new ie(P,v),o(b);return}b=new ie(P,v),o(b)}),Ki(S,s).catch(i)})}function hc(r,t){let o=Vt.Buffer.from(`0\r
\r
`),i=!1,s=!1,u;r.on("response",c=>{let{headers:h}=c;i=h["transfer-encoding"]==="chunked"&&!h["content-length"]}),r.on("socket",c=>{let h=()=>{if(i&&!s){let p=new Error("Premature close");p.code="ERR_STREAM_PREMATURE_CLOSE",t(p)}};c.prependListener("close",h),r.on("abort",()=>{c.removeListener("close",h)}),c.on("data",p=>{s=Vt.Buffer.compare(p.slice(-5),o)===0,!s&&u&&(s=Vt.Buffer.compare(u.slice(-3),o.slice(0,3))===0&&Vt.Buffer.compare(p.slice(-2),o.slice(3))===0),u=p})})}var Yt=require("@raycast/api"),{accessKey:da,secretKey:pc}=(0,Yt.getPreferenceValues)(),We=new Yt.OAuth.PKCEClient({redirectMethod:Yt.OAuth.RedirectMethod.Web,providerName:"Unsplash",providerIcon:"unsplash-logo.png",description:"Login to your Unsplash account."}),ha=async()=>{let r=await We.authorizationRequest({endpoint:"https://unsplash.com/oauth/authorize",clientId:da,scope:"public read_user write_likes"}),{authorizationCode:t}=await We.authorize(r),o=new URLSearchParams;o.append("client_id",da),o.append("client_secret",pc),o.append("redirect_uri",r.redirectURI),o.append("code",t),o.append("grant_type","authorization_code");let i=await Ke("https://unsplash.com/oauth/token",{method:"POST",body:o});if(!i.ok)throw console.error("fetch tokens error:",await i.text()),new Error(i.statusText);await We.setTokens(await i.json())};var{accessKey:mc}=(0,Hr.getPreferenceValues)(),Gr=async(r,t)=>{let o=await We.getTokens(),i=o?.accessToken;i?o?.refreshToken&&o?.isExpired()&&(await We.setTokens(await bc(o.refreshToken)),i=(await We.getTokens())?.accessToken):(await Hr.LocalStorage.clear(),await ha(),i=(await We.getTokens())?.accessToken);let s=r.startsWith("https://api.unsplash.com/")?r:`https://api.unsplash.com${r}`;return await Ke(s,{...t,headers:{Authorization:`Bearer ${i}`,...t?.headers}}).then(async c=>c.json())};async function bc(r){let t=new URLSearchParams;t.append("client_id",mc.trim()),t.append("refresh_token",r.trim()),t.append("grant_type","refresh_token");let o=await Ke("https://unsplash.com/oauth/token",{method:"POST",body:t});if(!o.ok)throw console.error("refresh tokens error:",await o.text()),new Error(o.statusText);let i=await o.json();return i.refresh_token=i.refresh_token??r,i}var ba=(0,ae.getPreferenceValues)(),ya=()=>{let{gridItemSize:r}=ba;return r=="small"?ae.Grid.ItemSize.Small:r=="large"?ae.Grid.ItemSize.Large:ae.Grid.ItemSize.Medium},ga=()=>ba.showImageTitle,Sa=r=>r.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),_a=r=>r[0]==="~"?(0,pa.join)((0,ma.homedir)(),r.slice(1)):r,wa=async(r,t)=>{let o=await(0,ae.showToast)(ae.Toast.Style.Animated,"Liking photo...");try{await Gr(`/photos/${r}/like`,{method:t?"DELETE":"POST"}),o.style=ae.Toast.Style.Success,o.title=`Photo ${t?"unliked":"liked"}!`}catch{o.style=ae.Toast.Style.Failure,o.title="An error occured"}};var bt=require("@raycast/api"),Fe=require("react");var Ra=(r,t)=>{let[o,i]=(0,Fe.useState)({results:[],isLoading:!0}),[s,u]=(0,Fe.useState)(""),c=(0,Fe.useRef)(null);(0,Fe.useEffect)(()=>(h(""),()=>{c.current?.abort()}),[]),(0,Fe.useEffect)(()=>{s!==""&&h(s)},[t]);let h=async p=>{c.current?.abort(),c.current=new AbortController;try{if(p===""){i(R=>({...R,isLoading:!1}));return}i(R=>({...R,isLoading:!0}));let{errors:b,results:w}=await yc({signal:c.current?.signal,searchText:p,options:{orientation:t,type:r||"photos"}});b?.length&&(0,bt.showToast)(bt.Toast.Style.Failure,`Failed to fetch ${r}.`,b?.join(`
`)),u(p),i(R=>({...R,isLoading:!1,results:w||[]}))}catch(b){if(b instanceof mt)return;(0,bt.showToast)(bt.Toast.Style.Failure,"Could not perform search",String(b))}};return{state:o,search:h}},yc=async({searchText:r,options:t,signal:o})=>{let i=new URLSearchParams({page:"1",query:r,per_page:"30"});t.orientation!=="all"&&i.append("orientation",t.orientation);let{errors:s,results:u}=await Gr(`/search/${t.type}?${i.toString()}`,{signal:o});return{results:u,errors:s}};var O=require("@raycast/api");var hl=require("react");var er=require("@raycast/api");var al=me(require("node:process"),1),sl=me(il(),1);async function Ct(r){if(al.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await(0,sl.default)("osascript",["-e",r]);return t}var ll=async({url:r,id:t})=>{let{downloadSize:o}=(0,er.getPreferenceValues)();try{await(0,er.showHUD)("Please select a location to save the image..."),await Ct(`
      set outputFolder to choose folder with prompt "Please select an output folder:"
      set temp_folder to (POSIX path of outputFolder) & "${t}-${o}.jpg"
      set q_temp_folder to quoted form of temp_folder

      set cmd to "curl -o " & q_temp_folder & " " & "${r}"
        do shell script cmd
    `)}catch(i){console.error(i),await(0,er.showHUD)("Couldn't save the image...")}};var ee=require("@raycast/api");var mo=require("fs");var ul=async(r,t)=>{if(t==="hud")await(0,ee.showHUD)(r);else return await(0,ee.showToast)(ee.Toast.Style.Animated,r)},bo=async({url:r,id:t,every:o,useHud:i=!1,isBackground:s=!1})=>{let{downloadSize:u,wallpaperPath:c}=(0,ee.getPreferenceValues)(),h=_a(c||ee.environment.supportPath),p;s||((0,mo.existsSync)(h)?p=await ul("Downloading and setting wallpaper...",i?"hud":"toast"):p=await ul("The selected path does not exist. Please select a valid path.",i?"hud":"toast"));let b=h.endsWith("/")?`${h}${t}-${u}.jpg`:`${h}/${t}-${u}.jpg`;try{let w=b,R=(0,mo.existsSync)(w)?"":`set cmd to "curl -o " & q_temp_folder & " " & "${r}"
        do shell script cmd`;if(await Ct(`
      set temp_folder to (POSIX path of "${w}")
      set q_temp_folder to quoted form of temp_folder

      ${R}

      set x to alias (POSIX file temp_folder)

      try
        tell application "System Events"
          tell ${o?"every":"current"} desktop
            set picture to (x as text)
            return "ok"
          end tell
        end tell
      on error
        set dialogTitle to "Error Setting Wallpaper"
        set dialogText to "Please make sure you have given Raycast the required permission. To make sure, click the button below and grant Raycast the 'System Events' permission."

        display alert dialogTitle message dialogText buttons {"Cancel", "Open Preferences"} default button 2 as informational
          if button returned of result is "Open Preferences" then
            do shell script "open 'x-apple.systempreferences:com.apple.preference.security?Privacy_Automation'"
          end if

        return "error"
      end try
    `)!=="ok")throw new Error("Error setting wallpaper.");return i?!s&&await(0,ee.showHUD)("Wallpaper set!"):p&&(p.style=ee.Toast.Style.Success,p.title="Wallpaper set!"),!0}catch(w){return console.error(w),p&&(p.style=ee.Toast.Style.Failure,p.title="Something went wrong.",p.message="Try with another image or check your internet connection."),!1}};var $e=require("@raycast/api");var cl=require("fs"),fl=async({url:r,id:t})=>{let o=await(0,$e.showToast)($e.Toast.Style.Animated,"Downloading and copying image..."),i=$e.environment.supportPath,s=i.endsWith("/")?`${i}${t}.jpg`:`${i}/${t}.jpg`;try{let u=s,c=(0,cl.existsSync)(u)?"":`set cmd to "curl -o " & q_temp_folder & " " & "${r}"
        do shell script cmd`;await Ct(`
      set temp_folder to (POSIX path of "${u}")
      set q_temp_folder to quoted form of temp_folder

      ${c}

      set x to alias (POSIX file temp_folder)
      set the clipboard to (read (contents of x) as JPEG picture)
    `),o.style=$e.Toast.Style.Success,o.title="Image copied to the clipboard!"}catch(u){console.error(u),o.style=$e.Toast.Style.Failure,o.title="Something went wrong.",o.message="Try with another image or check your internet connection."}};var se=require("@raycast/api");var Se=require("react/jsx-runtime"),dd=({result:r})=>{let t=r.urls?.regular||r.urls?.small||r.urls?.thumb,o=r.created_at?new Date(r.created_at).toLocaleString():"Unknown";return(0,Se.jsx)(se.Detail,{markdown:`![${r.alt_description}](${t})`,metadata:(0,Se.jsxs)(se.Detail.Metadata,{children:[r.description&&(0,Se.jsx)(se.Detail.Metadata.Label,{title:"Description",text:r.description}),(0,Se.jsx)(se.Detail.Metadata.Link,{title:"Author",text:r.user.username,target:r.user.links.html}),(0,Se.jsx)(se.Detail.Metadata.Label,{title:"Uploaded On",text:o,icon:se.Icon.Calendar}),(0,Se.jsx)(se.Detail.Metadata.Label,{title:"Likes",text:String(r.likes),icon:se.Icon.Heart}),(0,Se.jsx)(se.Detail.Metadata.Label,{title:"Dimensions",text:`${r.width}x${r.height}`,icon:se.Icon.AppWindow})]}),navigationTitle:r.user?.name,actions:(0,Se.jsx)(sn,{item:r})})},dl=dd;var $=require("react/jsx-runtime"),hd=({details:r,item:t,unlike:o})=>(0,$.jsx)(O.ActionPanel,{children:(0,$.jsx)(pd,{details:r,item:t,unlike:o})}),pd=({details:r=!1,item:t,unlike:o})=>{let{push:i}=(0,O.useNavigation)(),{downloadSize:s}=(0,O.getPreferenceValues)(),[u,c]=(0,hl.useState)(t.liked_by_user),h=t.urls?.raw||t.urls?.full||t.urls?.regular||t.urls?.small,p=async()=>{await wa(t.id,u),u&&o&&o(w=>[...w,String(t.id)]),c(!u)},b={url:t.urls?.[s]||h,id:`${t.id}-${s}`};return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(O.ActionPanel.Section,{children:[r&&(0,$.jsx)(O.Action,{title:"Show Details",icon:O.Icon.List,onAction:()=>i((0,$.jsx)(dl,{result:t}))}),(0,$.jsx)(O.Action,{title:`${u?"Unlike":"Like"} Photo`,icon:O.Icon.Heart,style:u?O.Action.Style.Destructive:O.Action.Style.Regular,shortcut:{modifiers:["cmd"],key:"l"},onAction:p}),t.links?.html&&(0,$.jsx)(O.Action.OpenInBrowser,{url:t.links.html,title:"Open Original"}),t.user?.links?.html&&(0,$.jsx)(O.Action.OpenInBrowser,{url:t.user.links.html,icon:O.Icon.Person,shortcut:{modifiers:["cmd"],key:"o"},title:"Open Author"})]}),h&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(O.ActionPanel.Section,{title:"Image",children:[(0,$.jsx)(O.Action,{title:"Copy to Clipboard",icon:O.Icon.Clipboard,shortcut:{modifiers:["cmd","shift"],key:"c"},onAction:()=>fl(b)}),(0,$.jsx)(O.Action,{title:"Download Image",icon:O.Icon.Desktop,shortcut:{modifiers:["cmd","shift"],key:"d"},onAction:()=>ll({url:h,id:String(t.id)})})]}),(0,$.jsxs)(O.ActionPanel.Section,{title:"Set as Wallpaper On",children:[(0,$.jsx)(O.Action,{title:"Current Monitor",icon:O.Icon.Desktop,shortcut:{modifiers:["cmd","shift"],key:"w"},onAction:()=>bo({url:h,id:String(t.id)})}),(0,$.jsx)(O.Action,{title:"Every Monitor",icon:O.Icon.Desktop,shortcut:{modifiers:["shift","opt"],key:"w"},onAction:()=>bo({url:h,id:String(t.id),every:!0})})]})]}),(0,$.jsxs)(O.ActionPanel.Section,{title:"Links",children:[t.links?.html&&(0,$.jsx)(O.Action.CopyToClipboard,{content:t.links.html,title:"Copy URL to Clipboard",icon:O.Icon.Clipboard}),h&&(0,$.jsx)(O.Action.CopyToClipboard,{content:h,title:"Copy Image URL to Clipboard",icon:O.Icon.Clipboard}),t.user?.links?.html&&(0,$.jsx)(O.Action.CopyToClipboard,{content:t.user.links.html,title:"Copy Author URL to Clipboard",icon:O.Icon.Clipboard})]})]})},sn=hd;var te=require("react/jsx-runtime"),md=()=>{let[r,t]=(0,pl.useState)("landscape"),{state:o,search:i}=Ra("photos",r),s=ya(),u=c=>{t(c)};return(0,te.jsx)(_e.Grid,{isLoading:o.isLoading,itemSize:s,onSearchTextChange:i,searchBarPlaceholder:"Search wallpapers...",searchBarAccessory:(0,te.jsx)(_e.Grid.Dropdown,{tooltip:"Orientation",storeValue:!0,defaultValue:r,onChange:u,children:(0,te.jsxs)(_e.Grid.Dropdown.Section,{title:"Orientation",children:[(0,te.jsx)(_e.Grid.Dropdown.Item,{title:"All",value:"all"}),(0,te.jsx)(_e.Grid.Dropdown.Item,{title:"Landscape",value:"landscape"}),(0,te.jsx)(_e.Grid.Dropdown.Item,{title:"Portrait",value:"portrait"}),(0,te.jsx)(_e.Grid.Dropdown.Item,{title:"Squarish",value:"squarish"})]})}),throttle:!0,children:(0,te.jsx)(_e.Grid.Section,{title:"Results",subtitle:String(o?.results?.length),children:o.results.map(c=>(0,te.jsx)(bd,{searchResult:c},c.id))})})},bd=({searchResult:r})=>{let[t,o]=[r.description||r.alt_description||r.user.name||"No Name",r.urls?.thumb||r.urls?.small||r.urls?.regular],i=ga()?Sa(t):"";return(0,te.jsx)(_e.Grid.Item,{content:o,title:i,actions:(0,te.jsx)(sn,{item:r,details:!0})})},yd=md;
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)
*/
