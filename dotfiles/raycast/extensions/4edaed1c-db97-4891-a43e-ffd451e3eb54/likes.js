"use strict";var Cc=Object.create;var mn=Object.defineProperty;var Pc=Object.getOwnPropertyDescriptor;var Ac=Object.getOwnPropertyNames;var kc=Object.getPrototypeOf,Ic=Object.prototype.hasOwnProperty;var hr=(t,r)=>()=>(t&&(r=t(t=0)),r);var I=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),ua=(t,r)=>{for(var o in r)mn(t,o,{get:r[o],enumerable:!0})},la=(t,r,o,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of Ac(r))!Ic.call(t,s)&&s!==o&&mn(t,s,{get:()=>r[s],enumerable:!(i=Pc(r,s))||i.enumerable});return t};var Oe=(t,r,o)=>(o=t!=null?Cc(kc(t)):{},la(r||!t||!t.__esModule?mn(o,"default",{value:t,enumerable:!0}):o,t)),Oc=t=>la(mn({},"__esModule",{value:!0}),t);var da=I((pn,fa)=>{(function(t,r){typeof pn=="object"&&typeof fa<"u"?r(pn):typeof define=="function"&&define.amd?define(["exports"],r):(t=typeof globalThis<"u"?globalThis:t||self,r(t.WebStreamsPolyfill={}))})(pn,function(t){"use strict";let r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function i(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=i();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let c=o,h=Promise,m=Promise.prototype.then,d=Promise.resolve.bind(h),_=Promise.reject.bind(h);function R(e){return new h(e)}function y(e){return d(e)}function g(e){return _(e)}function S(e,n,a){return m.call(e,n,a)}function E(e,n,a){S(S(e,n,a),void 0,c)}function T(e,n){E(e,n)}function w(e,n){E(e,void 0,n)}function x(e,n,a){return S(e,n,a)}function U(e){S(e,void 0,c)}let P=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let n=y(void 0);return a=>S(n,a)})();function q(e,n,a){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,a)}function A(e,n,a){try{return y(q(e,n,a))}catch(l){return g(l)}}let V=16384;class Z{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let a=this._back,l=a;a._elements.length===V-1&&(l={_elements:[],_next:void 0}),a._elements.push(n),l!==a&&(this._back=l,a._next=l),++this._size}shift(){let n=this._front,a=n,l=this._cursor,f=l+1,p=n._elements,b=p[l];return f===V&&(a=n._next,f=0),--this._size,this._cursor=f,n!==a&&(this._front=a),p[l]=void 0,b}forEach(n){let a=this._cursor,l=this._front,f=l._elements;for(;(a!==f.length||l._next!==void 0)&&!(a===f.length&&(l=l._next,f=l._elements,a=0,f.length===0));)n(f[a]),++a}peek(){let n=this._front,a=this._cursor;return n._elements[a]}}function Y(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?Kt(e):n._state==="closed"?Br(e):pe(e,n._storedError)}function it(e,n){let a=e._ownerReadableStream;return Te(a,n)}function re(e){e._ownerReadableStream._state==="readable"?Fe(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Dr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function Le(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Kt(e){e._closedPromise=R((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a})}function pe(e,n){Kt(e),Fe(e,n)}function Br(e){Kt(e),qr(e)}function Fe(e,n){e._closedPromise_reject!==void 0&&(U(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Dr(e,n){pe(e,n)}function qr(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let Et=r("[[AbortSteps]]"),Ct=r("[[ErrorSteps]]"),Pe=r("[[CancelSteps]]"),at=r("[[PullSteps]]"),st=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},$e=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Gn(e){return typeof e=="object"||typeof e=="function"}function H(e,n){if(e!==void 0&&!Gn(e))throw new TypeError(`${n} is not an object.`)}function N(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function ne(e){return typeof e=="object"&&e!==null||typeof e=="function"}function oe(e,n){if(!ne(e))throw new TypeError(`${n} is not an object.`)}function ee(e,n,a){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${a}'.`)}function ze(e,n,a){if(e===void 0)throw new TypeError(`${n} is required in '${a}'.`)}function ie(e){return Number(e)}function Q(e){return e===0?0:e}function Ae(e){return Q($e(e))}function ce(e,n){let l=Number.MAX_SAFE_INTEGER,f=Number(e);if(f=Q(f),!st(f))throw new TypeError(`${n} is not a finite number`);if(f=Ae(f),f<0||f>l)throw new TypeError(`${n} is outside the accepted range of 0 to ${l}, inclusive`);return!st(f)||f===0?0:f}function ut(e,n){if(!Je(e))throw new TypeError(`${n} is not a ReadableStream.`)}function be(e){return new Zt(e)}function Ye(e,n){e._reader._readRequests.push(n)}function lt(e,n,a){let f=e._reader._readRequests.shift();a?f._closeSteps():f._chunkSteps(n)}function ke(e){return e._reader._readRequests.length}function Xt(e){let n=e._reader;return!(n===void 0||!Qe(n))}class Zt{constructor(n){if(ee(n,1,"ReadableStreamDefaultReader"),ut(n,"First parameter"),et(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Y(this,n),this._readRequests=new Z}get closed(){return Qe(this)?this._closedPromise:g(Wr("closed"))}cancel(n=void 0){return Qe(this)?this._ownerReadableStream===void 0?g(Le("cancel")):it(this,n):g(Wr("cancel"))}read(){if(!Qe(this))return g(Wr("read"));if(this._ownerReadableStream===void 0)return g(Le("read from"));let n,a,l=R((p,b)=>{n=p,a=b});return Jt(this,{_chunkSteps:p=>n({value:p,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:p=>a(p)}),l}releaseLock(){if(!Qe(this))throw Wr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");re(this)}}}Object.defineProperties(Zt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Zt.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Qe(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Zt}function Jt(e,n){let a=e._ownerReadableStream;a._disturbed=!0,a._state==="closed"?n._closeSteps():a._state==="errored"?n._errorSteps(a._storedError):a._readableStreamController[at](n)}function Wr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let oi=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class ii{constructor(n,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=a}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?x(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let a=()=>this._returnSteps(n);return this._ongoingPromise?x(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return g(Le("iterate"));let a,l,f=R((b,v)=>{a=b,l=v});return Jt(n,{_chunkSteps:b=>{this._ongoingPromise=void 0,P(()=>a({value:b,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,re(n),a({value:void 0,done:!0})},_errorSteps:b=>{this._ongoingPromise=void 0,this._isFinished=!0,re(n),l(b)}}),f}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return g(Le("finish iterating"));if(!this._preventCancel){let l=it(a,n);return re(a),x(l,()=>({value:n,done:!0}))}return re(a),y({value:n,done:!0})}}let ai={next(){return si(this)?this._asyncIteratorImpl.next():g(ui("next"))},return(e){return si(this)?this._asyncIteratorImpl.return(e):g(ui("return"))}};oi!==void 0&&Object.setPrototypeOf(ai,oi);function sl(e,n){let a=be(e),l=new ii(a,n),f=Object.create(ai);return f._asyncIteratorImpl=l,f}function si(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof ii}catch{return!1}}function ui(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let li=Number.isNaN||function(e){return e!==e};function er(e){return e.slice()}function ci(e,n,a,l,f){new Uint8Array(e).set(new Uint8Array(a,l,f),n)}function Ch(e){return e}function Lr(e){return!1}function fi(e,n,a){if(e.slice)return e.slice(n,a);let l=a-n,f=new ArrayBuffer(l);return ci(f,0,e,n,l),f}function ul(e){return!(typeof e!="number"||li(e)||e<0)}function di(e){let n=fi(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function Vn(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function Yn(e,n,a){if(!ul(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:a}),e._queueTotalSize+=a}function ll(e){return e._queue.peek().value}function Ke(e){e._queue=new Z,e._queueTotalSize=0}class tr{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Qn(this))throw Jn("view");return this._view}respond(n){if(!Qn(this))throw Jn("respond");if(ee(n,1,"respond"),n=ce(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Lr(this._view.buffer),Ur(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!Qn(this))throw Jn("respondWithNewView");if(ee(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Lr(n.buffer),Nr(this._associatedReadableByteStreamController,n)}}Object.defineProperties(tr.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(tr.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Pt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!ct(this))throw nr("byobRequest");return Zn(this)}get desiredSize(){if(!ct(this))throw nr("desiredSize");return _i(this)}close(){if(!ct(this))throw nr("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);rr(this)}enqueue(n){if(!ct(this))throw nr("enqueue");if(ee(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);Mr(this,n)}error(n=void 0){if(!ct(this))throw nr("error");ve(this,n)}[Pe](n){hi(this),Ke(this);let a=this._cancelAlgorithm(n);return zr(this),a}[at](n){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let f=this._queue.shift();this._queueTotalSize-=f.byteLength,yi(this);let p=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);n._chunkSteps(p);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let f;try{f=new ArrayBuffer(l)}catch(b){n._errorSteps(b);return}let p={buffer:f,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(p)}Ye(a,n),ft(this)}}Object.defineProperties(Pt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Pt.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function ct(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Pt}function Qn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof tr}function ft(e){if(!hl(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();E(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ft(e))},l=>{ve(e,l)})}function hi(e){Xn(e),e._pendingPullIntos=new Z}function Kn(e,n){let a=!1;e._state==="closed"&&(a=!0);let l=mi(n);n.readerType==="default"?lt(e,l,a):bl(e,l,a)}function mi(e){let n=e.bytesFilled,a=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/a)}function Fr(e,n,a,l){e._queue.push({buffer:n,byteOffset:a,byteLength:l}),e._queueTotalSize+=l}function pi(e,n){let a=n.elementSize,l=n.bytesFilled-n.bytesFilled%a,f=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),p=n.bytesFilled+f,b=p-p%a,v=f,k=!1;b>l&&(v=b-n.bytesFilled,k=!0);let B=e._queue;for(;v>0;){let W=B.peek(),L=Math.min(v,W.byteLength),G=n.byteOffset+n.bytesFilled;ci(n.buffer,G,W.buffer,W.byteOffset,L),W.byteLength===L?B.shift():(W.byteOffset+=L,W.byteLength-=L),e._queueTotalSize-=L,bi(e,L,n),v-=L}return k}function bi(e,n,a){a.bytesFilled+=n}function yi(e){e._queueTotalSize===0&&e._closeRequested?(zr(e),fr(e._controlledReadableByteStream)):ft(e)}function Xn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function gi(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();pi(e,n)&&($r(e),Kn(e._controlledReadableByteStream,n))}}function cl(e,n,a){let l=e._controlledReadableByteStream,f=1;n.constructor!==DataView&&(f=n.constructor.BYTES_PER_ELEMENT);let p=n.constructor,b=n.buffer,v={buffer:b,bufferByteLength:b.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:f,viewConstructor:p,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(v),vi(l,a);return}if(l._state==="closed"){let k=new p(v.buffer,v.byteOffset,0);a._closeSteps(k);return}if(e._queueTotalSize>0){if(pi(e,v)){let k=mi(v);yi(e),a._chunkSteps(k);return}if(e._closeRequested){let k=new TypeError("Insufficient bytes to fill elements in the given buffer");ve(e,k),a._errorSteps(k);return}}e._pendingPullIntos.push(v),vi(l,a),ft(e)}function fl(e,n){let a=e._controlledReadableByteStream;if(eo(a))for(;Ti(a)>0;){let l=$r(e);Kn(a,l)}}function dl(e,n,a){if(bi(e,n,a),a.bytesFilled<a.elementSize)return;$r(e);let l=a.bytesFilled%a.elementSize;if(l>0){let f=a.byteOffset+a.bytesFilled,p=fi(a.buffer,f-l,f);Fr(e,p,0,p.byteLength)}a.bytesFilled-=l,Kn(e._controlledReadableByteStream,a),gi(e)}function Si(e,n){let a=e._pendingPullIntos.peek();Xn(e),e._controlledReadableByteStream._state==="closed"?fl(e):dl(e,n,a),ft(e)}function $r(e){return e._pendingPullIntos.shift()}function hl(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(Xt(n)&&ke(n)>0||eo(n)&&Ti(n)>0||_i(e)>0)}function zr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function rr(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ve(e,l),l}zr(e),fr(n)}}function Mr(e,n){let a=e._controlledReadableByteStream;if(e._closeRequested||a._state!=="readable")return;let l=n.buffer,f=n.byteOffset,p=n.byteLength,b=l;if(e._pendingPullIntos.length>0){let v=e._pendingPullIntos.peek();Lr(v.buffer),v.buffer=v.buffer}if(Xn(e),Xt(a))if(ke(a)===0)Fr(e,b,f,p);else{e._pendingPullIntos.length>0&&$r(e);let v=new Uint8Array(b,f,p);lt(a,v,!1)}else eo(a)?(Fr(e,b,f,p),gi(e)):Fr(e,b,f,p);ft(e)}function ve(e,n){let a=e._controlledReadableByteStream;a._state==="readable"&&(hi(e),Ke(e),zr(e),Yi(a,n))}function Zn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),a=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),l=Object.create(tr.prototype);pl(l,e,a),e._byobRequest=l}return e._byobRequest}function _i(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function Ur(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+n>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,Si(e,n)}function Nr(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+n.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let f=n.byteLength;a.buffer=n.buffer,Si(e,f)}function wi(e,n,a,l,f,p,b){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,Ke(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=p,n._pullAlgorithm=l,n._cancelAlgorithm=f,n._autoAllocateChunkSize=b,n._pendingPullIntos=new Z,e._readableStreamController=n;let v=a();E(y(v),()=>{n._started=!0,ft(n)},k=>{ve(n,k)})}function ml(e,n,a){let l=Object.create(Pt.prototype),f=()=>{},p=()=>y(void 0),b=()=>y(void 0);n.start!==void 0&&(f=()=>n.start(l)),n.pull!==void 0&&(p=()=>n.pull(l)),n.cancel!==void 0&&(b=k=>n.cancel(k));let v=n.autoAllocateChunkSize;if(v===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");wi(e,l,f,p,b,a,v)}function pl(e,n,a){e._associatedReadableByteStreamController=n,e._view=a}function Jn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function nr(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Ri(e){return new or(e)}function vi(e,n){e._reader._readIntoRequests.push(n)}function bl(e,n,a){let f=e._reader._readIntoRequests.shift();a?f._closeSteps(n):f._chunkSteps(n)}function Ti(e){return e._reader._readIntoRequests.length}function eo(e){let n=e._reader;return!(n===void 0||!dt(n))}class or{constructor(n){if(ee(n,1,"ReadableStreamBYOBReader"),ut(n,"First parameter"),et(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!ct(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Y(this,n),this._readIntoRequests=new Z}get closed(){return dt(this)?this._closedPromise:g(jr("closed"))}cancel(n=void 0){return dt(this)?this._ownerReadableStream===void 0?g(Le("cancel")):it(this,n):g(jr("cancel"))}read(n){if(!dt(this))return g(jr("read"));if(!ArrayBuffer.isView(n))return g(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return g(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return g(new TypeError("view's buffer must have non-zero byteLength"));if(Lr(n.buffer),this._ownerReadableStream===void 0)return g(Le("read from"));let a,l,f=R((b,v)=>{a=b,l=v});return Ei(this,n,{_chunkSteps:b=>a({value:b,done:!1}),_closeSteps:b=>a({value:b,done:!0}),_errorSteps:b=>l(b)}),f}releaseLock(){if(!dt(this))throw jr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");re(this)}}}Object.defineProperties(or.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(or.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function dt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof or}function Ei(e,n,a){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?a._errorSteps(l._storedError):cl(l._readableStreamController,n,a)}function jr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function ir(e,n){let{highWaterMark:a}=e;if(a===void 0)return n;if(li(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function Hr(e){let{size:n}=e;return n||(()=>1)}function Gr(e,n){H(e,n);let a=e?.highWaterMark,l=e?.size;return{highWaterMark:a===void 0?void 0:ie(a),size:l===void 0?void 0:yl(l,`${n} has member 'size' that`)}}function yl(e,n){return N(e,n),a=>ie(e(a))}function gl(e,n){H(e,n);let a=e?.abort,l=e?.close,f=e?.start,p=e?.type,b=e?.write;return{abort:a===void 0?void 0:Sl(a,e,`${n} has member 'abort' that`),close:l===void 0?void 0:_l(l,e,`${n} has member 'close' that`),start:f===void 0?void 0:wl(f,e,`${n} has member 'start' that`),write:b===void 0?void 0:Rl(b,e,`${n} has member 'write' that`),type:p}}function Sl(e,n,a){return N(e,a),l=>A(e,n,[l])}function _l(e,n,a){return N(e,a),()=>A(e,n,[])}function wl(e,n,a){return N(e,a),l=>q(e,n,[l])}function Rl(e,n,a){return N(e,a),(l,f)=>A(e,n,[l,f])}function Ci(e,n){if(!At(e))throw new TypeError(`${n} is not a WritableStream.`)}function vl(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Tl=typeof AbortController=="function";function El(){if(Tl)return new AbortController}class ar{constructor(n={},a={}){n===void 0?n=null:oe(n,"First parameter");let l=Gr(a,"Second parameter"),f=gl(n,"First parameter");if(Ai(this),f.type!==void 0)throw new RangeError("Invalid type is specified");let b=Hr(l),v=ir(l,1);$l(this,f,v,b)}get locked(){if(!At(this))throw Xr("locked");return kt(this)}abort(n=void 0){return At(this)?kt(this)?g(new TypeError("Cannot abort a stream that already has a writer")):Vr(this,n):g(Xr("abort"))}close(){return At(this)?kt(this)?g(new TypeError("Cannot close a stream that already has a writer")):Ie(this)?g(new TypeError("Cannot close an already-closing stream")):ki(this):g(Xr("close"))}getWriter(){if(!At(this))throw Xr("getWriter");return Pi(this)}}Object.defineProperties(ar.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(ar.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function Pi(e){return new sr(e)}function Cl(e,n,a,l,f=1,p=()=>1){let b=Object.create(ar.prototype);Ai(b);let v=Object.create(It.prototype);return qi(b,v,e,n,a,l,f,p),b}function Ai(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new Z,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function At(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof ar}function kt(e){return e._writer!==void 0}function Vr(e,n){var a;if(e._state==="closed"||e._state==="errored")return y(void 0);e._writableStreamController._abortReason=n,(a=e._writableStreamController._abortController)===null||a===void 0||a.abort();let l=e._state;if(l==="closed"||l==="errored")return y(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let f=!1;l==="erroring"&&(f=!0,n=void 0);let p=R((b,v)=>{e._pendingAbortRequest={_promise:void 0,_resolve:b,_reject:v,_reason:n,_wasAlreadyErroring:f}});return e._pendingAbortRequest._promise=p,f||ro(e,n),p}function ki(e){let n=e._state;if(n==="closed"||n==="errored")return g(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let a=R((f,p)=>{let b={_resolve:f,_reject:p};e._closeRequest=b}),l=e._writer;return l!==void 0&&e._backpressure&&n==="writable"&&fo(l),zl(e._writableStreamController),a}function Pl(e){return R((a,l)=>{let f={_resolve:a,_reject:l};e._writeRequests.push(f)})}function to(e,n){if(e._state==="writable"){ro(e,n);return}no(e)}function ro(e,n){let a=e._writableStreamController;e._state="erroring",e._storedError=n;let l=e._writer;l!==void 0&&Oi(l,n),!xl(e)&&a._started&&no(e)}function no(e){e._state="errored",e._writableStreamController[Ct]();let n=e._storedError;if(e._writeRequests.forEach(f=>{f._reject(n)}),e._writeRequests=new Z,e._pendingAbortRequest===void 0){Yr(e);return}let a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(n),Yr(e);return}let l=e._writableStreamController[Et](a._reason);E(l,()=>{a._resolve(),Yr(e)},f=>{a._reject(f),Yr(e)})}function Al(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function kl(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,to(e,n)}function Il(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let a=e._writer;a!==void 0&&$i(a)}function Ol(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),to(e,n)}function Ie(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function xl(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Bl(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Dl(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Yr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&lo(n,e._storedError)}function oo(e,n){let a=e._writer;a!==void 0&&n!==e._backpressure&&(n?Vl(a):fo(a)),e._backpressure=n}class sr{constructor(n){if(ee(n,1,"WritableStreamDefaultWriter"),Ci(n,"First parameter"),kt(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let a=n._state;if(a==="writable")!Ie(n)&&n._backpressure?Jr(this):zi(this),Zr(this);else if(a==="erroring")co(this,n._storedError),Zr(this);else if(a==="closed")zi(this),Hl(this);else{let l=n._storedError;co(this,l),Fi(this,l)}}get closed(){return ht(this)?this._closedPromise:g(mt("closed"))}get desiredSize(){if(!ht(this))throw mt("desiredSize");if(this._ownerWritableStream===void 0)throw ur("desiredSize");return Fl(this)}get ready(){return ht(this)?this._readyPromise:g(mt("ready"))}abort(n=void 0){return ht(this)?this._ownerWritableStream===void 0?g(ur("abort")):ql(this,n):g(mt("abort"))}close(){if(!ht(this))return g(mt("close"));let n=this._ownerWritableStream;return n===void 0?g(ur("close")):Ie(n)?g(new TypeError("Cannot close an already-closing stream")):Ii(this)}releaseLock(){if(!ht(this))throw mt("releaseLock");this._ownerWritableStream!==void 0&&xi(this)}write(n=void 0){return ht(this)?this._ownerWritableStream===void 0?g(ur("write to")):Bi(this,n):g(mt("write"))}}Object.defineProperties(sr.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(sr.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function ht(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof sr}function ql(e,n){let a=e._ownerWritableStream;return Vr(a,n)}function Ii(e){let n=e._ownerWritableStream;return ki(n)}function Wl(e){let n=e._ownerWritableStream,a=n._state;return Ie(n)||a==="closed"?y(void 0):a==="errored"?g(n._storedError):Ii(e)}function Ll(e,n){e._closedPromiseState==="pending"?lo(e,n):Gl(e,n)}function Oi(e,n){e._readyPromiseState==="pending"?Mi(e,n):Yl(e,n)}function Fl(e){let n=e._ownerWritableStream,a=n._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:Wi(n._writableStreamController)}function xi(e){let n=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Oi(e,a),Ll(e,a),n._writer=void 0,e._ownerWritableStream=void 0}function Bi(e,n){let a=e._ownerWritableStream,l=a._writableStreamController,f=Ml(l,n);if(a!==e._ownerWritableStream)return g(ur("write to"));let p=a._state;if(p==="errored")return g(a._storedError);if(Ie(a)||p==="closed")return g(new TypeError("The stream is closing or closed and cannot be written to"));if(p==="erroring")return g(a._storedError);let b=Pl(a);return Ul(l,n,f),b}let Di={};class It{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!io(this))throw uo("abortReason");return this._abortReason}get signal(){if(!io(this))throw uo("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!io(this))throw uo("error");this._controlledWritableStream._state==="writable"&&Li(this,n)}[Et](n){let a=this._abortAlgorithm(n);return Qr(this),a}[Ct](){Ke(this)}}Object.defineProperties(It.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(It.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function io(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof It}function qi(e,n,a,l,f,p,b,v){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,Ke(n),n._abortReason=void 0,n._abortController=El(),n._started=!1,n._strategySizeAlgorithm=v,n._strategyHWM=b,n._writeAlgorithm=l,n._closeAlgorithm=f,n._abortAlgorithm=p;let k=so(n);oo(e,k);let B=a(),W=y(B);E(W,()=>{n._started=!0,Kr(n)},L=>{n._started=!0,to(e,L)})}function $l(e,n,a,l){let f=Object.create(It.prototype),p=()=>{},b=()=>y(void 0),v=()=>y(void 0),k=()=>y(void 0);n.start!==void 0&&(p=()=>n.start(f)),n.write!==void 0&&(b=B=>n.write(B,f)),n.close!==void 0&&(v=()=>n.close()),n.abort!==void 0&&(k=B=>n.abort(B)),qi(e,f,p,b,v,k,a,l)}function Qr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function zl(e){Yn(e,Di,0),Kr(e)}function Ml(e,n){try{return e._strategySizeAlgorithm(n)}catch(a){return ao(e,a),1}}function Wi(e){return e._strategyHWM-e._queueTotalSize}function Ul(e,n,a){try{Yn(e,n,a)}catch(f){ao(e,f);return}let l=e._controlledWritableStream;if(!Ie(l)&&l._state==="writable"){let f=so(e);oo(l,f)}Kr(e)}function Kr(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){no(n);return}if(e._queue.length===0)return;let l=ll(e);l===Di?Nl(e):jl(e,l)}function ao(e,n){e._controlledWritableStream._state==="writable"&&Li(e,n)}function Nl(e){let n=e._controlledWritableStream;Bl(n),Vn(e);let a=e._closeAlgorithm();Qr(e),E(a,()=>{Il(n)},l=>{Ol(n,l)})}function jl(e,n){let a=e._controlledWritableStream;Dl(a);let l=e._writeAlgorithm(n);E(l,()=>{Al(a);let f=a._state;if(Vn(e),!Ie(a)&&f==="writable"){let p=so(e);oo(a,p)}Kr(e)},f=>{a._state==="writable"&&Qr(e),kl(a,f)})}function so(e){return Wi(e)<=0}function Li(e,n){let a=e._controlledWritableStream;Qr(e),ro(a,n)}function Xr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function uo(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function mt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function ur(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Zr(e){e._closedPromise=R((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a,e._closedPromiseState="pending"})}function Fi(e,n){Zr(e),lo(e,n)}function Hl(e){Zr(e),$i(e)}function lo(e,n){e._closedPromise_reject!==void 0&&(U(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Gl(e,n){Fi(e,n)}function $i(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Jr(e){e._readyPromise=R((n,a)=>{e._readyPromise_resolve=n,e._readyPromise_reject=a}),e._readyPromiseState="pending"}function co(e,n){Jr(e),Mi(e,n)}function zi(e){Jr(e),fo(e)}function Mi(e,n){e._readyPromise_reject!==void 0&&(U(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Vl(e){Jr(e)}function Yl(e,n){co(e,n)}function fo(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let Ui=typeof DOMException<"u"?DOMException:void 0;function Ql(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Kl(){let e=function(a,l){this.message=a||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Xl=Ql(Ui)?Ui:Kl();function Ni(e,n,a,l,f,p){let b=be(e),v=Pi(n);e._disturbed=!0;let k=!1,B=y(void 0);return R((W,L)=>{let G;if(p!==void 0){if(G=()=>{let C=new Xl("Aborted","AbortError"),O=[];l||O.push(()=>n._state==="writable"?Vr(n,C):y(void 0)),f||O.push(()=>e._state==="readable"?Te(e,C):y(void 0)),ae(()=>Promise.all(O.map($=>$())),!0,C)},p.aborted){G();return}p.addEventListener("abort",G)}function Ee(){return R((C,O)=>{function $(fe){fe?C():S(Bt(),$,O)}$(!1)})}function Bt(){return k?y(!0):S(v._readyPromise,()=>R((C,O)=>{Jt(b,{_chunkSteps:$=>{B=S(Bi(v,$),void 0,o),C(!1)},_closeSteps:()=>C(!0),_errorSteps:O})}))}if(Me(e,b._closedPromise,C=>{l?ye(!0,C):ae(()=>Vr(n,C),!0,C)}),Me(n,v._closedPromise,C=>{f?ye(!0,C):ae(()=>Te(e,C),!0,C)}),te(e,b._closedPromise,()=>{a?ye():ae(()=>Wl(v))}),Ie(n)||n._state==="closed"){let C=new TypeError("the destination writable stream closed before all data could be piped to it");f?ye(!0,C):ae(()=>Te(e,C),!0,C)}U(Ee());function tt(){let C=B;return S(B,()=>C!==B?tt():void 0)}function Me(C,O,$){C._state==="errored"?$(C._storedError):w(O,$)}function te(C,O,$){C._state==="closed"?$():T(O,$)}function ae(C,O,$){if(k)return;k=!0,n._state==="writable"&&!Ie(n)?T(tt(),fe):fe();function fe(){E(C(),()=>Ue(O,$),Dt=>Ue(!0,Dt))}}function ye(C,O){k||(k=!0,n._state==="writable"&&!Ie(n)?T(tt(),()=>Ue(C,O)):Ue(C,O))}function Ue(C,O){xi(v),re(b),p!==void 0&&p.removeEventListener("abort",G),C?L(O):W(void 0)}})}class Ot{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!en(this))throw nn("desiredSize");return ho(this)}close(){if(!en(this))throw nn("close");if(!xt(this))throw new TypeError("The stream is not in a state that permits close");cr(this)}enqueue(n=void 0){if(!en(this))throw nn("enqueue");if(!xt(this))throw new TypeError("The stream is not in a state that permits enqueue");return rn(this,n)}error(n=void 0){if(!en(this))throw nn("error");Xe(this,n)}[Pe](n){Ke(this);let a=this._cancelAlgorithm(n);return tn(this),a}[at](n){let a=this._controlledReadableStream;if(this._queue.length>0){let l=Vn(this);this._closeRequested&&this._queue.length===0?(tn(this),fr(a)):lr(this),n._chunkSteps(l)}else Ye(a,n),lr(this)}}Object.defineProperties(Ot.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ot.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function en(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Ot}function lr(e){if(!ji(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();E(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,lr(e))},l=>{Xe(e,l)})}function ji(e){let n=e._controlledReadableStream;return!xt(e)||!e._started?!1:!!(et(n)&&ke(n)>0||ho(e)>0)}function tn(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function cr(e){if(!xt(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(tn(e),fr(n))}function rn(e,n){if(!xt(e))return;let a=e._controlledReadableStream;if(et(a)&&ke(a)>0)lt(a,n,!1);else{let l;try{l=e._strategySizeAlgorithm(n)}catch(f){throw Xe(e,f),f}try{Yn(e,n,l)}catch(f){throw Xe(e,f),f}}lr(e)}function Xe(e,n){let a=e._controlledReadableStream;a._state==="readable"&&(Ke(e),tn(e),Yi(a,n))}function ho(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function Zl(e){return!ji(e)}function xt(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function Hi(e,n,a,l,f,p,b){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,Ke(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=b,n._strategyHWM=p,n._pullAlgorithm=l,n._cancelAlgorithm=f,e._readableStreamController=n;let v=a();E(y(v),()=>{n._started=!0,lr(n)},k=>{Xe(n,k)})}function Jl(e,n,a,l){let f=Object.create(Ot.prototype),p=()=>{},b=()=>y(void 0),v=()=>y(void 0);n.start!==void 0&&(p=()=>n.start(f)),n.pull!==void 0&&(b=()=>n.pull(f)),n.cancel!==void 0&&(v=k=>n.cancel(k)),Hi(e,f,p,b,v,a,l)}function nn(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function ec(e,n){return ct(e._readableStreamController)?rc(e):tc(e)}function tc(e,n){let a=be(e),l=!1,f=!1,p=!1,b=!1,v,k,B,W,L,G=R(te=>{L=te});function Ee(){return l?(f=!0,y(void 0)):(l=!0,Jt(a,{_chunkSteps:ae=>{P(()=>{f=!1;let ye=ae,Ue=ae;p||rn(B._readableStreamController,ye),b||rn(W._readableStreamController,Ue),l=!1,f&&Ee()})},_closeSteps:()=>{l=!1,p||cr(B._readableStreamController),b||cr(W._readableStreamController),(!p||!b)&&L(void 0)},_errorSteps:()=>{l=!1}}),y(void 0))}function Bt(te){if(p=!0,v=te,b){let ae=er([v,k]),ye=Te(e,ae);L(ye)}return G}function tt(te){if(b=!0,k=te,p){let ae=er([v,k]),ye=Te(e,ae);L(ye)}return G}function Me(){}return B=mo(Me,Ee,Bt),W=mo(Me,Ee,tt),w(a._closedPromise,te=>{Xe(B._readableStreamController,te),Xe(W._readableStreamController,te),(!p||!b)&&L(void 0)}),[B,W]}function rc(e){let n=be(e),a=!1,l=!1,f=!1,p=!1,b=!1,v,k,B,W,L,G=R(C=>{L=C});function Ee(C){w(C._closedPromise,O=>{C===n&&(ve(B._readableStreamController,O),ve(W._readableStreamController,O),(!p||!b)&&L(void 0))})}function Bt(){dt(n)&&(re(n),n=be(e),Ee(n)),Jt(n,{_chunkSteps:O=>{P(()=>{l=!1,f=!1;let $=O,fe=O;if(!p&&!b)try{fe=di(O)}catch(Dt){ve(B._readableStreamController,Dt),ve(W._readableStreamController,Dt),L(Te(e,Dt));return}p||Mr(B._readableStreamController,$),b||Mr(W._readableStreamController,fe),a=!1,l?Me():f&&te()})},_closeSteps:()=>{a=!1,p||rr(B._readableStreamController),b||rr(W._readableStreamController),B._readableStreamController._pendingPullIntos.length>0&&Ur(B._readableStreamController,0),W._readableStreamController._pendingPullIntos.length>0&&Ur(W._readableStreamController,0),(!p||!b)&&L(void 0)},_errorSteps:()=>{a=!1}})}function tt(C,O){Qe(n)&&(re(n),n=Ri(e),Ee(n));let $=O?W:B,fe=O?B:W;Ei(n,C,{_chunkSteps:qt=>{P(()=>{l=!1,f=!1;let Wt=O?b:p;if(O?p:b)Wt||Nr($._readableStreamController,qt);else{let sa;try{sa=di(qt)}catch(bo){ve($._readableStreamController,bo),ve(fe._readableStreamController,bo),L(Te(e,bo));return}Wt||Nr($._readableStreamController,qt),Mr(fe._readableStreamController,sa)}a=!1,l?Me():f&&te()})},_closeSteps:qt=>{a=!1;let Wt=O?b:p,hn=O?p:b;Wt||rr($._readableStreamController),hn||rr(fe._readableStreamController),qt!==void 0&&(Wt||Nr($._readableStreamController,qt),!hn&&fe._readableStreamController._pendingPullIntos.length>0&&Ur(fe._readableStreamController,0)),(!Wt||!hn)&&L(void 0)},_errorSteps:()=>{a=!1}})}function Me(){if(a)return l=!0,y(void 0);a=!0;let C=Zn(B._readableStreamController);return C===null?Bt():tt(C._view,!1),y(void 0)}function te(){if(a)return f=!0,y(void 0);a=!0;let C=Zn(W._readableStreamController);return C===null?Bt():tt(C._view,!0),y(void 0)}function ae(C){if(p=!0,v=C,b){let O=er([v,k]),$=Te(e,O);L($)}return G}function ye(C){if(b=!0,k=C,p){let O=er([v,k]),$=Te(e,O);L($)}return G}function Ue(){}return B=Vi(Ue,Me,ae),W=Vi(Ue,te,ye),Ee(n),[B,W]}function nc(e,n){H(e,n);let a=e,l=a?.autoAllocateChunkSize,f=a?.cancel,p=a?.pull,b=a?.start,v=a?.type;return{autoAllocateChunkSize:l===void 0?void 0:ce(l,`${n} has member 'autoAllocateChunkSize' that`),cancel:f===void 0?void 0:oc(f,a,`${n} has member 'cancel' that`),pull:p===void 0?void 0:ic(p,a,`${n} has member 'pull' that`),start:b===void 0?void 0:ac(b,a,`${n} has member 'start' that`),type:v===void 0?void 0:sc(v,`${n} has member 'type' that`)}}function oc(e,n,a){return N(e,a),l=>A(e,n,[l])}function ic(e,n,a){return N(e,a),l=>A(e,n,[l])}function ac(e,n,a){return N(e,a),l=>q(e,n,[l])}function sc(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function uc(e,n){H(e,n);let a=e?.mode;return{mode:a===void 0?void 0:lc(a,`${n} has member 'mode' that`)}}function lc(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function cc(e,n){return H(e,n),{preventCancel:!!e?.preventCancel}}function Gi(e,n){H(e,n);let a=e?.preventAbort,l=e?.preventCancel,f=e?.preventClose,p=e?.signal;return p!==void 0&&fc(p,`${n} has member 'signal' that`),{preventAbort:!!a,preventCancel:!!l,preventClose:!!f,signal:p}}function fc(e,n){if(!vl(e))throw new TypeError(`${n} is not an AbortSignal.`)}function dc(e,n){H(e,n);let a=e?.readable;ze(a,"readable","ReadableWritablePair"),ut(a,`${n} has member 'readable' that`);let l=e?.writable;return ze(l,"writable","ReadableWritablePair"),Ci(l,`${n} has member 'writable' that`),{readable:a,writable:l}}class Ze{constructor(n={},a={}){n===void 0?n=null:oe(n,"First parameter");let l=Gr(a,"Second parameter"),f=nc(n,"First parameter");if(po(this),f.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let p=ir(l,0);ml(this,f,p)}else{let p=Hr(l),b=ir(l,1);Jl(this,f,b,p)}}get locked(){if(!Je(this))throw pt("locked");return et(this)}cancel(n=void 0){return Je(this)?et(this)?g(new TypeError("Cannot cancel a stream that already has a reader")):Te(this,n):g(pt("cancel"))}getReader(n=void 0){if(!Je(this))throw pt("getReader");return uc(n,"First parameter").mode===void 0?be(this):Ri(this)}pipeThrough(n,a={}){if(!Je(this))throw pt("pipeThrough");ee(n,1,"pipeThrough");let l=dc(n,"First parameter"),f=Gi(a,"Second parameter");if(et(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(kt(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let p=Ni(this,l.writable,f.preventClose,f.preventAbort,f.preventCancel,f.signal);return U(p),l.readable}pipeTo(n,a={}){if(!Je(this))return g(pt("pipeTo"));if(n===void 0)return g("Parameter 1 is required in 'pipeTo'.");if(!At(n))return g(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=Gi(a,"Second parameter")}catch(f){return g(f)}return et(this)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):kt(n)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Ni(this,n,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!Je(this))throw pt("tee");let n=ec(this);return er(n)}values(n=void 0){if(!Je(this))throw pt("values");let a=cc(n,"First parameter");return sl(this,a.preventCancel)}}Object.defineProperties(Ze.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ze.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(Ze.prototype,r.asyncIterator,{value:Ze.prototype.values,writable:!0,configurable:!0});function mo(e,n,a,l=1,f=()=>1){let p=Object.create(Ze.prototype);po(p);let b=Object.create(Ot.prototype);return Hi(p,b,e,n,a,l,f),p}function Vi(e,n,a){let l=Object.create(Ze.prototype);po(l);let f=Object.create(Pt.prototype);return wi(l,f,e,n,a,0,void 0),l}function po(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Je(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Ze}function et(e){return e._reader!==void 0}function Te(e,n){if(e._disturbed=!0,e._state==="closed")return y(void 0);if(e._state==="errored")return g(e._storedError);fr(e);let a=e._reader;a!==void 0&&dt(a)&&(a._readIntoRequests.forEach(f=>{f._closeSteps(void 0)}),a._readIntoRequests=new Z);let l=e._readableStreamController[Pe](n);return x(l,o)}function fr(e){e._state="closed";let n=e._reader;n!==void 0&&(qr(n),Qe(n)&&(n._readRequests.forEach(a=>{a._closeSteps()}),n._readRequests=new Z))}function Yi(e,n){e._state="errored",e._storedError=n;let a=e._reader;a!==void 0&&(Fe(a,n),Qe(a)?(a._readRequests.forEach(l=>{l._errorSteps(n)}),a._readRequests=new Z):(a._readIntoRequests.forEach(l=>{l._errorSteps(n)}),a._readIntoRequests=new Z))}function pt(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Qi(e,n){H(e,n);let a=e?.highWaterMark;return ze(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:ie(a)}}let Ki=e=>e.byteLength;Object.defineProperty(Ki,"name",{value:"size",configurable:!0});class on{constructor(n){ee(n,1,"ByteLengthQueuingStrategy"),n=Qi(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Zi(this))throw Xi("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Zi(this))throw Xi("size");return Ki}}Object.defineProperties(on.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(on.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Xi(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Zi(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof on}let Ji=()=>1;Object.defineProperty(Ji,"name",{value:"size",configurable:!0});class an{constructor(n){ee(n,1,"CountQueuingStrategy"),n=Qi(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!ta(this))throw ea("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!ta(this))throw ea("size");return Ji}}Object.defineProperties(an.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(an.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function ea(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function ta(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof an}function hc(e,n){H(e,n);let a=e?.flush,l=e?.readableType,f=e?.start,p=e?.transform,b=e?.writableType;return{flush:a===void 0?void 0:mc(a,e,`${n} has member 'flush' that`),readableType:l,start:f===void 0?void 0:pc(f,e,`${n} has member 'start' that`),transform:p===void 0?void 0:bc(p,e,`${n} has member 'transform' that`),writableType:b}}function mc(e,n,a){return N(e,a),l=>A(e,n,[l])}function pc(e,n,a){return N(e,a),l=>q(e,n,[l])}function bc(e,n,a){return N(e,a),(l,f)=>A(e,n,[l,f])}class sn{constructor(n={},a={},l={}){n===void 0&&(n=null);let f=Gr(a,"Second parameter"),p=Gr(l,"Third parameter"),b=hc(n,"First parameter");if(b.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(b.writableType!==void 0)throw new RangeError("Invalid writableType specified");let v=ir(p,0),k=Hr(p),B=ir(f,1),W=Hr(f),L,G=R(Ee=>{L=Ee});yc(this,G,B,W,v,k),Sc(this,b),b.start!==void 0?L(b.start(this._transformStreamController)):L(void 0)}get readable(){if(!ra(this))throw aa("readable");return this._readable}get writable(){if(!ra(this))throw aa("writable");return this._writable}}Object.defineProperties(sn.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(sn.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function yc(e,n,a,l,f,p){function b(){return n}function v(G){return Rc(e,G)}function k(G){return vc(e,G)}function B(){return Tc(e)}e._writable=Cl(b,v,B,k,a,l);function W(){return Ec(e)}function L(G){return ln(e,G),y(void 0)}e._readable=mo(b,W,L,f,p),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,cn(e,!0),e._transformStreamController=void 0}function ra(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof sn}function un(e,n){Xe(e._readable._readableStreamController,n),ln(e,n)}function ln(e,n){na(e._transformStreamController),ao(e._writable._writableStreamController,n),e._backpressure&&cn(e,!1)}function cn(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=R(a=>{e._backpressureChangePromise_resolve=a}),e._backpressure=n}class dr{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!fn(this))throw dn("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return ho(n)}enqueue(n=void 0){if(!fn(this))throw dn("enqueue");oa(this,n)}error(n=void 0){if(!fn(this))throw dn("error");_c(this,n)}terminate(){if(!fn(this))throw dn("terminate");wc(this)}}Object.defineProperties(dr.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(dr.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function fn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof dr}function gc(e,n,a,l){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=a,n._flushAlgorithm=l}function Sc(e,n){let a=Object.create(dr.prototype),l=p=>{try{return oa(a,p),y(void 0)}catch(b){return g(b)}},f=()=>y(void 0);n.transform!==void 0&&(l=p=>n.transform(p,a)),n.flush!==void 0&&(f=()=>n.flush(a)),gc(e,a,l,f)}function na(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function oa(e,n){let a=e._controlledTransformStream,l=a._readable._readableStreamController;if(!xt(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{rn(l,n)}catch(p){throw ln(a,p),a._readable._storedError}Zl(l)!==a._backpressure&&cn(a,!0)}function _c(e,n){un(e._controlledTransformStream,n)}function ia(e,n){let a=e._transformAlgorithm(n);return x(a,void 0,l=>{throw un(e._controlledTransformStream,l),l})}function wc(e){let n=e._controlledTransformStream,a=n._readable._readableStreamController;cr(a);let l=new TypeError("TransformStream terminated");ln(n,l)}function Rc(e,n){let a=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return x(l,()=>{let f=e._writable;if(f._state==="erroring")throw f._storedError;return ia(a,n)})}return ia(a,n)}function vc(e,n){return un(e,n),y(void 0)}function Tc(e){let n=e._readable,a=e._transformStreamController,l=a._flushAlgorithm();return na(a),x(l,()=>{if(n._state==="errored")throw n._storedError;cr(n._readableStreamController)},f=>{throw un(e,f),n._storedError})}function Ec(e){return cn(e,!1),e._backpressureChangePromise}function dn(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function aa(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=on,t.CountQueuingStrategy=an,t.ReadableByteStreamController=Pt,t.ReadableStream=Ze,t.ReadableStreamBYOBReader=or,t.ReadableStreamBYOBRequest=tr,t.ReadableStreamDefaultController=Ot,t.ReadableStreamDefaultReader=Zt,t.TransformStream=sn,t.TransformStreamDefaultController=dr,t.WritableStream=ar,t.WritableStreamDefaultController=It,t.WritableStreamDefaultWriter=sr,Object.defineProperty(t,"__esModule",{value:!0})})});var ha=I(()=>{if(!globalThis.ReadableStream)try{let t=require("node:process"),{emitWarning:r}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),t.emitWarning=r}catch(o){throw t.emitWarning=r,o}}catch{Object.assign(globalThis,da())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(o){let i=0,s=this;return new ReadableStream({type:"bytes",async pull(u){let h=await s.slice(i,Math.min(s.size,i+65536)).arrayBuffer();i+=h.byteLength,u.enqueue(new Uint8Array(h)),i===s.size&&u.close()}})})}catch{}});async function*yo(t,r=!0){for(let o of t)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(r){let i=o.byteOffset,s=o.byteOffset+o.byteLength;for(;i!==s;){let u=Math.min(s-i,ma),c=o.buffer.slice(i,i+u);i+=c.byteLength,yield new Uint8Array(c)}}else yield o;else{let i=0,s=o;for(;i!==s.size;){let c=await s.slice(i,Math.min(s.size,i+ma)).arrayBuffer();i+=c.byteLength,yield new Uint8Array(c)}}}var Oh,ma,pa,Bc,Ne,mr=hr(()=>{Oh=Oe(ha(),1);ma=65536;pa=class go{#e=[];#t="";#r=0;#n="transparent";constructor(r=[],o={}){if(typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let i=new TextEncoder;for(let u of r){let c;ArrayBuffer.isView(u)?c=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?c=new Uint8Array(u.slice(0)):u instanceof go?c=u:c=i.encode(`${u}`),this.#r+=ArrayBuffer.isView(c)?c.byteLength:c.size,this.#e.push(c)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let s=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let r=new TextDecoder,o="";for await(let i of yo(this.#e,!1))o+=r.decode(i,{stream:!0});return o+=r.decode(),o}async arrayBuffer(){let r=new Uint8Array(this.size),o=0;for await(let i of yo(this.#e,!1))r.set(i,o),o+=i.length;return r.buffer}stream(){let r=yo(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let i=await r.next();i.done?o.close():o.enqueue(i.value)},async cancel(){await r.return()}})}slice(r=0,o=this.size,i=""){let{size:s}=this,u=r<0?Math.max(s+r,0):Math.min(r,s),c=o<0?Math.max(s+o,0):Math.min(o,s),h=Math.max(c-u,0),m=this.#e,d=[],_=0;for(let y of m){if(_>=h)break;let g=ArrayBuffer.isView(y)?y.byteLength:y.size;if(u&&g<=u)u-=g,c-=g;else{let S;ArrayBuffer.isView(y)?(S=y.subarray(u,Math.min(g,c)),_+=S.byteLength):(S=y.slice(u,Math.min(g,c)),_+=S.size),c-=g,d.push(S),u=0}}let R=new go([],{type:String(i).toLowerCase()});return R.#r=h,R.#e=d,R}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}};Object.defineProperties(pa.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Bc=pa,Ne=Bc});var Dc,qc,Lt,So=hr(()=>{mr();Dc=class extends Ne{#e=0;#t="";constructor(r,o,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,i),i===null&&(i={});let s=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof Ne&&/^(File)$/.test(r[Symbol.toStringTag])}},qc=Dc,Lt=qc});function ga(t,r=Ne){var o=`${ba()}${ba()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],s=`--${o}\r
Content-Disposition: form-data; name="`;return t.forEach((u,c)=>typeof u=="string"?i.push(s+_o(c)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(s+_o(c)+`"; filename="${_o(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),i.push(`--${o}--`),new r(i,{type:"multipart/form-data; boundary="+o})}var pr,Wc,Lc,ba,Fc,ya,_o,bt,yt,bn=hr(()=>{mr();So();({toStringTag:pr,iterator:Wc,hasInstance:Lc}=Symbol),ba=Math.random,Fc="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),ya=(t,r,o)=>(t+="",/^(Blob|File)$/.test(r&&r[pr])?[(o=o!==void 0?o+"":r[pr]=="File"?r.name:"blob",t),r.name!==o||r[pr]=="blob"?new Lt([r],o,r):r]:[t,r+""]),_o=(t,r)=>(r?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),bt=(t,r,o)=>{if(r.length<o)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${o} arguments required, but only ${r.length} present.`)},yt=class{#e=[];constructor(...r){if(r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[pr](){return"FormData"}[Wc](){return this.entries()}static[Lc](r){return r&&typeof r=="object"&&r[pr]==="FormData"&&!Fc.some(o=>typeof r[o]!="function")}append(...r){bt("append",arguments,2),this.#e.push(ya(...r))}delete(r){bt("delete",arguments,1),r+="",this.#e=this.#e.filter(([o])=>o!==r)}get(r){bt("get",arguments,1),r+="";for(var o=this.#e,i=o.length,s=0;s<i;s++)if(o[s][0]===r)return o[s][1];return null}getAll(r,o){return bt("getAll",arguments,1),o=[],r+="",this.#e.forEach(i=>i[0]===r&&o.push(i[1])),o}has(r){return bt("has",arguments,1),r+="",this.#e.some(o=>o[0]===r)}forEach(r,o){bt("forEach",arguments,1);for(var[i,s]of this)r.call(o,s,i,this)}set(...r){bt("set",arguments,2);var o=[],i=!0;r=ya(...r),this.#e.forEach(s=>{s[0]===r[0]?i&&(i=!o.push(r)):o.push(s)}),i&&o.push(r),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}}});var Ra=I((jh,wa)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=require("worker_threads"),r=new t().port1,o=new ArrayBuffer;r.postMessage(o,[o,o])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}wa.exports=globalThis.DOMException});var gn,$c,Vh,Ro=hr(()=>{gn=require("node:fs"),$c=Oe(Ra(),1);So();mr();({stat:Vh}=gn.promises)});var Ta={};ua(Ta,{toFormData:()=>Gc});function Hc(t){let r=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!r)return;let o=r[2]||r[3]||"",i=o.slice(o.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(s,u)=>String.fromCharCode(u)),i}async function Gc(t,r){if(!/multipart/i.test(r))throw new TypeError("Failed to fetch");let o=r.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new vo(o[1]||o[2]),s,u,c,h,m,d,_=[],R=new yt,y=w=>{c+=T.decode(w,{stream:!0})},g=w=>{_.push(w)},S=()=>{let w=new Lt(_,d,{type:m});R.append(h,w)},E=()=>{R.append(h,c)},T=new TextDecoder("utf-8");T.decode(),i.onPartBegin=function(){i.onPartData=y,i.onPartEnd=E,s="",u="",c="",h="",m="",d=null,_.length=0},i.onHeaderField=function(w){s+=T.decode(w,{stream:!0})},i.onHeaderValue=function(w){u+=T.decode(w,{stream:!0})},i.onHeaderEnd=function(){if(u+=T.decode(),s=s.toLowerCase(),s==="content-disposition"){let w=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);w&&(h=w[2]||w[3]||""),d=Hc(u),d&&(i.onPartData=g,i.onPartEnd=S)}else s==="content-type"&&(m=u);u="",s=""};for await(let w of t)i.write(w);return i.end(),R}var xe,z,va,rt,Sn,_n,zc,yr,Mc,Uc,Nc,jc,gt,vo,Ea=hr(()=>{Ro();bn();xe=0,z={START_BOUNDARY:xe++,HEADER_FIELD_START:xe++,HEADER_FIELD:xe++,HEADER_VALUE_START:xe++,HEADER_VALUE:xe++,HEADER_VALUE_ALMOST_DONE:xe++,HEADERS_ALMOST_DONE:xe++,PART_DATA_START:xe++,PART_DATA:xe++,END:xe++},va=1,rt={PART_BOUNDARY:va,LAST_BOUNDARY:va*=2},Sn=10,_n=13,zc=32,yr=45,Mc=58,Uc=97,Nc=122,jc=t=>t|32,gt=()=>{},vo=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=gt,this.onHeaderField=gt,this.onHeadersEnd=gt,this.onHeaderValue=gt,this.onPartBegin=gt,this.onPartData=gt,this.onPartEnd=gt,this.boundaryChars={},r=`\r
--`+r;let o=new Uint8Array(r.length);for(let i=0;i<r.length;i++)o[i]=r.charCodeAt(i),this.boundaryChars[o[i]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=z.START_BOUNDARY}write(r){let o=0,i=r.length,s=this.index,{lookbehind:u,boundary:c,boundaryChars:h,index:m,state:d,flags:_}=this,R=this.boundary.length,y=R-1,g=r.length,S,E,T=P=>{this[P+"Mark"]=o},w=P=>{delete this[P+"Mark"]},x=(P,q,A,V)=>{(q===void 0||q!==A)&&this[P](V&&V.subarray(q,A))},U=(P,q)=>{let A=P+"Mark";A in this&&(q?(x(P,this[A],o,r),delete this[A]):(x(P,this[A],r.length,r),this[A]=0))};for(o=0;o<i;o++)switch(S=r[o],d){case z.START_BOUNDARY:if(m===c.length-2){if(S===yr)_|=rt.LAST_BOUNDARY;else if(S!==_n)return;m++;break}else if(m-1===c.length-2){if(_&rt.LAST_BOUNDARY&&S===yr)d=z.END,_=0;else if(!(_&rt.LAST_BOUNDARY)&&S===Sn)m=0,x("onPartBegin"),d=z.HEADER_FIELD_START;else return;break}S!==c[m+2]&&(m=-2),S===c[m+2]&&m++;break;case z.HEADER_FIELD_START:d=z.HEADER_FIELD,T("onHeaderField"),m=0;case z.HEADER_FIELD:if(S===_n){w("onHeaderField"),d=z.HEADERS_ALMOST_DONE;break}if(m++,S===yr)break;if(S===Mc){if(m===1)return;U("onHeaderField",!0),d=z.HEADER_VALUE_START;break}if(E=jc(S),E<Uc||E>Nc)return;break;case z.HEADER_VALUE_START:if(S===zc)break;T("onHeaderValue"),d=z.HEADER_VALUE;case z.HEADER_VALUE:S===_n&&(U("onHeaderValue",!0),x("onHeaderEnd"),d=z.HEADER_VALUE_ALMOST_DONE);break;case z.HEADER_VALUE_ALMOST_DONE:if(S!==Sn)return;d=z.HEADER_FIELD_START;break;case z.HEADERS_ALMOST_DONE:if(S!==Sn)return;x("onHeadersEnd"),d=z.PART_DATA_START;break;case z.PART_DATA_START:d=z.PART_DATA,T("onPartData");case z.PART_DATA:if(s=m,m===0){for(o+=y;o<g&&!(r[o]in h);)o+=R;o-=y,S=r[o]}if(m<c.length)c[m]===S?(m===0&&U("onPartData",!0),m++):m=0;else if(m===c.length)m++,S===_n?_|=rt.PART_BOUNDARY:S===yr?_|=rt.LAST_BOUNDARY:m=0;else if(m-1===c.length)if(_&rt.PART_BOUNDARY){if(m=0,S===Sn){_&=~rt.PART_BOUNDARY,x("onPartEnd"),x("onPartBegin"),d=z.HEADER_FIELD_START;break}}else _&rt.LAST_BOUNDARY&&S===yr?(x("onPartEnd"),d=z.END,_=0):m=0;if(m>0)u[m-1]=S;else if(s>0){let P=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);x("onPartData",0,s,P),s=0,T("onPartData"),o--}break;case z.END:break;default:throw new Error(`Unexpected state entered: ${d}`)}U("onHeaderField"),U("onHeaderValue"),U("onPartData"),this.index=m,this.state=d,this.flags=_}end(){if(this.state===z.HEADER_FIELD_START&&this.index===0||this.state===z.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==z.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var _s=I((Qm,Ss)=>{Ss.exports=gs;gs.sync=Pf;var bs=require("fs");function Cf(t,r){var o=r.pathExt!==void 0?r.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var i=0;i<o.length;i++){var s=o[i].toLowerCase();if(s&&t.substr(-s.length).toLowerCase()===s)return!0}return!1}function ys(t,r,o){return!t.isSymbolicLink()&&!t.isFile()?!1:Cf(r,o)}function gs(t,r,o){bs.stat(t,function(i,s){o(i,i?!1:ys(s,t,r))})}function Pf(t,r){return ys(bs.statSync(t),t,r)}});var Es=I((Km,Ts)=>{Ts.exports=Rs;Rs.sync=Af;var ws=require("fs");function Rs(t,r,o){ws.stat(t,function(i,s){o(i,i?!1:vs(s,r))})}function Af(t,r){return vs(ws.statSync(t),r)}function vs(t,r){return t.isFile()&&kf(t,r)}function kf(t,r){var o=t.mode,i=t.uid,s=t.gid,u=r.uid!==void 0?r.uid:process.getuid&&process.getuid(),c=r.gid!==void 0?r.gid:process.getgid&&process.getgid(),h=parseInt("100",8),m=parseInt("010",8),d=parseInt("001",8),_=h|m,R=o&d||o&m&&s===c||o&h&&i===u||o&_&&u===0;return R}});var Ps=I((Zm,Cs)=>{var Xm=require("fs"),In;process.platform==="win32"||global.TESTING_WINDOWS?In=_s():In=Es();Cs.exports=Lo;Lo.sync=If;function Lo(t,r,o){if(typeof r=="function"&&(o=r,r={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,s){Lo(t,r||{},function(u,c){u?s(u):i(c)})})}In(t,r||{},function(i,s){i&&(i.code==="EACCES"||r&&r.ignoreErrors)&&(i=null,s=!1),o(i,s)})}function If(t,r){try{return In.sync(t,r||{})}catch(o){if(r&&r.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var Ds=I((Jm,Bs)=>{var zt=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",As=require("path"),Of=zt?";":":",ks=Ps(),Is=t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),Os=(t,r)=>{let o=r.colon||Of,i=t.match(/\//)||zt&&t.match(/\\/)?[""]:[...zt?[process.cwd()]:[],...(r.path||process.env.PATH||"").split(o)],s=zt?r.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",u=zt?s.split(o):[""];return zt&&t.indexOf(".")!==-1&&u[0]!==""&&u.unshift(""),{pathEnv:i,pathExt:u,pathExtExe:s}},xs=(t,r,o)=>{typeof r=="function"&&(o=r,r={}),r||(r={});let{pathEnv:i,pathExt:s,pathExtExe:u}=Os(t,r),c=[],h=d=>new Promise((_,R)=>{if(d===i.length)return r.all&&c.length?_(c):R(Is(t));let y=i[d],g=/^".*"$/.test(y)?y.slice(1,-1):y,S=As.join(g,t),E=!g&&/^\.[\\\/]/.test(t)?t.slice(0,2)+S:S;_(m(E,d,0))}),m=(d,_,R)=>new Promise((y,g)=>{if(R===s.length)return y(h(_+1));let S=s[R];ks(d+S,{pathExt:u},(E,T)=>{if(!E&&T)if(r.all)c.push(d+S);else return y(d+S);return y(m(d,_,R+1))})});return o?h(0).then(d=>o(null,d),o):h(0)},xf=(t,r)=>{r=r||{};let{pathEnv:o,pathExt:i,pathExtExe:s}=Os(t,r),u=[];for(let c=0;c<o.length;c++){let h=o[c],m=/^".*"$/.test(h)?h.slice(1,-1):h,d=As.join(m,t),_=!m&&/^\.[\\\/]/.test(t)?t.slice(0,2)+d:d;for(let R=0;R<i.length;R++){let y=_+i[R];try{if(ks.sync(y,{pathExt:s}))if(r.all)u.push(y);else return y}catch{}}}if(r.all&&u.length)return u;if(r.nothrow)return null;throw Is(t)};Bs.exports=xs;xs.sync=xf});var $o=I((ep,Fo)=>{"use strict";var qs=(t={})=>{let r=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(r).reverse().find(i=>i.toUpperCase()==="PATH")||"Path"};Fo.exports=qs;Fo.exports.default=qs});var $s=I((tp,Fs)=>{"use strict";var Ws=require("path"),Bf=Ds(),Df=$o();function Ls(t,r){let o=t.options.env||process.env,i=process.cwd(),s=t.options.cwd!=null,u=s&&process.chdir!==void 0&&!process.chdir.disabled;if(u)try{process.chdir(t.options.cwd)}catch{}let c;try{c=Bf.sync(t.command,{path:o[Df({env:o})],pathExt:r?Ws.delimiter:void 0})}catch{}finally{u&&process.chdir(i)}return c&&(c=Ws.resolve(s?t.options.cwd:"",c)),c}function qf(t){return Ls(t)||Ls(t,!0)}Fs.exports=qf});var zs=I((rp,Mo)=>{"use strict";var zo=/([()\][%!^"`<>&|;, *?])/g;function Wf(t){return t=t.replace(zo,"^$1"),t}function Lf(t,r){return t=`${t}`,t=t.replace(/(\\*)"/g,'$1$1\\"'),t=t.replace(/(\\*)$/,"$1$1"),t=`"${t}"`,t=t.replace(zo,"^$1"),r&&(t=t.replace(zo,"^$1")),t}Mo.exports.command=Wf;Mo.exports.argument=Lf});var Us=I((np,Ms)=>{"use strict";Ms.exports=/^#!(.*)/});var js=I((op,Ns)=>{"use strict";var Ff=Us();Ns.exports=(t="")=>{let r=t.match(Ff);if(!r)return null;let[o,i]=r[0].replace(/#! ?/,"").split(" "),s=o.split("/").pop();return s==="env"?i:i?`${s} ${i}`:s}});var Gs=I((ip,Hs)=>{"use strict";var Uo=require("fs"),$f=js();function zf(t){let o=Buffer.alloc(150),i;try{i=Uo.openSync(t,"r"),Uo.readSync(i,o,0,150,0),Uo.closeSync(i)}catch{}return $f(o.toString())}Hs.exports=zf});var Ks=I((ap,Qs)=>{"use strict";var Mf=require("path"),Vs=$s(),Ys=zs(),Uf=Gs(),Nf=process.platform==="win32",jf=/\.(?:com|exe)$/i,Hf=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Gf(t){t.file=Vs(t);let r=t.file&&Uf(t.file);return r?(t.args.unshift(t.file),t.command=r,Vs(t)):t.file}function Vf(t){if(!Nf)return t;let r=Gf(t),o=!jf.test(r);if(t.options.forceShell||o){let i=Hf.test(r);t.command=Mf.normalize(t.command),t.command=Ys.command(t.command),t.args=t.args.map(u=>Ys.argument(u,i));let s=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${s}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}function Yf(t,r,o){r&&!Array.isArray(r)&&(o=r,r=null),r=r?r.slice(0):[],o=Object.assign({},o);let i={command:t,args:r,options:o,file:void 0,original:{command:t,args:r}};return o.shell?i:Vf(i)}Qs.exports=Yf});var Js=I((sp,Zs)=>{"use strict";var No=process.platform==="win32";function jo(t,r){return Object.assign(new Error(`${r} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${r} ${t.command}`,path:t.command,spawnargs:t.args})}function Qf(t,r){if(!No)return;let o=t.emit;t.emit=function(i,s){if(i==="exit"){let u=Xs(s,r,"spawn");if(u)return o.call(t,"error",u)}return o.apply(t,arguments)}}function Xs(t,r){return No&&t===1&&!r.file?jo(r.original,"spawn"):null}function Kf(t,r){return No&&t===1&&!r.file?jo(r.original,"spawnSync"):null}Zs.exports={hookChildProcess:Qf,verifyENOENT:Xs,verifyENOENTSync:Kf,notFoundError:jo}});var ru=I((up,Mt)=>{"use strict";var eu=require("child_process"),Ho=Ks(),Go=Js();function tu(t,r,o){let i=Ho(t,r,o),s=eu.spawn(i.command,i.args,i.options);return Go.hookChildProcess(s,i),s}function Xf(t,r,o){let i=Ho(t,r,o),s=eu.spawnSync(i.command,i.args,i.options);return s.error=s.error||Go.verifyENOENTSync(s.status,i),s}Mt.exports=tu;Mt.exports.spawn=tu;Mt.exports.sync=Xf;Mt.exports._parse=Ho;Mt.exports._enoent=Go});var ou=I((lp,nu)=>{"use strict";nu.exports=t=>{let r=typeof t=="string"?`
`:10,o=typeof t=="string"?"\r":13;return t[t.length-1]===r&&(t=t.slice(0,t.length-1)),t[t.length-1]===o&&(t=t.slice(0,t.length-1)),t}});var su=I((cp,Ar)=>{"use strict";var Pr=require("path"),iu=$o(),au=t=>{t={cwd:process.cwd(),path:process.env[iu()],execPath:process.execPath,...t};let r,o=Pr.resolve(t.cwd),i=[];for(;r!==o;)i.push(Pr.join(o,"node_modules/.bin")),r=o,o=Pr.resolve(o,"..");let s=Pr.resolve(t.cwd,t.execPath,"..");return i.push(s),i.concat(t.path).join(Pr.delimiter)};Ar.exports=au;Ar.exports.default=au;Ar.exports.env=t=>{t={env:process.env,...t};let r={...t.env},o=iu({env:r});return t.path=r[o],r[o]=Ar.exports(t),r}});var lu=I((fp,Vo)=>{"use strict";var uu=(t,r)=>{for(let o of Reflect.ownKeys(r))Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o));return t};Vo.exports=uu;Vo.exports.default=uu});var fu=I((dp,xn)=>{"use strict";var Zf=lu(),On=new WeakMap,cu=(t,r={})=>{if(typeof t!="function")throw new TypeError("Expected a function");let o,i=0,s=t.displayName||t.name||"<anonymous>",u=function(...c){if(On.set(u,++i),i===1)o=t.apply(this,c),t=null;else if(r.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return o};return Zf(u,t),On.set(u,i),u};xn.exports=cu;xn.exports.default=cu;xn.exports.callCount=t=>{if(!On.has(t))throw new Error(`The given function \`${t.name}\` is not wrapped by the \`onetime\` package`);return On.get(t)}});var du=I(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.SIGNALS=void 0;var Jf=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];Bn.SIGNALS=Jf});var Yo=I(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.SIGRTMAX=Ut.getRealtimeSignals=void 0;var ed=function(){let t=mu-hu+1;return Array.from({length:t},td)};Ut.getRealtimeSignals=ed;var td=function(t,r){return{name:`SIGRT${r+1}`,number:hu+r,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},hu=34,mu=64;Ut.SIGRTMAX=mu});var pu=I(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});Dn.getSignals=void 0;var rd=require("os"),nd=du(),od=Yo(),id=function(){let t=(0,od.getRealtimeSignals)();return[...nd.SIGNALS,...t].map(ad)};Dn.getSignals=id;var ad=function({name:t,number:r,description:o,action:i,forced:s=!1,standard:u}){let{signals:{[t]:c}}=rd.constants,h=c!==void 0;return{name:t,number:h?c:r,description:o,supported:h,action:i,forced:s,standard:u}}});var yu=I(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.signalsByNumber=Nt.signalsByName=void 0;var sd=require("os"),bu=pu(),ud=Yo(),ld=function(){return(0,bu.getSignals)().reduce(cd,{})},cd=function(t,{name:r,number:o,description:i,supported:s,action:u,forced:c,standard:h}){return{...t,[r]:{name:r,number:o,description:i,supported:s,action:u,forced:c,standard:h}}},fd=ld();Nt.signalsByName=fd;var dd=function(){let t=(0,bu.getSignals)(),r=ud.SIGRTMAX+1,o=Array.from({length:r},(i,s)=>hd(s,t));return Object.assign({},...o)},hd=function(t,r){let o=md(t,r);if(o===void 0)return{};let{name:i,description:s,supported:u,action:c,forced:h,standard:m}=o;return{[t]:{name:i,number:t,description:s,supported:u,action:c,forced:h,standard:m}}},md=function(t,r){let o=r.find(({name:i})=>sd.constants.signals[i]===t);return o!==void 0?o:r.find(i=>i.number===t)},pd=dd();Nt.signalsByNumber=pd});var Su=I((yp,gu)=>{"use strict";var{signalsByName:bd}=yu(),yd=({timedOut:t,timeout:r,errorCode:o,signal:i,signalDescription:s,exitCode:u,isCanceled:c})=>t?`timed out after ${r} milliseconds`:c?"was canceled":o!==void 0?`failed with ${o}`:i!==void 0?`was killed with ${i} (${s})`:u!==void 0?`failed with exit code ${u}`:"failed",gd=({stdout:t,stderr:r,all:o,error:i,signal:s,exitCode:u,command:c,escapedCommand:h,timedOut:m,isCanceled:d,killed:_,parsed:{options:{timeout:R}}})=>{u=u===null?void 0:u,s=s===null?void 0:s;let y=s===void 0?void 0:bd[s].description,g=i&&i.code,E=`Command ${yd({timedOut:m,timeout:R,errorCode:g,signal:s,signalDescription:y,exitCode:u,isCanceled:d})}: ${c}`,T=Object.prototype.toString.call(i)==="[object Error]",w=T?`${E}
${i.message}`:E,x=[w,r,t].filter(Boolean).join(`
`);return T?(i.originalMessage=i.message,i.message=x):i=new Error(x),i.shortMessage=w,i.command=c,i.escapedCommand=h,i.exitCode=u,i.signal=s,i.signalDescription=y,i.stdout=t,i.stderr=r,o!==void 0&&(i.all=o),"bufferedData"in i&&delete i.bufferedData,i.failed=!0,i.timedOut=!!m,i.isCanceled=d,i.killed=_&&!m,i};gu.exports=gd});var wu=I((gp,Qo)=>{"use strict";var qn=["stdin","stdout","stderr"],Sd=t=>qn.some(r=>t[r]!==void 0),_u=t=>{if(!t)return;let{stdio:r}=t;if(r===void 0)return qn.map(i=>t[i]);if(Sd(t))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${qn.map(i=>`\`${i}\``).join(", ")}`);if(typeof r=="string")return r;if(!Array.isArray(r))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof r}\``);let o=Math.max(r.length,qn.length);return Array.from({length:o},(i,s)=>r[s])};Qo.exports=_u;Qo.exports.node=t=>{let r=_u(t);return r==="ipc"?"ipc":r===void 0||typeof r=="string"?[r,r,r,"ipc"]:r.includes("ipc")?r:[...r,"ipc"]}});var Ru=I((Sp,Wn)=>{Wn.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Wn.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Wn.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Pu=I((_p,Gt)=>{var j=global.process,vt=function(t){return t&&typeof t=="object"&&typeof t.removeListener=="function"&&typeof t.emit=="function"&&typeof t.reallyExit=="function"&&typeof t.listeners=="function"&&typeof t.kill=="function"&&typeof t.pid=="number"&&typeof t.on=="function"};vt(j)?(vu=require("assert"),jt=Ru(),Tu=/^win/i.test(j.platform),kr=require("events"),typeof kr!="function"&&(kr=kr.EventEmitter),j.__signal_exit_emitter__?X=j.__signal_exit_emitter__:(X=j.__signal_exit_emitter__=new kr,X.count=0,X.emitted={}),X.infinite||(X.setMaxListeners(1/0),X.infinite=!0),Gt.exports=function(t,r){if(vt(global.process)){vu.equal(typeof t,"function","a callback must be provided for exit handler"),Ht===!1&&Ko();var o="exit";r&&r.alwaysLast&&(o="afterexit");var i=function(){X.removeListener(o,t),X.listeners("exit").length===0&&X.listeners("afterexit").length===0&&Ln()};return X.on(o,t),i}},Ln=function(){!Ht||!vt(global.process)||(Ht=!1,jt.forEach(function(r){try{j.removeListener(r,Fn[r])}catch{}}),j.emit=$n,j.reallyExit=Xo,X.count-=1)},Gt.exports.unload=Ln,Tt=function(r,o,i){X.emitted[r]||(X.emitted[r]=!0,X.emit(r,o,i))},Fn={},jt.forEach(function(t){Fn[t]=function(){if(vt(global.process)){var o=j.listeners(t);o.length===X.count&&(Ln(),Tt("exit",null,t),Tt("afterexit",null,t),Tu&&t==="SIGHUP"&&(t="SIGINT"),j.kill(j.pid,t))}}}),Gt.exports.signals=function(){return jt},Ht=!1,Ko=function(){Ht||!vt(global.process)||(Ht=!0,X.count+=1,jt=jt.filter(function(r){try{return j.on(r,Fn[r]),!0}catch{return!1}}),j.emit=Cu,j.reallyExit=Eu)},Gt.exports.load=Ko,Xo=j.reallyExit,Eu=function(r){vt(global.process)&&(j.exitCode=r||0,Tt("exit",j.exitCode,null),Tt("afterexit",j.exitCode,null),Xo.call(j,j.exitCode))},$n=j.emit,Cu=function(r,o){if(r==="exit"&&vt(global.process)){o!==void 0&&(j.exitCode=o);var i=$n.apply(this,arguments);return Tt("exit",j.exitCode,null),Tt("afterexit",j.exitCode,null),i}else return $n.apply(this,arguments)}):Gt.exports=function(){};var vu,jt,Tu,kr,X,Ln,Tt,Fn,Ht,Ko,Xo,Eu,$n,Cu});var ku=I((wp,Au)=>{"use strict";var _d=require("os"),wd=Pu(),Rd=1e3*5,vd=(t,r="SIGTERM",o={})=>{let i=t(r);return Td(t,r,o,i),i},Td=(t,r,o,i)=>{if(!Ed(r,o,i))return;let s=Pd(o),u=setTimeout(()=>{t("SIGKILL")},s);u.unref&&u.unref()},Ed=(t,{forceKillAfterTimeout:r},o)=>Cd(t)&&r!==!1&&o,Cd=t=>t===_d.constants.signals.SIGTERM||typeof t=="string"&&t.toUpperCase()==="SIGTERM",Pd=({forceKillAfterTimeout:t=!0})=>{if(t===!0)return Rd;if(!Number.isFinite(t)||t<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`);return t},Ad=(t,r)=>{t.kill()&&(r.isCanceled=!0)},kd=(t,r,o)=>{t.kill(r),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:r}))},Id=(t,{timeout:r,killSignal:o="SIGTERM"},i)=>{if(r===0||r===void 0)return i;let s,u=new Promise((h,m)=>{s=setTimeout(()=>{kd(t,o,m)},r)}),c=i.finally(()=>{clearTimeout(s)});return Promise.race([u,c])},Od=({timeout:t})=>{if(t!==void 0&&(!Number.isFinite(t)||t<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${t}\` (${typeof t})`)},xd=async(t,{cleanup:r,detached:o},i)=>{if(!r||o)return i;let s=wd(()=>{t.kill()});return i.finally(()=>{s()})};Au.exports={spawnedKill:vd,spawnedCancel:Ad,setupTimeout:Id,validateTimeout:Od,setExitHandler:xd}});var Ou=I((Rp,Iu)=>{"use strict";var qe=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";qe.writable=t=>qe(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";qe.readable=t=>qe(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";qe.duplex=t=>qe.writable(t)&&qe.readable(t);qe.transform=t=>qe.duplex(t)&&typeof t._transform=="function";Iu.exports=qe});var Bu=I((vp,xu)=>{"use strict";var{PassThrough:Bd}=require("stream");xu.exports=t=>{t={...t};let{array:r}=t,{encoding:o}=t,i=o==="buffer",s=!1;r?s=!(o||i):o=o||"utf8",i&&(o=null);let u=new Bd({objectMode:s});o&&u.setEncoding(o);let c=0,h=[];return u.on("data",m=>{h.push(m),s?c=h.length:c+=m.length}),u.getBufferedValue=()=>r?h:i?Buffer.concat(h,c):h.join(""),u.getBufferedLength=()=>c,u}});var Du=I((Tp,Ir)=>{"use strict";var{constants:Dd}=require("buffer"),qd=require("stream"),{promisify:Wd}=require("util"),Ld=Bu(),Fd=Wd(qd.pipeline),zn=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Zo(t,r){if(!t)throw new Error("Expected a stream");r={maxBuffer:1/0,...r};let{maxBuffer:o}=r,i=Ld(r);return await new Promise((s,u)=>{let c=h=>{h&&i.getBufferedLength()<=Dd.MAX_LENGTH&&(h.bufferedData=i.getBufferedValue()),u(h)};(async()=>{try{await Fd(t,i),s()}catch(h){c(h)}})(),i.on("data",()=>{i.getBufferedLength()>o&&c(new zn)})}),i.getBufferedValue()}Ir.exports=Zo;Ir.exports.buffer=(t,r)=>Zo(t,{...r,encoding:"buffer"});Ir.exports.array=(t,r)=>Zo(t,{...r,array:!0});Ir.exports.MaxBufferError=zn});var Wu=I((Ep,qu)=>{"use strict";var{PassThrough:$d}=require("stream");qu.exports=function(){var t=[],r=new $d({objectMode:!0});return r.setMaxListeners(0),r.add=o,r.isEmpty=i,r.on("unpipe",s),Array.prototype.slice.call(arguments).forEach(o),r;function o(u){return Array.isArray(u)?(u.forEach(o),this):(t.push(u),u.once("end",s.bind(null,u)),u.once("error",r.emit.bind(r,"error")),u.pipe(r,{end:!1}),this)}function i(){return t.length==0}function s(u){t=t.filter(function(c){return c!==u}),!t.length&&r.readable&&r.end()}}});var zu=I((Cp,$u)=>{"use strict";var Fu=Ou(),Lu=Du(),zd=Wu(),Md=(t,r)=>{r===void 0||t.stdin===void 0||(Fu(r)?r.pipe(t.stdin):t.stdin.end(r))},Ud=(t,{all:r})=>{if(!r||!t.stdout&&!t.stderr)return;let o=zd();return t.stdout&&o.add(t.stdout),t.stderr&&o.add(t.stderr),o},Jo=async(t,r)=>{if(t){t.destroy();try{return await r}catch(o){return o.bufferedData}}},ei=(t,{encoding:r,buffer:o,maxBuffer:i})=>{if(!(!t||!o))return r?Lu(t,{encoding:r,maxBuffer:i}):Lu.buffer(t,{maxBuffer:i})},Nd=async({stdout:t,stderr:r,all:o},{encoding:i,buffer:s,maxBuffer:u},c)=>{let h=ei(t,{encoding:i,buffer:s,maxBuffer:u}),m=ei(r,{encoding:i,buffer:s,maxBuffer:u}),d=ei(o,{encoding:i,buffer:s,maxBuffer:u*2});try{return await Promise.all([c,h,m,d])}catch(_){return Promise.all([{error:_,signal:_.signal,timedOut:_.timedOut},Jo(t,h),Jo(r,m),Jo(o,d)])}},jd=({input:t})=>{if(Fu(t))throw new TypeError("The `input` option cannot be a stream in sync mode")};$u.exports={handleInput:Md,makeAllStream:Ud,getSpawnedResult:Nd,validateInputSync:jd}});var Uu=I((Pp,Mu)=>{"use strict";var Hd=(async()=>{})().constructor.prototype,Gd=["then","catch","finally"].map(t=>[t,Reflect.getOwnPropertyDescriptor(Hd,t)]),Vd=(t,r)=>{for(let[o,i]of Gd){let s=typeof r=="function"?(...u)=>Reflect.apply(i.value,r(),u):i.value.bind(r);Reflect.defineProperty(t,o,{...i,value:s})}return t},Yd=t=>new Promise((r,o)=>{t.on("exit",(i,s)=>{r({exitCode:i,signal:s})}),t.on("error",i=>{o(i)}),t.stdin&&t.stdin.on("error",i=>{o(i)})});Mu.exports={mergePromise:Vd,getSpawnedPromise:Yd}});var Hu=I((Ap,ju)=>{"use strict";var Nu=(t,r=[])=>Array.isArray(r)?[t,...r]:[t],Qd=/^[\w.-]+$/,Kd=/"/g,Xd=t=>typeof t!="string"||Qd.test(t)?t:`"${t.replace(Kd,'\\"')}"`,Zd=(t,r)=>Nu(t,r).join(" "),Jd=(t,r)=>Nu(t,r).map(o=>Xd(o)).join(" "),eh=/ +/g,th=t=>{let r=[];for(let o of t.trim().split(eh)){let i=r[r.length-1];i&&i.endsWith("\\")?r[r.length-1]=`${i.slice(0,-1)} ${o}`:r.push(o)}return r};ju.exports={joinCommand:Zd,getEscapedCommand:Jd,parseCommand:th}});var Zu=I((kp,Vt)=>{"use strict";var rh=require("path"),ti=require("child_process"),nh=ru(),oh=ou(),ih=su(),ah=fu(),Mn=Su(),Vu=wu(),{spawnedKill:sh,spawnedCancel:uh,setupTimeout:lh,validateTimeout:ch,setExitHandler:fh}=ku(),{handleInput:dh,getSpawnedResult:hh,makeAllStream:mh,validateInputSync:ph}=zu(),{mergePromise:Gu,getSpawnedPromise:bh}=Uu(),{joinCommand:Yu,parseCommand:Qu,getEscapedCommand:Ku}=Hu(),yh=1e3*1e3*100,gh=({env:t,extendEnv:r,preferLocal:o,localDir:i,execPath:s})=>{let u=r?{...process.env,...t}:t;return o?ih.env({env:u,cwd:i,execPath:s}):u},Xu=(t,r,o={})=>{let i=nh._parse(t,r,o);return t=i.command,r=i.args,o=i.options,o={maxBuffer:yh,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...o},o.env=gh(o),o.stdio=Vu(o),process.platform==="win32"&&rh.basename(t,".exe")==="cmd"&&r.unshift("/q"),{file:t,args:r,options:o,parsed:i}},Or=(t,r,o)=>typeof r!="string"&&!Buffer.isBuffer(r)?o===void 0?void 0:"":t.stripFinalNewline?oh(r):r,Un=(t,r,o)=>{let i=Xu(t,r,o),s=Yu(t,r),u=Ku(t,r);ch(i.options);let c;try{c=ti.spawn(i.file,i.args,i.options)}catch(g){let S=new ti.ChildProcess,E=Promise.reject(Mn({error:g,stdout:"",stderr:"",all:"",command:s,escapedCommand:u,parsed:i,timedOut:!1,isCanceled:!1,killed:!1}));return Gu(S,E)}let h=bh(c),m=lh(c,i.options,h),d=fh(c,i.options,m),_={isCanceled:!1};c.kill=sh.bind(null,c.kill.bind(c)),c.cancel=uh.bind(null,c,_);let y=ah(async()=>{let[{error:g,exitCode:S,signal:E,timedOut:T},w,x,U]=await hh(c,i.options,d),P=Or(i.options,w),q=Or(i.options,x),A=Or(i.options,U);if(g||S!==0||E!==null){let V=Mn({error:g,exitCode:S,signal:E,stdout:P,stderr:q,all:A,command:s,escapedCommand:u,parsed:i,timedOut:T,isCanceled:_.isCanceled,killed:c.killed});if(!i.options.reject)return V;throw V}return{command:s,escapedCommand:u,exitCode:0,stdout:P,stderr:q,all:A,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return dh(c,i.options.input),c.all=mh(c,i.options),Gu(c,y)};Vt.exports=Un;Vt.exports.sync=(t,r,o)=>{let i=Xu(t,r,o),s=Yu(t,r),u=Ku(t,r);ph(i.options);let c;try{c=ti.spawnSync(i.file,i.args,i.options)}catch(d){throw Mn({error:d,stdout:"",stderr:"",all:"",command:s,escapedCommand:u,parsed:i,timedOut:!1,isCanceled:!1,killed:!1})}let h=Or(i.options,c.stdout,c.error),m=Or(i.options,c.stderr,c.error);if(c.error||c.status!==0||c.signal!==null){let d=Mn({stdout:h,stderr:m,error:c.error,signal:c.signal,exitCode:c.status,command:s,escapedCommand:u,parsed:i,timedOut:c.error&&c.error.code==="ETIMEDOUT",isCanceled:!1,killed:c.signal!==null});if(!i.options.reject)return d;throw d}return{command:s,escapedCommand:u,exitCode:0,stdout:h,stderr:m,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};Vt.exports.command=(t,r)=>{let[o,...i]=Qu(t);return Un(o,i,r)};Vt.exports.commandSync=(t,r)=>{let[o,...i]=Qu(t);return Un.sync(o,i,r)};Vt.exports.node=(t,r,o={})=>{r&&!Array.isArray(r)&&typeof r=="object"&&(o=r,r=[]);let i=Vu.node(o),s=process.execArgv.filter(h=>!h.startsWith("--inspect")),{nodePath:u=process.execPath,nodeOptions:c=s}=o;return Un(u,[...c,t,...Array.isArray(r)?r:[]],{...o,stdin:void 0,stdout:void 0,stderr:void 0,stdio:i,shell:!1})}});var Eh={};ua(Eh,{default:()=>Th});module.exports=Oc(Eh);var we=require("@raycast/api"),ja=require("path"),Ha=require("os");var Pn=require("@raycast/api");var za=Oe(require("node:http"),1),Ma=Oe(require("node:https"),1),_t=Oe(require("node:zlib"),1),he=Oe(require("node:stream"),1),Sr=require("node:buffer");function xc(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let r=t.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let o=t.substring(5,r).split(";"),i="",s=!1,u=o[0]||"text/plain",c=u;for(let _=1;_<o.length;_++)o[_]==="base64"?s=!0:(c+=`;${o[_]}`,o[_].indexOf("charset=")===0&&(i=o[_].substring(8)));!o[0]&&!i.length&&(c+=";charset=US-ASCII",i="US-ASCII");let h=s?"base64":"ascii",m=unescape(t.substring(r+1)),d=Buffer.from(m,h);return d.type=u,d.typeFull=c,d.charset=i,d}var ca=xc;var ge=Oe(require("node:stream"),1),He=require("node:util"),de=require("node:buffer");mr();bn();var je=class extends Error{constructor(r,o){super(r),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var se=class extends je{constructor(r,o,i){super(r,o),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var yn=Symbol.toStringTag,wo=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[yn]==="URLSearchParams",br=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[yn]),Sa=t=>typeof t=="object"&&(t[yn]==="AbortSignal"||t[yn]==="EventTarget"),_a=(t,r)=>{let o=new URL(r).hostname,i=new URL(t).hostname;return o===i||o.endsWith(`.${i}`)};var Vc=(0,He.promisify)(ge.default.pipeline),ue=Symbol("Body internals"),Be=class{constructor(r,{size:o=0}={}){let i=null;r===null?r=null:wo(r)?r=de.Buffer.from(r.toString()):br(r)||de.Buffer.isBuffer(r)||(He.types.isAnyArrayBuffer(r)?r=de.Buffer.from(r):ArrayBuffer.isView(r)?r=de.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof ge.default||(r instanceof yt?(r=ga(r),i=r.type.split("=")[1]):r=de.Buffer.from(String(r))));let s=r;de.Buffer.isBuffer(r)?s=ge.default.Readable.from(r):br(r)&&(s=ge.default.Readable.from(r.stream())),this[ue]={body:r,stream:s,boundary:i,disturbed:!1,error:null},this.size=o,r instanceof ge.default&&r.on("error",u=>{let c=u instanceof je?u:new se(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[ue].error=c})}get body(){return this[ue].stream}get bodyUsed(){return this[ue].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:o,byteLength:i}=await wn(this);return r.slice(o,o+i)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let i=new yt,s=new URLSearchParams(await this.text());for(let[u,c]of s)i.append(u,c);return i}let{toFormData:o}=await Promise.resolve().then(()=>(Ea(),Ta));return o(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[ue].body&&this[ue].body.type||"",o=await this.arrayBuffer();return new Ne([o],{type:r})}async json(){let r=await wn(this);return JSON.parse(r.toString())}async text(){return(await wn(this)).toString()}buffer(){return wn(this)}};Be.prototype.buffer=(0,He.deprecate)(Be.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Be.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,He.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function wn(t){if(t[ue].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[ue].disturbed=!0,t[ue].error)throw t[ue].error;let{body:r}=t;if(r===null)return de.Buffer.alloc(0);if(!(r instanceof ge.default))return de.Buffer.alloc(0);let o=[],i=0;try{for await(let s of r){if(t.size>0&&i+s.length>t.size){let u=new se(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw r.destroy(u),u}i+=s.length,o.push(s)}}catch(s){throw s instanceof je?s:new se(`Invalid response body while trying to fetch ${t.url}: ${s.message}`,"system",s)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return o.every(s=>typeof s=="string")?de.Buffer.from(o.join("")):de.Buffer.concat(o,i)}catch(s){throw new se(`Could not create Buffer from response body for ${t.url}: ${s.message}`,"system",s)}else throw new se(`Premature close of server response while trying to fetch ${t.url}`)}var Ft=(t,r)=>{let o,i,{body:s}=t[ue];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof ge.default&&typeof s.getBoundary!="function"&&(o=new ge.PassThrough({highWaterMark:r}),i=new ge.PassThrough({highWaterMark:r}),s.pipe(o),s.pipe(i),t[ue].stream=o,s=i),s},Yc=(0,He.deprecate)(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Rn=(t,r)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":wo(t)?"application/x-www-form-urlencoded;charset=UTF-8":br(t)?t.type||null:de.Buffer.isBuffer(t)||He.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof yt?`multipart/form-data; boundary=${r[ue].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${Yc(t)}`:t instanceof ge.default?null:"text/plain;charset=UTF-8",Ca=t=>{let{body:r}=t[ue];return r===null?0:br(r)?r.size:de.Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},Pa=async(t,{body:r})=>{r===null?t.end():await Vc(r,t)};var To=require("node:util"),gr=Oe(require("node:http"),1),vn=typeof gr.default.validateHeaderName=="function"?gr.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let r=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},Eo=typeof gr.default.validateHeaderValue=="function"?gr.default.validateHeaderValue:(t,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let o=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},Se=class t extends URLSearchParams{constructor(r){let o=[];if(r instanceof t){let i=r.raw();for(let[s,u]of Object.entries(i))o.push(...u.map(c=>[s,c]))}else if(r!=null)if(typeof r=="object"&&!To.types.isBoxedPrimitive(r)){let i=r[Symbol.iterator];if(i==null)o.push(...Object.entries(r));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");o=[...r].map(s=>{if(typeof s!="object"||To.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([i,s])=>(vn(i),Eo(i,String(s)),[String(i).toLowerCase(),String(s)])):void 0,super(o),new Proxy(this,{get(i,s,u){switch(s){case"append":case"set":return(c,h)=>(vn(c),Eo(c,String(h)),URLSearchParams.prototype[s].call(i,String(c).toLowerCase(),String(h)));case"delete":case"has":case"getAll":return c=>(vn(c),URLSearchParams.prototype[s].call(i,String(c).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,s,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let o=this.getAll(r);if(o.length===0)return null;let i=o.join(", ");return/^content-encoding$/i.test(r)&&(i=i.toLowerCase()),i}forEach(r,o=void 0){for(let i of this.keys())Reflect.apply(r,o,[this.get(i),i,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,o)=>(r[o]=this.getAll(o),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,o)=>{let i=this.getAll(o);return o==="host"?r[o]=i[0]:r[o]=i.length>1?i:i[0],r},{})}};Object.defineProperties(Se.prototype,["get","entries","forEach","values"].reduce((t,r)=>(t[r]={enumerable:!0},t),{}));function Aa(t=[]){return new Se(t.reduce((r,o,i,s)=>(i%2===0&&r.push(s.slice(i,i+2)),r),[]).filter(([r,o])=>{try{return vn(r),Eo(r,String(o)),!0}catch{return!1}}))}var Qc=new Set([301,302,303,307,308]),Tn=t=>Qc.has(t);var Ce=Symbol("Response internals"),_e=class t extends Be{constructor(r=null,o={}){super(r,o);let i=o.status!=null?o.status:200,s=new Se(o.headers);if(r!==null&&!s.has("Content-Type")){let u=Rn(r,this);u&&s.append("Content-Type",u)}this[Ce]={type:"default",url:o.url,status:i,statusText:o.statusText||"",headers:s,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[Ce].type}get url(){return this[Ce].url||""}get status(){return this[Ce].status}get ok(){return this[Ce].status>=200&&this[Ce].status<300}get redirected(){return this[Ce].counter>0}get statusText(){return this[Ce].statusText}get headers(){return this[Ce].headers}get highWaterMark(){return this[Ce].highWaterMark}clone(){return new t(Ft(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,o=302){if(!Tn(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(r).toString()},status:o})}static error(){let r=new t(null,{status:0,statusText:""});return r[Ce].type="error",r}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(_e.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var La=require("node:url"),Fa=require("node:util");var ka=t=>{if(t.search)return t.search;let r=t.href.length-1,o=t.hash||(t.href[r]==="#"?"#":"");return t.href[r-o.length]==="?"?"?":""};var Oa=require("node:net");function Ia(t,r=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",r&&(t.pathname="",t.search=""),t)}var xa=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Ba="strict-origin-when-cross-origin";function Da(t){if(!xa.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function Kc(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let r=t.host.replace(/(^\[)|(]$)/g,""),o=(0,Oa.isIP)(r);return o===4&&/^127\./.test(r)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r)?!0:/^(.+\.)*localhost$/.test(t.host)?!1:t.protocol==="file:"}function $t(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:Kc(t)}function qa(t,{referrerURLCallback:r,referrerOriginCallback:o}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let i=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let s=t.referrer,u=Ia(s),c=Ia(s,!0);u.toString().length>4096&&(u=c),r&&(u=r(u)),o&&(c=o(c));let h=new URL(t.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return c;case"unsafe-url":return u;case"strict-origin":return $t(u)&&!$t(h)?"no-referrer":c.toString();case"strict-origin-when-cross-origin":return u.origin===h.origin?u:$t(u)&&!$t(h)?"no-referrer":c;case"same-origin":return u.origin===h.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===h.origin?u:c;case"no-referrer-when-downgrade":return $t(u)&&!$t(h)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function Wa(t){let r=(t.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let i of r)i&&xa.has(i)&&(o=i);return o}var K=Symbol("Request internals"),En=t=>typeof t=="object"&&typeof t[K]=="object",Xc=(0,Fa.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),St=class t extends Be{constructor(r,o={}){let i;if(En(r)?i=new URL(r.url):(i=new URL(r),r={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentails.`);let s=o.method||r.method||"GET";if(s=s.toUpperCase(),"data"in o&&Xc(),(o.body!=null||En(r)&&r.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=o.body?o.body:En(r)&&r.body!==null?Ft(r):null;super(u,{size:o.size||r.size||0});let c=new Se(o.headers||r.headers||{});if(u!==null&&!c.has("Content-Type")){let d=Rn(u,this);d&&c.set("Content-Type",d)}let h=En(r)?r.signal:null;if("signal"in o&&(h=o.signal),h!=null&&!Sa(h))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let m=o.referrer==null?r.referrer:o.referrer;if(m==="")m="no-referrer";else if(m){let d=new URL(m);m=/^about:(\/\/)?client$/.test(d)?"client":d}else m=void 0;this[K]={method:s,redirect:o.redirect||r.redirect||"follow",headers:c,parsedURL:i,signal:h,referrer:m},this.follow=o.follow===void 0?r.follow===void 0?20:r.follow:o.follow,this.compress=o.compress===void 0?r.compress===void 0?!0:r.compress:o.compress,this.counter=o.counter||r.counter||0,this.agent=o.agent||r.agent,this.highWaterMark=o.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||r.referrerPolicy||""}get method(){return this[K].method}get url(){return(0,La.format)(this[K].parsedURL)}get headers(){return this[K].headers}get redirect(){return this[K].redirect}get signal(){return this[K].signal}get referrer(){if(this[K].referrer==="no-referrer")return"";if(this[K].referrer==="client")return"about:client";if(this[K].referrer)return this[K].referrer.toString()}get referrerPolicy(){return this[K].referrerPolicy}set referrerPolicy(r){this[K].referrerPolicy=Da(r)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(St.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var $a=t=>{let{parsedURL:r}=t[K],o=new Se(t[K].headers);o.has("Accept")||o.set("Accept","*/*");let i=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(i="0"),t.body!==null){let h=Ca(t);typeof h=="number"&&!Number.isNaN(h)&&(i=String(h))}i&&o.set("Content-Length",i),t.referrerPolicy===""&&(t.referrerPolicy=Ba),t.referrer&&t.referrer!=="no-referrer"?t[K].referrer=qa(t):t[K].referrer="no-referrer",t[K].referrer instanceof URL&&o.set("Referer",t.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),t.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip,deflate,br");let{agent:s}=t;typeof s=="function"&&(s=s(r)),!o.has("Connection")&&!s&&o.set("Connection","close");let u=ka(r),c={path:r.pathname+u,method:t.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:s};return{parsedURL:r,options:c}};var Cn=class extends je{constructor(r,o="aborted"){super(r,o)}};bn();Ro();var Zc=new Set(["data:","http:","https:"]);async function wt(t,r){return new Promise((o,i)=>{let s=new St(t,r),{parsedURL:u,options:c}=$a(s);if(!Zc.has(u.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let S=ca(s.url),E=new _e(S,{headers:{"Content-Type":S.typeFull}});o(E);return}let h=(u.protocol==="https:"?Ma.default:za.default).request,{signal:m}=s,d=null,_=()=>{let S=new Cn("The operation was aborted.");i(S),s.body&&s.body instanceof he.default.Readable&&s.body.destroy(S),!(!d||!d.body)&&d.body.emit("error",S)};if(m&&m.aborted){_();return}let R=()=>{_(),g()},y=h(u.toString(),c);m&&m.addEventListener("abort",R);let g=()=>{y.abort(),m&&m.removeEventListener("abort",R)};y.on("error",S=>{i(new se(`request to ${s.url} failed, reason: ${S.message}`,"system",S)),g()}),Jc(y,S=>{d.body.destroy(S)}),process.version<"v14"&&y.on("socket",S=>{let E;S.prependListener("end",()=>{E=S._eventsCount}),S.prependListener("close",T=>{if(d&&E<S._eventsCount&&!T){let w=new Error("Premature close");w.code="ERR_STREAM_PREMATURE_CLOSE",d.body.emit("error",w)}})}),y.on("response",S=>{y.setTimeout(0);let E=Aa(S.rawHeaders);if(Tn(S.statusCode)){let P=E.get("Location"),q=null;try{q=P===null?null:new URL(P,s.url)}catch{if(s.redirect!=="manual"){i(new se(`uri requested responds with an invalid redirect URL: ${P}`,"invalid-redirect")),g();return}}switch(s.redirect){case"error":i(new se(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),g();return;case"manual":break;case"follow":{if(q===null)break;if(s.counter>=s.follow){i(new se(`maximum redirect reached at: ${s.url}`,"max-redirect")),g();return}let A={headers:new Se(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:Ft(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!_a(s.url,q))for(let Z of["authorization","www-authenticate","cookie","cookie2"])A.headers.delete(Z);if(S.statusCode!==303&&s.body&&r.body instanceof he.default.Readable){i(new se("Cannot follow redirect with body being a readable stream","unsupported-redirect")),g();return}(S.statusCode===303||(S.statusCode===301||S.statusCode===302)&&s.method==="POST")&&(A.method="GET",A.body=void 0,A.headers.delete("content-length"));let V=Wa(E);V&&(A.referrerPolicy=V),o(wt(new St(q,A))),g();return}default:return i(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}m&&S.once("end",()=>{m.removeEventListener("abort",R)});let T=(0,he.pipeline)(S,new he.PassThrough,P=>{P&&i(P)});process.version<"v12.10"&&S.on("aborted",R);let w={url:s.url,status:S.statusCode,statusText:S.statusMessage,headers:E,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},x=E.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||x===null||S.statusCode===204||S.statusCode===304){d=new _e(T,w),o(d);return}let U={flush:_t.default.Z_SYNC_FLUSH,finishFlush:_t.default.Z_SYNC_FLUSH};if(x==="gzip"||x==="x-gzip"){T=(0,he.pipeline)(T,_t.default.createGunzip(U),P=>{P&&i(P)}),d=new _e(T,w),o(d);return}if(x==="deflate"||x==="x-deflate"){let P=(0,he.pipeline)(S,new he.PassThrough,q=>{q&&i(q)});P.once("data",q=>{(q[0]&15)===8?T=(0,he.pipeline)(T,_t.default.createInflate(),A=>{A&&i(A)}):T=(0,he.pipeline)(T,_t.default.createInflateRaw(),A=>{A&&i(A)}),d=new _e(T,w),o(d)}),P.once("end",()=>{d||(d=new _e(T,w),o(d))});return}if(x==="br"){T=(0,he.pipeline)(T,_t.default.createBrotliDecompress(),P=>{P&&i(P)}),d=new _e(T,w),o(d);return}d=new _e(T,w),o(d)}),Pa(y,s).catch(i)})}function Jc(t,r){let o=Sr.Buffer.from(`0\r
\r
`),i=!1,s=!1,u;t.on("response",c=>{let{headers:h}=c;i=h["transfer-encoding"]==="chunked"&&!h["content-length"]}),t.on("socket",c=>{let h=()=>{if(i&&!s){let m=new Error("Premature close");m.code="ERR_STREAM_PREMATURE_CLOSE",r(m)}};c.prependListener("close",h),t.on("abort",()=>{c.removeListener("close",h)}),c.on("data",m=>{s=Sr.Buffer.compare(m.slice(-5),o)===0,!s&&u&&(s=Sr.Buffer.compare(u.slice(-3),o.slice(0,3))===0&&Sr.Buffer.compare(m.slice(-2),o.slice(3))===0),u=m})})}var _r=require("@raycast/api"),{accessKey:Ua,secretKey:ef}=(0,_r.getPreferenceValues)(),nt=new _r.OAuth.PKCEClient({redirectMethod:_r.OAuth.RedirectMethod.Web,providerName:"Unsplash",providerIcon:"unsplash-logo.png",description:"Login to your Unsplash account."}),Na=async()=>{let t=await nt.authorizationRequest({endpoint:"https://unsplash.com/oauth/authorize",clientId:Ua,scope:"public read_user write_likes"}),{authorizationCode:r}=await nt.authorize(t),o=new URLSearchParams;o.append("client_id",Ua),o.append("client_secret",ef),o.append("redirect_uri",t.redirectURI),o.append("code",r),o.append("grant_type","authorization_code");let i=await wt("https://unsplash.com/oauth/token",{method:"POST",body:o});if(!i.ok)throw console.error("fetch tokens error:",await i.text()),new Error(i.statusText);await nt.setTokens(await i.json())};var{accessKey:tf}=(0,Pn.getPreferenceValues)(),wr=async(t,r)=>{let o=await nt.getTokens(),i=o?.accessToken;i?o?.refreshToken&&o?.isExpired()&&(await nt.setTokens(await rf(o.refreshToken)),i=(await nt.getTokens())?.accessToken):(await Pn.LocalStorage.clear(),await Na(),i=(await nt.getTokens())?.accessToken);let s=t.startsWith("https://api.unsplash.com/")?t:`https://api.unsplash.com${t}`;return await wt(s,{...r,headers:{Authorization:`Bearer ${i}`,...r?.headers}}).then(async c=>c.json())};async function rf(t){let r=new URLSearchParams;r.append("client_id",tf.trim()),r.append("refresh_token",t.trim()),r.append("grant_type","refresh_token");let o=await wt("https://unsplash.com/oauth/token",{method:"POST",body:r});if(!o.ok)throw console.error("refresh tokens error:",await o.text()),new Error(o.statusText);let i=await o.json();return i.refresh_token=i.refresh_token??t,i}var Ga=(0,we.getPreferenceValues)(),Va=()=>{let{gridItemSize:t}=Ga;return t=="small"?we.Grid.ItemSize.Small:t=="large"?we.Grid.ItemSize.Large:we.Grid.ItemSize.Medium},Ya=()=>Ga.showImageTitle,Qa=t=>t.replace(/\w\S*/g,r=>r.charAt(0).toUpperCase()+r.substring(1).toLowerCase()),Ka=t=>t[0]==="~"?(0,ja.join)((0,Ha.homedir)(),t.slice(1)):t,Xa=async(t,r)=>{let o=await(0,we.showToast)(we.Toast.Style.Animated,"Liking photo...");try{await wr(`/photos/${t}/like`,{method:r?"DELETE":"POST"}),o.style=we.Toast.Style.Success,o.title=`Photo ${r?"unliked":"liked"}!`}catch{o.style=we.Toast.Style.Failure,o.title="An error occured"}};var Hn=require("react"),jn=require("@raycast/api");var Ve=require("@raycast/api");var Wo=require("react");var F=require("react");function ts(t,r,o,i){function s(u){return u instanceof o?u:new o(function(c){c(u)})}return new(o||(o=Promise))(function(u,c){function h(_){try{d(i.next(_))}catch(R){c(R)}}function m(_){try{d(i.throw(_))}catch(R){c(R)}}function d(_){_.done?u(_.value):s(_.value).then(h,m)}d((i=i.apply(t,r||[])).next())})}function rs(t,r){var o={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,s,u,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(d){return function(_){return m([d,_])}}function m(d){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,s&&(u=d[0]&2?s.return:d[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,d[1])).done)return u;switch(s=0,u&&(d=[d[0]&2,u.value]),d[0]){case 0:case 1:u=d;break;case 4:return o.label++,{value:d[1],done:!1};case 5:o.label++,s=d[1],d=[0];continue;case 7:d=o.ops.pop(),o.trys.pop();continue;default:if(u=o.trys,!(u=u.length>0&&u[u.length-1])&&(d[0]===6||d[0]===2)){o=0;continue}if(d[0]===3&&(!u||d[1]>u[0]&&d[1]<u[3])){o.label=d[1];break}if(d[0]===6&&o.label<u[1]){o.label=u[1],u=d;break}if(u&&o.label<u[2]){o.label=u[2],o.ops.push(d);break}u[2]&&o.ops.pop(),o.trys.pop();continue}d=r.call(t,o)}catch(_){d=[6,_],s=0}finally{i=u=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var De=function(){},J=De(),Rr=Object,le=function(t){return t===J},Er=function(t){return typeof t=="function"},Ge=function(t,r){return Rr.assign({},t,r)},Bo="undefined",Do=function(){return typeof window!=Bo},nf=function(){return typeof document!=Bo},of=function(){return Do()&&typeof window.requestAnimationFrame!=Bo},An=new WeakMap,af=0,Cr=function(t){var r=typeof t,o=t&&t.constructor,i=o==Date,s,u;if(Rr(t)===t&&!i&&o!=RegExp){if(s=An.get(t),s)return s;if(s=++af+"~",An.set(t,s),o==Array){for(s="@",u=0;u<t.length;u++)s+=Cr(t[u])+",";An.set(t,s)}if(o==Rr){s="#";for(var c=Rr.keys(t).sort();!le(u=c.pop());)le(t[u])||(s+=u+":"+Cr(t[u])+",");An.set(t,s)}}else s=i?t.toJSON():r=="symbol"?t.toString():r=="string"?JSON.stringify(t):""+t;return s},Ao=!0,sf=function(){return Ao},ns=Do(),qo=nf(),ko=ns&&window.addEventListener?window.addEventListener.bind(window):De,uf=qo?document.addEventListener.bind(document):De,Io=ns&&window.removeEventListener?window.removeEventListener.bind(window):De,lf=qo?document.removeEventListener.bind(document):De,cf=function(){var t=qo&&document.visibilityState;return le(t)||t!=="hidden"},ff=function(t){return uf("visibilitychange",t),ko("focus",t),function(){lf("visibilitychange",t),Io("focus",t)}},df=function(t){var r=function(){Ao=!0,t()},o=function(){Ao=!1};return ko("online",r),ko("offline",o),function(){Io("online",r),Io("offline",o)}},hf={isOnline:sf,isVisible:cf},mf={initFocus:ff,initReconnect:df},kn=!Do()||"Deno"in window,pf=function(t){return of()?window.requestAnimationFrame(t):setTimeout(t,1)},vr=kn?F.useEffect:F.useLayoutEffect,Co=typeof navigator<"u"&&navigator.connection,Za=!kn&&Co&&(["slow-2g","2g"].includes(Co.effectiveType)||Co.saveData),os=function(t){if(Er(t))try{t=t()}catch{t=""}var r=[].concat(t);t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Cr(t):"";var o=t?"$swr$"+t:"";return[t,r,o]},Rt=new WeakMap,is=0,as=1,ss=2,Tr=function(t,r,o,i,s,u,c){c===void 0&&(c=!0);var h=Rt.get(t),m=h[0],d=h[1],_=h[3],R=m[r],y=d[r];if(c&&y)for(var g=0;g<y.length;++g)y[g](o,i,s);return u&&(delete _[r],R&&R[0])?R[0](ss).then(function(){return t.get(r)}):t.get(r)},bf=0,Oo=function(){return++bf},us=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return ts(void 0,void 0,void 0,function(){var o,i,s,u,c,h,m,d,_,R,y,g,S,E,T,w,x,U,P,q;return rs(this,function(A){switch(A.label){case 0:if(o=t[0],i=t[1],s=t[2],u=t[3],c=typeof u=="boolean"?{revalidate:u}:u||{},h=c.populateCache!==!1,m=c.revalidate!==!1,d=c.rollbackOnError!==!1,_=c.optimisticData,R=os(i),y=R[0],g=R[2],!y)return[2];if(S=Rt.get(o),E=S[2],t.length<3)return[2,Tr(o,y,o.get(y),J,J,m,h)];if(T=s,x=Oo(),E[y]=[x,0],U=!le(_),P=o.get(y),U&&(o.set(y,_),Tr(o,y,_)),Er(T))try{T=T(o.get(y))}catch(V){w=V}return T&&Er(T.then)?[4,T.catch(function(V){w=V})]:[3,2];case 1:if(T=A.sent(),x!==E[y][0]){if(w)throw w;return[2,T]}else w&&U&&d&&(h=!0,T=P,o.set(y,P));A.label=2;case 2:return h&&(w||o.set(y,T),o.set(g,Ge(o.get(g),{error:w}))),E[y][1]=Oo(),[4,Tr(o,y,T,w,J,m,h)];case 3:if(q=A.sent(),w)throw w;return[2,h?q:T]}})})},Ja=function(t,r){for(var o in t)t[o][0]&&t[o][0](r)},ls=function(t,r){if(!Rt.has(t)){var o=Ge(mf,r),i={},s=us.bind(J,t),u=De;if(Rt.set(t,[i,{},{},{},s]),!kn){var c=o.initFocus(setTimeout.bind(J,Ja.bind(J,i,is))),h=o.initReconnect(setTimeout.bind(J,Ja.bind(J,i,as)));u=function(){c&&c(),h&&h(),Rt.delete(t)}}return[t,s,u]}return[t,Rt.get(t)[4]]},yf=function(t,r,o,i,s){var u=o.errorRetryCount,c=s.retryCount,h=~~((Math.random()+.5)*(1<<(c<8?c:8)))*o.errorRetryInterval;!le(u)&&c>u||setTimeout(i,h,s)},cs=ls(new Map),fs=cs[0],gf=cs[1],ds=Ge({onLoadingSlow:De,onSuccess:De,onError:De,onErrorRetry:yf,onDiscarded:De,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Za?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Za?5e3:3e3,compare:function(t,r){return Cr(t)==Cr(r)},isPaused:function(){return!1},cache:fs,mutate:gf,fallback:{}},hf),hs=function(t,r){var o=Ge(t,r);if(r){var i=t.use,s=t.fallback,u=r.use,c=r.fallback;i&&u&&(o.use=i.concat(u)),s&&c&&(o.fallback=Ge(s,c))}return o},xo=(0,F.createContext)({}),Sf=function(t){var r=t.value,o=hs((0,F.useContext)(xo),r),i=r&&r.provider,s=(0,F.useState)(function(){return i?ls(i(o.cache||fs),r):J})[0];return s&&(o.cache=s[0],o.mutate=s[1]),vr(function(){return s?s[2]:J},[]),(0,F.createElement)(xo.Provider,Ge(t,{value:o}))},_f=function(t,r){var o=(0,F.useState)({})[1],i=(0,F.useRef)(t),s=(0,F.useRef)({data:!1,error:!1,isValidating:!1}),u=(0,F.useCallback)(function(c){var h=!1,m=i.current;for(var d in c){var _=d;m[_]!==c[_]&&(m[_]=c[_],s.current[_]&&(h=!0))}h&&!r.current&&o({})},[]);return vr(function(){i.current=t}),[i,s.current,u]},wf=function(t){return Er(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}]},Rf=function(){return Ge(ds,(0,F.useContext)(xo))},vf=function(t){return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var s=Rf(),u=wf(o),c=u[0],h=u[1],m=u[2],d=hs(s,m),_=t,R=d.use;if(R)for(var y=R.length;y-- >0;)_=R[y](_);return _(c,h||d.fetcher,d)}},es=function(t,r,o){var i=r[t]||(r[t]=[]);return i.push(o),function(){var s=i.indexOf(o);s>=0&&(i[s]=i[i.length-1],i.pop())}},Po={dedupe:!0},Tf=function(t,r,o){var i=o.cache,s=o.compare,u=o.fallbackData,c=o.suspense,h=o.revalidateOnMount,m=o.refreshInterval,d=o.refreshWhenHidden,_=o.refreshWhenOffline,R=Rt.get(i),y=R[0],g=R[1],S=R[2],E=R[3],T=os(t),w=T[0],x=T[1],U=T[2],P=(0,F.useRef)(!1),q=(0,F.useRef)(!1),A=(0,F.useRef)(w),V=(0,F.useRef)(r),Z=(0,F.useRef)(o),Y=function(){return Z.current},it=function(){return Y().isVisible()&&Y().isOnline()},re=function(H){return i.set(U,Ge(i.get(U),H))},Le=i.get(w),Kt=le(u)?o.fallback[w]:u,pe=le(Le)?Kt:Le,Br=i.get(U)||{},Fe=Br.error,Dr=function(){return le(h)?Y().isPaused()?!1:c?!le(pe):le(pe)||o.revalidateIfStale:h},qr=function(){return!w||!r?!1:Br.isValidating?!0:!P.current&&Dr()},Et=qr(),Ct=_f({data:pe,error:Fe,isValidating:Et},q),Pe=Ct[0],at=Ct[1],st=Ct[2],$e=(0,F.useCallback)(function(H){return ts(void 0,void 0,void 0,function(){var N,ne,oe,ee,ze,ie,Q,Ae,ce,ut,be,Ye,lt;return rs(this,function(ke){switch(ke.label){case 0:if(N=V.current,!w||!N||q.current||Y().isPaused())return[2,!1];ee=!0,ze=H||{},ie=!E[w]||!ze.dedupe,Q=function(){return!q.current&&w===A.current&&P.current},Ae=function(){var Xt=E[w];Xt&&Xt[1]===oe&&delete E[w]},ce={isValidating:!1},ut=function(){re({isValidating:!1}),Q()&&st(ce)},re({isValidating:!0}),st({isValidating:!0}),ke.label=1;case 1:return ke.trys.push([1,3,,4]),ie&&(Tr(i,w,Pe.current.data,Pe.current.error,!0),o.loadingTimeout&&!i.get(w)&&setTimeout(function(){ee&&Q()&&Y().onLoadingSlow(w,o)},o.loadingTimeout),E[w]=[N.apply(void 0,x),Oo()]),lt=E[w],ne=lt[0],oe=lt[1],[4,ne];case 2:return ne=ke.sent(),ie&&setTimeout(Ae,o.dedupingInterval),!E[w]||E[w][1]!==oe?(ie&&Q()&&Y().onDiscarded(w),[2,!1]):(re({error:J}),ce.error=J,be=S[w],!le(be)&&(oe<=be[0]||oe<=be[1]||be[1]===0)?(ut(),ie&&Q()&&Y().onDiscarded(w),[2,!1]):(s(Pe.current.data,ne)?ce.data=Pe.current.data:ce.data=ne,s(i.get(w),ne)||i.set(w,ne),ie&&Q()&&Y().onSuccess(ne,w,o),[3,4]));case 3:return Ye=ke.sent(),Ae(),Y().isPaused()||(re({error:Ye}),ce.error=Ye,ie&&Q()&&(Y().onError(Ye,w,o),o.shouldRetryOnError&&it()&&Y().onErrorRetry(Ye,w,o,$e,{retryCount:(ze.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return ee=!1,ut(),Q()&&ie&&Tr(i,w,ce.data,ce.error,!1),[2,!0]}})})},[w]),Gn=(0,F.useCallback)(us.bind(J,i,function(){return A.current}),[]);if(vr(function(){V.current=r,Z.current=o}),vr(function(){if(w){var H=P.current,N=$e.bind(J,Po),ne=function(Q,Ae,ce){st(Ge({error:Ae,isValidating:ce},s(Pe.current.data,Q)?J:{data:Q}))},oe=0,ee=function(Q){if(Q==is){var Ae=Date.now();Y().revalidateOnFocus&&Ae>oe&&it()&&(oe=Ae+Y().focusThrottleInterval,N())}else if(Q==as)Y().revalidateOnReconnect&&it()&&N();else if(Q==ss)return $e()},ze=es(w,g,ne),ie=es(w,y,ee);return q.current=!1,A.current=w,P.current=!0,H&&st({data:pe,error:Fe,isValidating:Et}),Dr()&&(le(pe)||kn?N():pf(N)),function(){q.current=!0,ze(),ie()}}},[w,$e]),vr(function(){var H;function N(){var oe=Er(m)?m(pe):m;oe&&H!==-1&&(H=setTimeout(ne,oe))}function ne(){!Pe.current.error&&(d||Y().isVisible())&&(_||Y().isOnline())?$e(Po).then(N):N()}return N(),function(){H&&(clearTimeout(H),H=-1)}},[m,d,_,$e]),(0,F.useDebugValue)(pe),c&&le(pe)&&w)throw V.current=r,Z.current=o,le(Fe)?$e(Po):Fe;return{mutate:Gn,get data(){return at.data=!0,pe},get error(){return at.error=!0,Fe},get isValidating(){return at.isValidating=!0,Et}}},jm=Rr.defineProperty(Sf,"default",{value:ds});var ms=vf(Tf);var ps=()=>{let[t,r]=(0,Wo.useState)(!0),[o,i]=(0,Wo.useState)([]);return ms("get-user-likes",Ef,{onSuccess:s=>{s.errors?(r(!1),(0,Ve.showToast)(Ve.Toast.Style.Failure,"Failed to fetch likes.",s.errors?.join(`
`))):i(s),r(!1)},onError:s=>{(0,Ve.showToast)(Ve.Toast.Style.Failure,"Something went wrong.",String(s)),r(!1)}}),{loading:t,likes:o}},Ef=async()=>{let t=await Ve.LocalStorage.getItem("username");if(!t){let o=await wr("/me");Ve.LocalStorage.setItem("username",o.username),t=o.username}return await wr(`/users/${t}/likes`)};var D=require("@raycast/api");var al=require("react");var xr=require("@raycast/api");var Ju=Oe(require("node:process"),1),el=Oe(Zu(),1);async function Yt(t){if(Ju.default.platform!=="darwin")throw new Error("macOS only");let{stdout:r}=await(0,el.default)("osascript",["-e",t]);return r}var tl=async({url:t,id:r})=>{let{downloadSize:o}=(0,xr.getPreferenceValues)();try{await(0,xr.showHUD)("Please select a location to save the image..."),await Yt(`
      set outputFolder to choose folder with prompt "Please select an output folder:"
      set temp_folder to (POSIX path of outputFolder) & "${r}-${o}.jpg"
      set q_temp_folder to quoted form of temp_folder

      set cmd to "curl -o " & q_temp_folder & " " & "${t}"
        do shell script cmd
    `)}catch(i){console.error(i),await(0,xr.showHUD)("Couldn't save the image...")}};var me=require("@raycast/api");var ri=require("fs");var rl=async(t,r)=>{if(r==="hud")await(0,me.showHUD)(t);else return await(0,me.showToast)(me.Toast.Style.Animated,t)},ni=async({url:t,id:r,every:o,useHud:i=!1,isBackground:s=!1})=>{let{downloadSize:u,wallpaperPath:c}=(0,me.getPreferenceValues)(),h=Ka(c||me.environment.supportPath),m;s||((0,ri.existsSync)(h)?m=await rl("Downloading and setting wallpaper...",i?"hud":"toast"):m=await rl("The selected path does not exist. Please select a valid path.",i?"hud":"toast"));let d=h.endsWith("/")?`${h}${r}-${u}.jpg`:`${h}/${r}-${u}.jpg`;try{let _=d,R=(0,ri.existsSync)(_)?"":`set cmd to "curl -o " & q_temp_folder & " " & "${t}"
        do shell script cmd`;if(await Yt(`
      set temp_folder to (POSIX path of "${_}")
      set q_temp_folder to quoted form of temp_folder

      ${R}

      set x to alias (POSIX file temp_folder)

      try
        tell application "System Events"
          tell ${o?"every":"current"} desktop
            set picture to (x as text)
            return "ok"
          end tell
        end tell
      on error
        set dialogTitle to "Error Setting Wallpaper"
        set dialogText to "Please make sure you have given Raycast the required permission. To make sure, click the button below and grant Raycast the 'System Events' permission."

        display alert dialogTitle message dialogText buttons {"Cancel", "Open Preferences"} default button 2 as informational
          if button returned of result is "Open Preferences" then
            do shell script "open 'x-apple.systempreferences:com.apple.preference.security?Privacy_Automation'"
          end if

        return "error"
      end try
    `)!=="ok")throw new Error("Error setting wallpaper.");return i?!s&&await(0,me.showHUD)("Wallpaper set!"):m&&(m.style=me.Toast.Style.Success,m.title="Wallpaper set!"),!0}catch(_){return console.error(_),m&&(m.style=me.Toast.Style.Failure,m.title="Something went wrong.",m.message="Try with another image or check your internet connection."),!1}};var ot=require("@raycast/api");var nl=require("fs"),ol=async({url:t,id:r})=>{let o=await(0,ot.showToast)(ot.Toast.Style.Animated,"Downloading and copying image..."),i=ot.environment.supportPath,s=i.endsWith("/")?`${i}${r}.jpg`:`${i}/${r}.jpg`;try{let u=s,c=(0,nl.existsSync)(u)?"":`set cmd to "curl -o " & q_temp_folder & " " & "${t}"
        do shell script cmd`;await Yt(`
      set temp_folder to (POSIX path of "${u}")
      set q_temp_folder to quoted form of temp_folder

      ${c}

      set x to alias (POSIX file temp_folder)
      set the clipboard to (read (contents of x) as JPEG picture)
    `),o.style=ot.Toast.Style.Success,o.title="Image copied to the clipboard!"}catch(u){console.error(u),o.style=ot.Toast.Style.Failure,o.title="Something went wrong.",o.message="Try with another image or check your internet connection."}};var Re=require("@raycast/api");var We=require("react/jsx-runtime"),Sh=({result:t})=>{let r=t.urls?.regular||t.urls?.small||t.urls?.thumb,o=t.created_at?new Date(t.created_at).toLocaleString():"Unknown";return(0,We.jsx)(Re.Detail,{markdown:`![${t.alt_description}](${r})`,metadata:(0,We.jsxs)(Re.Detail.Metadata,{children:[t.description&&(0,We.jsx)(Re.Detail.Metadata.Label,{title:"Description",text:t.description}),(0,We.jsx)(Re.Detail.Metadata.Link,{title:"Author",text:t.user.username,target:t.user.links.html}),(0,We.jsx)(Re.Detail.Metadata.Label,{title:"Uploaded On",text:o,icon:Re.Icon.Calendar}),(0,We.jsx)(Re.Detail.Metadata.Label,{title:"Likes",text:String(t.likes),icon:Re.Icon.Heart}),(0,We.jsx)(Re.Detail.Metadata.Label,{title:"Dimensions",text:`${t.width}x${t.height}`,icon:Re.Icon.AppWindow})]}),navigationTitle:t.user?.name,actions:(0,We.jsx)(Nn,{item:t})})},il=Sh;var M=require("react/jsx-runtime"),_h=({details:t,item:r,unlike:o})=>(0,M.jsx)(D.ActionPanel,{children:(0,M.jsx)(wh,{details:t,item:r,unlike:o})}),wh=({details:t=!1,item:r,unlike:o})=>{let{push:i}=(0,D.useNavigation)(),{downloadSize:s}=(0,D.getPreferenceValues)(),[u,c]=(0,al.useState)(r.liked_by_user),h=r.urls?.raw||r.urls?.full||r.urls?.regular||r.urls?.small,m=async()=>{await Xa(r.id,u),u&&o&&o(_=>[..._,String(r.id)]),c(!u)},d={url:r.urls?.[s]||h,id:`${r.id}-${s}`};return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(D.ActionPanel.Section,{children:[t&&(0,M.jsx)(D.Action,{title:"Show Details",icon:D.Icon.List,onAction:()=>i((0,M.jsx)(il,{result:r}))}),(0,M.jsx)(D.Action,{title:`${u?"Unlike":"Like"} Photo`,icon:D.Icon.Heart,style:u?D.Action.Style.Destructive:D.Action.Style.Regular,shortcut:{modifiers:["cmd"],key:"l"},onAction:m}),r.links?.html&&(0,M.jsx)(D.Action.OpenInBrowser,{url:r.links.html,title:"Open Original"}),r.user?.links?.html&&(0,M.jsx)(D.Action.OpenInBrowser,{url:r.user.links.html,icon:D.Icon.Person,shortcut:{modifiers:["cmd"],key:"o"},title:"Open Author"})]}),h&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsxs)(D.ActionPanel.Section,{title:"Image",children:[(0,M.jsx)(D.Action,{title:"Copy to Clipboard",icon:D.Icon.Clipboard,shortcut:{modifiers:["cmd","shift"],key:"c"},onAction:()=>ol(d)}),(0,M.jsx)(D.Action,{title:"Download Image",icon:D.Icon.Desktop,shortcut:{modifiers:["cmd","shift"],key:"d"},onAction:()=>tl({url:h,id:String(r.id)})})]}),(0,M.jsxs)(D.ActionPanel.Section,{title:"Set as Wallpaper On",children:[(0,M.jsx)(D.Action,{title:"Current Monitor",icon:D.Icon.Desktop,shortcut:{modifiers:["cmd","shift"],key:"w"},onAction:()=>ni({url:h,id:String(r.id)})}),(0,M.jsx)(D.Action,{title:"Every Monitor",icon:D.Icon.Desktop,shortcut:{modifiers:["shift","opt"],key:"w"},onAction:()=>ni({url:h,id:String(r.id),every:!0})})]})]}),(0,M.jsxs)(D.ActionPanel.Section,{title:"Links",children:[r.links?.html&&(0,M.jsx)(D.Action.CopyToClipboard,{content:r.links.html,title:"Copy URL to Clipboard",icon:D.Icon.Clipboard}),h&&(0,M.jsx)(D.Action.CopyToClipboard,{content:h,title:"Copy Image URL to Clipboard",icon:D.Icon.Clipboard}),r.user?.links?.html&&(0,M.jsx)(D.Action.CopyToClipboard,{content:r.user.links.html,title:"Copy Author URL to Clipboard",icon:D.Icon.Clipboard})]})]})},Nn=_h;var Qt=require("react/jsx-runtime"),Rh=()=>{let{loading:t,likes:r}=ps(),o=Va(),[i,s]=(0,Hn.useState)([]),u=(0,Hn.useMemo)(()=>r?.filter(c=>!i.includes(String(c.id)))||[],[i,r]);return(0,Qt.jsx)(jn.Grid,{isLoading:t,itemSize:o,searchBarPlaceholder:"Search your likes...",children:(0,Qt.jsx)(jn.Grid.Section,{title:"Results",subtitle:String(u?.length),children:u?.map(c=>(0,Qt.jsx)(vh,{item:c,unlike:s},c.id))})})},vh=({item:t,unlike:r})=>{let[o,i]=[t.title||t.description||t.user.name||"No Name",t.urls?.thumb||t.urls?.small||t.urls?.regular],s={...t,title:o,alt_description:""},u=Ya()?Qa(o):"";return(0,Qt.jsx)(jn.Grid.Item,{content:i,title:u,actions:(0,Qt.jsx)(Nn,{item:s,unlike:r,details:!0})})},Th=Rh;
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

swr/dist/index.mjs:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
